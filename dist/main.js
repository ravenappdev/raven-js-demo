/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={983:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create,Object.create;var i,o,a=n(448),s=n(886),u=n(594),c=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),l=new a.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((o={})[h]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),d=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(_);const w=_},886:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>l,zt:()=>c});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function o(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var a=n(448),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),u="[DEFAULT]",c=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=u);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new a.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:u,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService({instanceIdentifier:o});if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:u})}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),o=r.next();!o.done;o=r.next()){var a=i(o.value,2),s=a[0],c=a[1],l=this.normalizeInstanceIdentifier(s);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=u),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(o(o([],i(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),i(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=u),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=void 0===e?u:e,r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===u?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:u:t},t}(),l=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new c(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},790:(t,e,n)=>{"use strict";var r=n(983),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function c(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var l=n(448),h=n(594),f=n(886);t=n.hmd(t);var p,d=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,l.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,l.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),v=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,l.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),g=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new d(e)}}catch(t){}return new v},y=g("localStorage"),m=g("sessionStorage"),b=new h.Yd("@firebase/database"),_=(p=1,function(){return p++}),w=function(t){var e=(0,l.dS)(t),n=new l.gQ;n.update(e);var r=n.digest();return l.US.encodeByteArray(r)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=I.apply(null,i):n+="object"==typeof i?(0,l.Pz)(i):i,n+=" "}return n},T=null,E=!0,S=function(t,e){(0,l.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(b.logLevel=h.in.VERBOSE,T=b.log.bind(b),e&&m.set("logging_enabled",!0)):"function"==typeof t?T=t:(T=null,m.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===E&&(E=!1,null===T&&!0===m.get("logging_enabled")&&S(!0)),T){var n=I.apply(null,t);T(n)}},k=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,c([t],u(e)))}},A=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+I.apply(void 0,c([],u(t)));b.error(n)},N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+I.apply(void 0,c([],u(t)));throw b.error(n),new Error(n)},D=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+I.apply(void 0,c([],u(t)));b.warn(n)},P=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},R="[MIN_NAME]",O="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===R||e===O)return-1;if(e===R||t===O)return 1;var n=B(t),r=B(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},L=function(t,e){return t===e?0:t<e?-1:1},M=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,l.Pz)(e))},F=function(t){if("object"!=typeof t||null===t)return(0,l.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,l.Pz)(e[i]),r+=":",r+=F(t[e[i]]);return r+"}"},j=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function U(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var q=function(t){(0,l.hu)(!P(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},V=new RegExp("^-?(0*)\\d{1,10}$"),B=function(t){if(V.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},K=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw D("Exception was thrown by user callback.",e),t}),Math.floor(0))}},W=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},z=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function G(){return new z("")}function H(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Q(t){return t.pieces_.length-t.pieceNum_}function Y(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new z(t.pieces_,e)}function X(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function $(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function J(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Z(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new z(e,0)}function tt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof z)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new z(n,0)}function et(t){return t.pieceNum_>=t.pieces_.length}function nt(t,e){var n=H(t),r=H(e);if(null===n)return e;if(n===r)return nt(Y(t),Y(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rt(t,e){for(var n=J(t,0),r=J(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function it(t,e){if(Q(t)!==Q(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ot(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Q(t)>Q(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var at=function(t,e){this.errorPrefix_=e,this.parts_=J(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,l.ug)(this.parts_[n]);st(this)};function st(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ut(t))}function ut(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var ct=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lt="websocket",ht="long_polling",ft=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=y.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&y.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function pt(t,e,n){var r;if((0,l.hu)("string"==typeof e,"typeof type must == string"),(0,l.hu)("object"==typeof n,"typeof params must == object"),e===lt)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ht)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return U(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var dt,vt,gt,yt,mt,bt,_t,wt=function(t,e){var n=It(t),r=n.namespace;"firebase.com"===n.domain&&N(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||N("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&D("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ft(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new z(n.pathString)}},It=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=s(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):D("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Tt=/[\[\].#$\/\u0000-\u001F\u007F]/,Et=/[\[\].#$\u0000-\u001F\u007F]/,St=10485760,Ct=function(t){return"string"==typeof t&&0!==t.length&&!Tt.test(t)},kt=function(t){return"string"==typeof t&&0!==t.length&&!Et.test(t)},At=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!P(t)||t&&"object"==typeof t&&(0,l.r3)(t,".sv")},Nt=function(t,e,n,r,i){i&&void 0===n||Dt((0,l.gK)(t,e,i),n,r)},Dt=function(t,e,n){var r=n instanceof z?new at(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+ut(r));if("function"==typeof e)throw new Error(t+"contains a function "+ut(r)+" with contents = "+e.toString());if(P(e))throw new Error(t+"contains "+e.toString()+" "+ut(r));if("string"==typeof e&&e.length>St/3&&(0,l.ug)(e)>St)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+ut(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(U(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Ct(e)))throw new Error(t+" contains an invalid key ("+e+") "+ut(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;s=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=(0,l.ug)(s),st(a),Dt(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=(0,l.ug)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),i&&o)throw new Error(t+' contains ".value" child '+ut(r)+" in addition to actual children.")}},Pt=function(t,e,n,r,i){if(!i||void 0!==n){var o=(0,l.gK)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];U(n,(function(t,e){var n=new z(t);if(Dt(o,e,tt(r,n)),".priority"===X(n)&&!At(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=J(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ct(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(rt);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&ot(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},Rt=function(t,e,n,r){if(!r||void 0!==n){if(P(n))throw new Error((0,l.gK)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!At(n))throw new Error((0,l.gK)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ot=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,l.gK)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xt=function(t,e,n,r){if(!(r&&void 0===n||Ct(n)))throw new Error((0,l.gK)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lt=function(t,e,n,r){if(!(r&&void 0===n||kt(n)))throw new Error((0,l.gK)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lt(t,e,n,r)},Ft=function(t,e){if(".info"===H(e))throw new Error(t+" failed = Can't modify data under /.info/")},jt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ct(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kt(t)}(r))throw new Error((0,l.gK)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ut=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,l.gK)(t,e,r)+"must be a boolean.")},qt=function(t){return"number"==typeof t?"number:"+q(t):"string:"+t},Vt=function(t){if(t.isLeafNode()){var e=t.val();(0,l.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,l.r3)(e,".sv"),"Priority must be a string or number.")}else(0,l.hu)(t===dt||t.isEmpty(),"priority of unexpected type.");(0,l.hu)(t===dt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Bt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,l.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Vt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return vt},set:function(t){vt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return et(e)?this:".priority"===H(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=H(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,l.hu)(".priority"!==r||1===Q(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Y(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?q(this.value_):this.value_,this.lazyHash_=w(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,l.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return(0,l.hu)(i>=0,"Unknown leaf type: "+n),(0,l.hu)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Kt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Wt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Gt.EMPTY_NODE,this.right=null!=o?o:Gt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Gt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Gt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),zt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Wt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Gt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Wt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Wt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Kt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Kt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Kt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Kt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new zt,t}(),Ht=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Qt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ht(R,t),r=new Ht(R,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ht.MIN},t}(),Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ht.MIN},e.prototype.maxPost=function(){return new Ht(O,new Bt("[PRIORITY-POST]",yt))},e.prototype.makePost=function(t,e){var n=gt(t);return new Ht(e,new Bt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Qt)),Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return mt},set:function(t){mt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,l.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ht.MIN},e.prototype.maxPost=function(){return new Ht(O,mt)},e.prototype.makePost=function(t,e){return(0,l.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ht(t,mt)},e.prototype.toString=function(){return".key"},e}(Qt),$t=new Xt,Jt=Math.log(2),Zt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Jt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Wt(a,o.node,Wt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Wt(a,o.node,Wt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Wt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Wt.BLACK):(s(h,Wt.BLACK),s(h,Wt.RED))}return o}(new Zt(t.length));return new Gt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,l.hu)(ee&&Yt,"ChildrenNode.ts has not been loaded"),bt=bt||new t({".priority":ee},{".priority":Yt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,l.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Gt?e:null},t.prototype.hasIndex=function(t){return(0,l.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,l.hu)(e!==$t,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(Ht.Wrap),u=s.getNext();u;)o=o||e.isDefinedOn(u.node),i.push(u),u=s.getNext();r=o?te(i,e.getCompare()):ee;var c=e.toString(),h=a({},this.indexSet_);h[c]=e;var f=a({},this.indexes_);return f[c]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,l.UI)(this.indexes_,(function(t,i){var o=(0,l.DV)(r.indexSet_,i);if((0,l.hu)(o,"Missing index implementation for "+i),t===ee){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Ht.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),te(a,o.getCompare())}return ee}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Ht(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,l.UI)(this.indexes_,(function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Ht(e.name,r)):t})),this.indexSet_)},t}();function re(t,e){return x(t.name,e.name)}function ie(t,e){return x(t,e)}var oe,ae=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Vt(this.priorityNode_),this.children_.isEmpty()&&(0,l.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return _t||(_t=new t(new Gt(ie),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||_t},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?_t:e},t.prototype.getChild=function(t){var e=H(t);return null===e?this:this.getImmediateChild(e).getChild(Y(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,l.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ht(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?_t:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=H(t);if(null===n)return e;(0,l.hu)(".priority"!==H(t)||1===Q(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Y(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Yt,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+qt(this.getPriority().val())+":"),this.forEachChild(Yt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":w(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ht(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ht(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ht(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Ht.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Ht.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===se?-1:0},t.prototype.withIndex=function(e){if(e===$t||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===$t||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Yt),r=e.getIterator(Yt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===$t?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),se=new(function(t){function e(){return t.call(this,new Gt(ie),ae.EMPTY_NODE,ne.Default)||this}return o(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ae.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ae));function ue(t,e){if(void 0===e&&(e=null),null===t)return ae.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,l.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Bt(t,ue(e));if(t instanceof Array){var n=ae.EMPTY_NODE;return U(t,(function(e,r){if((0,l.r3)(t,e)&&"."!==e.substring(0,1)){var i=ue(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(ue(e))}var r=[],i=!1;if(U(t,(function(t,e){if("."!==t.substring(0,1)){var n=ue(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ht(t,n)))}})),0===r.length)return ae.EMPTY_NODE;var o=te(r,re,(function(t){return t.name}),ie);if(i){var a=te(r,Yt.getCompare());return new ae(o,ue(e),new ne({".priority":a},{".priority":Yt}))}return new ae(o,ue(e),ne.Default)}function ce(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}Object.defineProperties(Ht,{MIN:{value:new Ht(R,ae.EMPTY_NODE)},MAX:{value:new Ht(O,se)}}),Xt.__EMPTY_NODE=ae.EMPTY_NODE,Bt.__childrenNodeConstructor=ae,dt=se,yt=se,function(t){gt=t}(ue),function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(oe||(oe={}));var le,he=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=oe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(et(this.path)){if(null!=this.affectedTree.value)return(0,l.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new z(e));return new t(G(),n,this.revert)}return(0,l.hu)(H(this.path)===e,"operationForChild called for unrelated child."),new t(Y(this.path),this.affectedTree,this.revert)},t}(),fe=function(){function t(t,e){void 0===e&&(le||(le=new Gt(L)),e=le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return U(e,(function(t,e){n=n.set(new z(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:G(),value:this.value};if(et(t))return null;var n=H(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Y(t),e);return null!=i?{path:tt(new z(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(et(e))return this;var n=H(e),r=this.children.get(n);return null!==r?r.subtree(Y(e)):new t(null)},t.prototype.set=function(e,n){if(et(e))return new t(n,this.children);var r=H(e),i=(this.children.get(r)||new t(null)).set(Y(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(et(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=H(e),r=this.children.get(n);if(r){var i=r.remove(Y(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(et(t))return this.value;var e=H(t),n=this.children.get(e);return n?n.get(Y(t)):null},t.prototype.setTree=function(e,n){if(et(e))return n;var r,i=H(e),o=(this.children.get(i)||new t(null)).setTree(Y(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(G(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(tt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,G(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(et(t))return null;var i=H(t),o=this.children.get(i);return o?o.findOnPath_(Y(t),tt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,G(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(et(e))return this;this.value&&r(n,this.value);var i=H(e),o=this.children.get(i);return o?o.foreachOnPath_(Y(e),tt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(G(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(tt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),pe=function(){function t(t,e){this.source=t,this.path=e,this.type=oe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return et(this.path)?new t(this.source,G()):new t(this.source,Y(this.path))},t}(),de=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=oe.OVERWRITE}return t.prototype.operationForChild=function(e){return et(this.path)?new t(this.source,G(),this.snap.getImmediateChild(e)):new t(this.source,Y(this.path),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=oe.MERGE}return t.prototype.operationForChild=function(e){if(et(this.path)){var n=this.children.subtree(new z(e));return n.isEmpty()?null:n.value?new de(this.source,G(),n.value):new t(this.source,G(),n)}return(0,l.hu)(H(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Y(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ge=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(et(t))return this.isFullyInitialized()&&!this.filtered_;var e=H(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();function ye(t,e){return{eventCache:t,serverCache:e}}function me(t,e,n,r){return ye(new ge(e,n,r),t.serverCache)}function be(t,e,n,r){return ye(t.eventCache,new ge(e,n,r))}function _e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function we(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}function Ie(t){return{type:"value",snapshotNode:t}}function Te(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ee(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Se(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Ce=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){(0,l.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Ee(e,a)):(0,l.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Te(e,n)):o.trackChildChange(Se(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Yt,(function(t,r){e.hasChild(t)||n.trackChildChange(Ee(t,r))})),e.isLeafNode()||e.forEachChild(Yt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Se(e,r,i))}else n.trackChildChange(Te(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ae.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ke=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,l.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,l.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Se(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Ee(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Te(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,l.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Se(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ae=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new fe(null))},t}();function Ne(t,e,n){if(et(e))return new Ae(new fe(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=nt(i,e);return o=o.updateChild(a,n),new Ae(t.writeTree_.set(i,o))}var s=new fe(n),u=t.writeTree_.setTree(e,s);return new Ae(u)}function De(t,e,n){var r=t;return U(n,(function(t,n){r=Ne(r,tt(e,t),n)})),r}function Pe(t,e){if(et(e))return Ae.empty();var n=t.writeTree_.setTree(e,new fe(null));return new Ae(n)}function Re(t,e){return null!=Oe(t,e)}function Oe(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(nt(n.path,e)):null}function xe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Yt,(function(t,n){e.push(new Ht(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Ht(t,n.value))})),e}function Le(t,e){if(et(e))return t;var n=Oe(t,e);return new Ae(null!=n?new fe(n):t.writeTree_.subtree(e))}function Me(t){return t.writeTree_.isEmpty()}function Fe(t,e){return je(G(),t.writeTree_,e)}function je(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,l.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=je(tt(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(tt(t,".priority"),r)),n}function Ue(t,e){return Xe(e,t)}function qe(t,e){if(t.snap)return ot(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&ot(tt(t.path,n),e))return!0;return!1}function Ve(t){return t.visible}function Be(t,e,n){for(var r=Ae.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)ot(n,a)?r=Ne(r,s=nt(n,a),o.snap):ot(a,n)&&(s=nt(a,n),r=Ne(r,G(),o.snap.getChild(s)));else{if(!o.children)throw(0,l.g5)("WriteRecord should have .snap or .children");if(ot(n,a))r=De(r,s=nt(n,a),o.children);else if(ot(a,n))if(et(s=nt(a,n)))r=De(r,G(),o.children);else{var u=(0,l.DV)(o.children,H(s));if(u){var c=u.getChild(Y(s));r=Ne(r,G(),c)}}}}}return r}function Ke(t,e,n,r,i){if(r||i){var o=Le(t.visibleWrites,e);return!i&&Me(o)?n:i||null!=n||Re(o,G())?Fe(Be(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(ot(t.path,e)||ot(e,t.path))}),e),n||ae.EMPTY_NODE):null}var a=Oe(t.visibleWrites,e);if(null!=a)return a;var s=Le(t.visibleWrites,e);return Me(s)?n:null!=n||Re(s,G())?Fe(s,n||ae.EMPTY_NODE):null}function We(t,e,n,r){return Ke(t.writeTree,t.treePath,e,n,r)}function ze(t,e){return function(t,e,n){var r=ae.EMPTY_NODE,i=Oe(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Le(t.visibleWrites,e);return n.forEachChild(Yt,(function(t,e){var n=Fe(Le(o,new z(t)),e);r=r.updateImmediateChild(t,n)})),xe(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return xe(Le(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Ge(t,e,n,r){return function(t,e,n,r,i){(0,l.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=tt(e,n);if(Re(t.visibleWrites,o))return null;var a=Le(t.visibleWrites,o);return Me(a)?i.getChild(n):Fe(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function He(t,e){return function(t,e){return Oe(t.visibleWrites,e)}(t.writeTree,tt(t.treePath,e))}function Qe(t,e,n){return function(t,e,n,r){var i=tt(e,n),o=Oe(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Fe(Le(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Ye(t,e){return Xe(tt(t.treePath,e),t.writeTree)}function Xe(t,e){return{treePath:t,writeTree:e}}var $e=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Je=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qe(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:we(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Le(t.visibleWrites,e),c=Oe(u,G());if(null!=c)s=c;else{if(null==n)return[];s=Fe(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),p=f.getNext();p&&l.length<i;)0!==h(p,r)&&l.push(p),p=f.getNext();return l}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();function Ze(t,e,n,r,i,o){var a=e.eventCache;if(null!=He(r,n))return e;var s=void 0,u=void 0;if(et(n))if((0,l.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var c=we(e),h=ze(r,c instanceof ae?c:ae.EMPTY_NODE);s=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var f=We(r,we(e));s=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{var p=H(n);if(".priority"===p){(0,l.hu)(1===Q(n),"Can't have a priority with additional path components");var d=a.getNode(),v=Ge(r,n,d,u=e.serverCache.getNode());s=null!=v?t.filter.updatePriority(d,v):a.getNode()}else{var g=Y(n),y=void 0;if(a.isCompleteForChild(p)){u=e.serverCache.getNode();var m=Ge(r,n,a.getNode(),u);y=null!=m?a.getNode().getImmediateChild(p).updateChild(g,m):a.getNode().getImmediateChild(p)}else y=Qe(r,p,e.serverCache);s=null!=y?t.filter.updateChild(a.getNode(),p,y,g,i,o):a.getNode()}}return me(e,s,a.isFullyInitialized()||et(n),t.filter.filtersNodes())}function tn(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(et(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=H(n);if(!c.isCompleteForPath(n)&&Q(n)>1)return e;var p=Y(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),d):l.updateChild(c.getNode(),f,d,p,$e,null)}var v=be(e,u,c.isFullyInitialized()||et(n),l.filtersNodes());return Ze(t,v,n,i,new Je(i,v,o),s)}function en(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new Je(i,e,o);if(et(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=me(e,u,!0,t.filter.filtersNodes());else{var h=H(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=me(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=Y(n),p=c.getNode().getImmediateChild(h),d=void 0;if(et(f))d=r;else{var v=l.getCompleteChild(h);d=null!=v?".priority"===X(f)&&v.getChild(Z(f)).isEmpty()?v:v.updateChild(f,r):ae.EMPTY_NODE}s=p.equals(d)?e:me(e,t.filter.updateChild(c.getNode(),h,d,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function nn(t,e){return t.eventCache.isCompleteForChild(e)}function rn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function on(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=et(n)?r:new fe(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=rn(0,e.serverCache.getNode().getImmediateChild(n),r);c=tn(t,c,new z(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=rn(0,e.serverCache.getNode().getImmediateChild(n),r);c=tn(t,c,new z(n),h,i,o,a,s)}})),c}var an=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function sn(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,l.g5)("Should only compare child_ events.");var r=new Ht(e.childName,e.snapshotNode),i=new Ht(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}var un,cn,ln="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hn=(un=0,cn=[],function(t){var e,n=t===un;un=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ln.charAt(t%64),t=Math.floor(t/64);(0,l.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===cn[e];e--)cn[e]=0;cn[e]++}else for(e=0;e<12;e++)cn[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ln.charAt(cn[e]);return(0,l.hu)(20===i.length,"nextPushId: Length should be 20."),i}),fn=function(t){if("2147483647"===t)return"-";var e=B(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return O;var o=n[i],a=ln.charAt(ln.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},pn=function(t){if("-2147483648"===t)return R;var e=B(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ln.charAt(ln.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},dn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ht.MIN},e.prototype.maxPost=function(){return Ht.MAX},e.prototype.makePost=function(t,e){var n=ue(t);return new Ht(e,n)},e.prototype.toString=function(){return".value"},e}(Qt)),vn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,l.hu)(!et(e)&&".priority"!==H(e),"Can't create PathIndex with empty path or .priority key"),n}return o(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ue(t),r=ae.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ht(e,r)},e.prototype.maxPost=function(){var t=ae.EMPTY_NODE.updateChild(this.indexPath_,se);return new Ht(O,t)},e.prototype.toString=function(){return J(this.indexPath_,0).join("/")},e}(Qt),gn=function(){function t(e){this.indexedFilter_=new Ce(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ht(e,n))||(n=ae.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ae.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ae.EMPTY_NODE);var i=this;return e.forEachChild(Yt,(function(t,e){i.matches(new Ht(t,e))||(r=r.updateImmediateChild(t,ae.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),yn=function(){function t(t){this.rangedFilter_=new gn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ht(e,n))||(n=ae.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ae.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ae.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ae.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,ae.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;(0,l.hu)(s.numChildren()===this.limit_,"");var u=new Ht(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var f=s.getImmediateChild(e),p=r.getChildAfterChild(this.index_,c,this.reverse_);null!=p&&(p.name===e||s.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,u);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Se(e,n,f)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ee(e,f));var v=s.updateImmediateChild(e,ae.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(Te(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Ee(c.name,c.node)),i.trackChildChange(Te(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,ae.EMPTY_NODE)):t},t}(),mn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,l.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,l.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:R},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,l.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,l.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,l.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Yt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function bn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function _n(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function wn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function In(t,e,n){var r;return t.index_===$t?("string"==typeof e&&(e=fn(e)),r=wn(t,e,n)):r=wn(t,e,null==n?O:fn(n)),r.startAfterSet_=!0,r}function Tn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function En(t,e,n){var r;return t.index_===$t?("string"==typeof e&&(e=pn(e)),r=Tn(t,e,n)):r=Tn(t,e,null==n?R:pn(n)),r.endBeforeSet_=!0,r}function Sn(t,e){var n=t.copy();return n.index_=e,n}function Cn(t){var e,n={};return t.isDefault()||(t.index_===Yt?e="$priority":t.index_===dn?e="$value":t.index_===$t?e="$key":((0,l.hu)(t.index_ instanceof vn,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,l.Pz)(e),t.startSet_&&(n.startAt=(0,l.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,l.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,l.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,l.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var kn,An=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new Ce(r.getIndex()),o=(n=r).loadsAllData()?new Ce(n.getIndex()):n.hasLimit()?new yn(n):new gn(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(ae.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(ae.EMPTY_NODE,s.getNode(),null),l=new ge(u,a.isFullyInitialized(),i.filtersNodes()),h=new ge(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=ye(h,l),this.eventGenerator_=new an(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Nn(t,e){var n=we(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!et(e)&&!n.getImmediateChild(H(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Pn(t,e,n){var r=[];if(n){(0,l.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function Rn(t,e,n,r){e.type===oe.MERGE&&null!==e.source.queryId&&((0,l.hu)(we(t.viewCache_),"We should always have a full cache before handling merges"),(0,l.hu)(_e(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=t.viewCache_,s=function(t,e,n,r,i){var o,a,s=new ke;if(n.type===oe.OVERWRITE){var u=n;u.source.fromUser?o=en(t,e,u.path,u.snap,r,i,s):((0,l.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!et(u.path),o=tn(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===oe.MERGE){var c=n;c.source.fromUser?o=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=tt(n,r);nn(e,H(c))&&(s=en(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=tt(n,r);nn(e,H(c))||(s=en(t,s,c,u,i,o,a))})),s}(t,e,c.path,c.children,r,i,s):((0,l.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=on(t,e,c.path,c.children,r,i,a,s))}else if(n.type===oe.ACK_USER_WRITE){var h=n;o=h.revert?function(t,e,n,r,i,o){var a;if(null!=He(r,n))return e;var s=new Je(r,e,i),u=e.eventCache.getNode(),c=void 0;if(et(n)||".priority"===H(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=We(r,we(e));else{var f=e.serverCache.getNode();(0,l.hu)(f instanceof ae,"serverChildren would be complete if leaf node"),h=ze(r,f)}h=h,c=t.filter.updateFullNode(u,h,o)}else{var p=H(n),d=Qe(r,p,e.serverCache);null==d&&e.serverCache.isCompleteForChild(p)&&(d=u.getImmediateChild(p)),(c=null!=d?t.filter.updateChild(u,p,d,Y(n),s,o):e.eventCache.getNode().hasChild(p)?t.filter.updateChild(u,p,ae.EMPTY_NODE,Y(n),s,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=We(r,we(e))).isLeafNode()&&(c=t.filter.updateFullNode(c,a,o))}return a=e.serverCache.isFullyInitialized()||null!=He(r,G()),me(e,c,a,t.filter.filtersNodes())}(t,e,h.path,r,i,s):function(t,e,n,r,i,o,a){if(null!=He(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(et(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return tn(t,e,n,u.getNode().getChild(n),i,o,s,a);if(et(n)){var c=new fe(null);return u.getNode().forEachChild($t,(function(t,e){c=c.set(new z(t),e)})),on(t,e,n,c,i,o,s,a)}return e}var l=new fe(null);return r.foreach((function(t,e){var r=tt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),on(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,s)}else{if(n.type!==oe.LISTEN_COMPLETE)throw(0,l.g5)("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache;return Ze(t,be(e,o.getNode(),o.isFullyInitialized()||et(n),o.isFiltered()),n,r,$e,i)}(t,e,n.path,r,s)}var f=s.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=_e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Ie(_e(e)))}}(e,o,f),{viewCache:o,changes:f}}(t.processor_,a,e,n,r);return i=t.processor_,o=s.viewCache,(0,l.hu)(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,l.hu)(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,l.hu)(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,On(t,s.changes,s.viewCache.eventCache.getNode(),null)}function On(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),sn(t,i,"child_removed",e,r,n),sn(t,i,"child_added",e,r,n),sn(t,i,"child_moved",o,r,n),sn(t,i,"child_changed",e,r,n),sn(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}var xn=function(){this.views=new Map};function Ln(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var u=t.views.get(a);return(0,l.hu)(null!=u,"SyncTree gave us an op for an invalid query."),Rn(u,e,n,r)}var c=[];try{for(var h=s(t.views.values()),f=h.next();!f.done;f=h.next())u=f.value,c=c.concat(Rn(u,e,n,r))}catch(t){i={error:t}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return c}function Mn(t,e,n,r,i){var o=e.queryIdentifier(),a=t.views.get(o);if(!a){var s=We(n,i?r:null),u=!1;s?u=!0:r instanceof ae?(s=ze(n,r),u=!1):(s=ae.EMPTY_NODE,u=!1);var c=ye(new ge(s,u,!1),new ge(r,i,!1));return new An(e,c)}return a}function Fn(t){var e,n,r=[];try{for(var i=s(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function jn(t,e){var n,r,i=null;try{for(var o=s(t.views.values()),a=o.next();!a.done;a=o.next()){var u=a.value;i=i||Nn(u,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Un(t,e){if(e.getQueryParams().loadsAllData())return Bn(t);var n=e.queryIdentifier();return t.views.get(n)}function qn(t,e){return null!=Un(t,e)}function Vn(t){return null!=Bn(t)}function Bn(t){var e,n;try{for(var r=s(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query.getQueryParams().loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Kn=1,Wn=function(t){this.listenProvider_=t,this.syncPointTree_=new fe(null),this.pendingWriteTree_={visibleWrites:Ae.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function zn(t,e,n,r,i){return function(t,e,n,r,i){(0,l.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ne(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?$n(t,new de({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Gn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));(0,l.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=t.allWrites.length-1;i&&a>=0;){var s=t.allWrites[a];s.visible&&(a>=n&&qe(s,r.path)?i=!1:ot(r.path,s.path)&&(o=!0)),a--}return!!i&&(o?(function(t){t.visibleWrites=Be(t.allWrites,Ve,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0):(r.snap?t.visibleWrites=Pe(t.visibleWrites,r.path):U(r.children,(function(e){t.visibleWrites=Pe(t.visibleWrites,tt(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var i=new fe(null);return null!=r.snap?i=i.set(G(),!0):U(r.children,(function(t){i=i.set(new z(t),!0)})),$n(t,new he(r.path,i,n))}return[]}function Hn(t,e,n){return $n(t,new de({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Qn(t,e,n,r){var i=e.path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e.queryIdentifier()||qn(o,e))){var c=function(t,e,n,r){var i,o,a=e.queryIdentifier(),c=[],h=[],f=Vn(t);if("default"===a)try{for(var p=s(t.views.entries()),d=p.next();!d.done;d=p.next()){var v=u(d.value,2),g=v[0],y=v[1];h=h.concat(Pn(y,n,r)),Dn(y)&&(t.views.delete(g),y.query.getQueryParams().loadsAllData()||c.push(y.query))}}catch(t){i={error:t}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}else(y=t.views.get(a))&&(h=h.concat(Pn(y,n,r)),Dn(y)&&(t.views.delete(a),y.query.getQueryParams().loadsAllData()||c.push(y.query)));return f&&!Vn(t)&&c.push(new((0,l.hu)(kn,"Reference.ts has not been loaded"),kn)(e.repo,e.path)),{removed:c,events:h}}(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var h=c.removed;a=c.events;var f=-1!==h.findIndex((function(t){return t.getQueryParams().loadsAllData()})),p=t.syncPointTree_.findOnPath(i,(function(t,e){return Vn(e)}));if(f&&!p){var d=t.syncPointTree_.subtree(i);if(!d.isEmpty())for(var v=function(t){return t.fold((function(t,e,n){if(e&&Vn(e))return[Bn(e)];var r=[];return e&&(r=Fn(e)),U(n,(function(t,e){r=r.concat(e)})),r}))}(d),g=0;g<v.length;++g){var y=v[g],m=y.query,b=tr(t,y);t.listenProvider_.startListening(ar(m),er(t,m),b.hashFn,b.onComplete)}}!p&&h.length>0&&!r&&(f?t.listenProvider_.stopListening(ar(e),null):h.forEach((function(e){var n=t.queryToTagMap.get(nr(e));t.listenProvider_.stopListening(ar(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=nr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,h)}return a}function Yn(t,e,n){var r=e.path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=nt(t,r);i=i||jn(e,n),o=o||Vn(e)}));var a,s=t.syncPointTree_.get(r);s?(o=o||Vn(s),i=i||jn(s,G())):(s=new xn,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i?a=!0:(a=!1,i=ae.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=jn(e,G());n&&(i=i.updateImmediateChild(t,n))})));var u=qn(s,e);if(!u&&!e.getQueryParams().loadsAllData()){var c=nr(e);(0,l.hu)(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=Kn++;t.queryToTagMap.set(c,h),t.tagToQueryMap.set(h,c)}var f=function(t,e,n,r,i,o){var a=Mn(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,(function(t,e){r.push(Te(t,e))})),n.isFullyInitialized()&&r.push(Ie(n.getNode())),On(t,r,n.getNode(),e)}(a,n)}(s,e,n,Ue(t.pendingWriteTree_,r),i,a);if(!u&&!o){var p=Un(s,e);f=f.concat(function(t,e,n){var r=e.path,i=er(t,e),o=tr(t,n),a=t.listenProvider_.startListening(ar(e),i,o.hashFn,o.onComplete),s=t.syncPointTree_.subtree(r);if(i)(0,l.hu)(!Vn(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!et(t)&&e&&Vn(e))return[Bn(e).query];var r=[];return e&&(r=r.concat(Fn(e).map((function(t){return t.query})))),U(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];t.listenProvider_.stopListening(ar(h),er(t,h))}return a}(t,e,p))}return f}function Xn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=jn(n,nt(t,e));if(r)return r}));return Ke(r,e,i,n,!0)}function $n(t,e){return Jn(e,t.syncPointTree_,null,Ue(t.pendingWriteTree_,G()))}function Jn(t,e,n,r){if(et(t.path))return Zn(t,e,n,r);var i=e.get(G());null==n&&null!=i&&(n=jn(i,G()));var o=[],a=H(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=Ye(r,a);o=o.concat(Jn(s,u,c,l))}return i&&(o=o.concat(Ln(i,t,r,n))),o}function Zn(t,e,n,r){var i=e.get(G());null==n&&null!=i&&(n=jn(i,G()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=Ye(r,e),u=t.operationForChild(e);u&&(o=o.concat(Zn(u,i,a,s)))})),i&&(o=o.concat(Ln(i,t,r,n))),o}function tr(t,e){var n=e.query,r=er(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ae.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=rr(t,n);if(r){var i=ir(r),o=i.path,a=i.queryId,s=nt(o,e);return or(t,o,new pe(ce(a),s))}return[]}(t,n.path,r):function(t,e){return $n(t,new pe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Qn(t,n,null,i)}}}function er(t,e){var n=nr(e);return t.queryToTagMap.get(n)}function nr(t){return t.path.toString()+"$"+t.queryIdentifier()}function rr(t,e){return t.tagToQueryMap.get(e)}function ir(t){var e=t.indexOf("$");return(0,l.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new z(t.substr(0,e))}}function or(t,e,n){var r=t.syncPointTree_.get(e);return(0,l.hu)(r,"Missing sync point for query tag that we're tracking"),Ln(r,n,Ue(t.pendingWriteTree_,e),null)}function ar(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var sr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ur=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=tt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Xn(this.syncTree_,this.path_)},t}(),cr=function(t,e,n){return t&&"object"==typeof t?((0,l.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?lr(t[".sv"],e,n):"object"==typeof t[".sv"]?hr(t[".sv"],e):void(0,l.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},lr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,l.hu)(!1,"Unexpected server value: "+t)}},hr=function(t,e,n){t.hasOwnProperty("increment")||(0,l.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,l.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,l.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},fr=function(t,e,n,r){return dr(e,new ur(n,t),r)},pr=function(t,e,n){return dr(t,new sr(e),n)};function dr(t,e,n){var r,i=t.getPriority().val(),o=cr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=cr(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Bt(s,ue(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Bt(o))),u.forEachChild(Yt,(function(t,i){var o=dr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}function vr(){return{value:null,children:new Map}}function gr(t,e,n){if(et(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=H(e);t.children.has(r)||t.children.set(r,vr()),gr(t.children.get(r),e=Y(e),n)}}function yr(t,e){if(et(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Yt,(function(e,n){gr(t,new z(e),n)})),yr(t,e)}if(t.children.size>0){var r=H(e);return e=Y(e),t.children.has(r)&&yr(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function mr(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){mr(r,new z(e.toString()+"/"+t),n)}))}var br=function(){function t(){this.rootNode_=ae.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),_r=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,l.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,l.p$)(this.counters_)},t}(),wr={},Ir={};function Tr(t){var e=t.toString();return wr[e]||(wr[e]=new _r),wr[e]}var Er=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=a({},t);return this.last_&&U(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Sr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Er(t);var n=1e4+2e4*Math.random();W(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;U(e,(function(e,i){i>0&&(0,l.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),W(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Cr=function(){this.eventLists_=[],this.recursionDepth_=0};function kr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||it(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ar(t,e,n){kr(t,n),Dr(t,(function(t){return it(t,e)}))}function Nr(t,e,n){kr(t,n),Dr(t,(function(t){return ot(t,e)||ot(e,t)}))}function Dr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Pr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Pr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();T&&C("event: "+n.toString()),K(r)}}}var Rr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,l.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=c([],u(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,l.hu)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Or=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,l.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Rr),xr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,l.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,l.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Rr),Lr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&K((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Mr="start",Fr="close",jr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(t),this.stats_=Tr(e),this.urlFn=function(t){return pt(e,ht,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Lr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,l.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ur((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=u(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Mr)n.id=o,n.password=a;else{if(i!==Fr)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=u(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&ct.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,l.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,l.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,l.h$)(e),r=j(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,l.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,l.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ur=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,l.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){C("frame writing exception"),t.stack&&C(t.stack),C(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;(0,l.Yr)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),qr="";function Vr(t){qr=t}var Br=null;"undefined"!=typeof MozWebSocket?Br=MozWebSocket:"undefined"!=typeof WebSocket&&(Br=WebSocket);var Kr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=Tr(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!(0,l.Yr)()&&"undefined"!=typeof location&&location.hostname&&ct.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),pt(t,lt,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,y.set("previous_websocket_failure",!0);try{if((0,l.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+qr+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new Br(this.connURL,[],i)}else i={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Br(this.connURL,[],i)}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Br&&!t.forceDisallow_},t.previouslyFailed=function(){return y.isInMemoryStorage||!0===y.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){y.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,l.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,l.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,l.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=j(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Wr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[jr,Kr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Kr&&Kr.isAvailable(),o=i&&!Kr.previouslyFailed();if(e.webSocketOnly&&(i||D("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Kr];else{var a=this.transports_=[];try{for(var u=s(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),zr=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new Wr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=W((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=M("t",t),n=M("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=M("t",t),n=M("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=M("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?A("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):A("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&D("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),W((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):W((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(y.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Gr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Hr=1e3,Qr=function(t){function e(n,r,i,o,a,s,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=k("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=Hr,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!(0,l.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Or.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&xr.getInstance().on("online",c.onOnline_,c),c}return o(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_((0,l.Pz)(i)),(0,l.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new l.BH,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,l.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,l.hu)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,l.r3)(t,"w")){var n=(0,l.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();D("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,l.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,l.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),(0,l.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,l.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):A("Unrecognized action received from server: "+(0,l.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,l.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Hr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,s=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())};this.realtime_={close:h,sendRequest:function(t){(0,l.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,c=new zr(o,a.repoInfo_,a.applicationId_,n,r,i,(function(t){D(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),s))})).then(null,(function(e){a.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&D(e),h())}))}},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,l.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return F(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new z(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=s(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s(a.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,l.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+qr.replace(/\./g,"-")]=1,(0,l.uI)()?t["framework.cordova"]=1:(0,l.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=xr.getInstance().currentlyOnline();return(0,l.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Gr),Yr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=k("p:rest:"),i.listens_={},i}return o(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,l.hu)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=Cn(t.getQueryParams());this.restRequest_(a+".json",c,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),(0,l.DV)(o.listens_,s)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Cn(t.getQueryParams()),r=t.path.toString(),i=new l.BH;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,l.xO)(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=(0,l.cI)(s.responseText)}catch(t){D("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&D("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},e}(Gr),Xr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return(0,l.Dv)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return(0,l.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return(0,l.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return(0,l.Dv)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){(0,l.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Lt("DataSnapshot.child",1,e,!1);var n=new z(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Yt)},t.prototype.hasChild=function(t){(0,l.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Lt("DataSnapshot.hasChild",1,t,!1);var e=new z(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return(0,l.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if((0,l.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,l.Wj)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Yt))}))},t.prototype.hasChildren=function(){return(0,l.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,l.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return(0,l.Dv)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),$r=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Jr(t,e){for(var n=e instanceof z?e:new z(e),r=t,i=H(n);null!==i;){var o=(0,l.DV)(r.node.children,i)||{children:{},childCount:0};r=new $r(i,r,o),i=H(n=Y(n))}return r}function Zr(t){return t.node.value}function ti(t,e){t.node.value=e,oi(t)}function ei(t){return t.node.childCount>0}function ni(t,e){U(t.node.children,(function(n,r){e(new $r(n,t,r))}))}function ri(t,e,n,r){n&&!r&&e(t),ni(t,(function(t){ri(t,e,!0,r)})),n&&r&&e(t)}function ii(t){return new z(null===t.parent?t.name:ii(t.parent)+"/"+t.name)}function oi(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Zr(t)&&!ei(t)}(n),i=(0,l.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,oi(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,oi(t))}(t.parent,t.name,t)}var ai="repo_interrupt",si=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Cr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vr(),this.transactionQueueTree_=new $r,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ui(t){var e=t.infoData_.getNode(new z(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ci(t){return(e=(e={timestamp:ui(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function li(t,e,n,r,i){t.dataUpdateCount++;var o=new z(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var s=(0,l.UI)(n,(function(t){return ue(t)}));a=function(t,e,n,r){var i=rr(t,r);if(i){var o=ir(i),a=o.path,s=o.queryId,u=nt(a,e),c=fe.fromObject(n);return or(t,a,new ve(ce(s),u,c))}return[]}(t.serverSyncTree_,o,s,i)}else{var u=ue(n);a=function(t,e,n,r){var i=rr(t,r);if(null!=i){var o=ir(i),a=o.path,s=o.queryId,u=nt(a,e);return or(t,a,new de(ce(s),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var c=(0,l.UI)(n,(function(t){return ue(t)}));a=function(t,e,n){var r=fe.fromObject(n);return $n(t,new ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{var h=ue(n);a=Hn(t.serverSyncTree_,o,h)}var f=o;a.length>0&&(f=Di(t,o)),Nr(t.eventQueue_,f,a)}function hi(t,e){fi(t,"connected",e),!1===e&&function(t){Ei(t,"onDisconnectEvents");var e=ci(t),n=vr();mr(t.onDisconnect_,G(),(function(r,i){var o=fr(r,i,t.serverSyncTree_,e);gr(n,r,o)}));var r=[];mr(n,G(),(function(e,n){r=r.concat(Hn(t.serverSyncTree_,e,n));var i=Li(t,e);Di(t,i)})),t.onDisconnect_=vr(),Nr(t.eventQueue_,G(),r)}(t)}function fi(t,e,n){var r=new z("/.info/"+e),i=ue(n);t.infoData_.updateSnapshot(r,i);var o=Hn(t.infoSyncTree_,r,i);Nr(t.eventQueue_,r,o)}function pi(t){return t.nextWriteId_++}function di(t,e,n,r,i){Ei(t,"set",{path:e.toString(),value:n,priority:r});var o=ci(t),a=ue(n,r),s=Xn(t.serverSyncTree_,e),u=pr(a,s,o),c=pi(t),l=zn(t.serverSyncTree_,e,u,c,!0);kr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||D("set at "+e+" failed: "+n);var a=Gn(t.serverSyncTree_,c,!o);Nr(t.eventQueue_,e,a),Si(0,i,n,r)}));var h=Li(t,e);Di(t,h),Nr(t.eventQueue_,h,[])}function vi(t,e,n,r){Ei(t,"update",{path:e.toString(),value:n});var i=!0,o=ci(t),a={};if(U(n,(function(n,r){i=!1,a[n]=fr(tt(e,n),ue(r),t.serverSyncTree_,o)})),i)C("update() called with empty data.  Don't do anything."),Si(0,r,"ok",void 0);else{var s=pi(t),u=function(t,e,n,r){!function(t,e,n,r){(0,l.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=De(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=fe.fromObject(n);return $n(t,new ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,s);kr(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||D("update at "+e+" failed: "+n);var a=Gn(t.serverSyncTree_,s,!o),u=a.length>0?Di(t,e):e;Nr(t.eventQueue_,u,a),Si(0,r,n,i)})),U(n,(function(n){var r=Li(t,tt(e,n));Di(t,r)})),Nr(t.eventQueue_,e,[])}}function gi(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&yr(t.onDisconnect_,e),Si(0,n,r,i)}))}function yi(t,e,n,r){var i=ue(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&gr(t.onDisconnect_,e,i),Si(0,r,n,o)}))}function mi(t,e,n,r,i){var o=ue(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&gr(t.onDisconnect_,e,o),Si(0,i,n,r)}))}function bi(t,e,n,r){if((0,l.xb)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void Si(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&U(n,(function(n,r){var i=ue(r);gr(t.onDisconnect_,tt(e,n),i)})),Si(0,r,i,o)}))}function _i(t,e,n){var r;r=".info"===H(e.path)?Yn(t.infoSyncTree_,e,n):Yn(t.serverSyncTree_,e,n),Ar(t.eventQueue_,e.path,r)}function wi(t,e,n){var r;r=".info"===H(e.path)?Qn(t.infoSyncTree_,e,n):Qn(t.serverSyncTree_,e,n),Ar(t.eventQueue_,e.path,r)}function Ii(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ai)}function Ti(t){t.persistentConnection_&&t.persistentConnection_.resume(ai)}function Ei(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,c([r],u(e)))}function Si(t,e,n,r){e&&K((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Ci(t){return t.__database||(t.__database=new $i(t))}function ki(t,e,n,r,i){Ei(t,"transaction on "+e);var o=function(){},a=new zi(t,e);a.on("value",o);var s={path:e,update:n,onComplete:r,status:null,order:_(),applyLocally:i,retryCount:0,unwatcher:function(){a.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=Ai(t,e,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var h=new Xr(s.currentInputSnapshot,new zi(t,s.path),Yt);s.onComplete(null,!1,h)}}else{Dt("transaction failed: Data returned ",c,s.path),s.status=0;var f=Jr(t.transactionQueueTree_,e),p=Zr(f)||[];p.push(s),ti(f,p);var d=void 0;"object"==typeof c&&null!==c&&(0,l.r3)(c,".priority")?(d=(0,l.DV)(c,".priority"),(0,l.hu)(At(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Xn(t.serverSyncTree_,e)||ae.EMPTY_NODE).getPriority().val();var v=ci(t),g=ue(c,d),y=pr(g,u,v);s.currentOutputSnapshotRaw=g,s.currentOutputSnapshotResolved=y,s.currentWriteId=pi(t);var m=zn(t.serverSyncTree_,e,y,s.currentWriteId,s.applyLocally);Nr(t.eventQueue_,e,m),Ni(t,t.transactionQueueTree_)}}function Ai(t,e,n){return Xn(t.serverSyncTree_,e,n)||ae.EMPTY_NODE}function Ni(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||xi(t,e),Zr(e)){var n=Ri(t,e);(0,l.hu)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=Ai(t,e,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];(0,l.hu)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=nt(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){Ei(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++){if(n[a].status=2,i=i.concat(Gn(t.serverSyncTree_,n[a].currentWriteId)),n[a].onComplete){var s=n[a].currentOutputSnapshotResolved,u=new zi(t,n[a].path),c=new Xr(s,u,Yt);o.push(n[a].onComplete.bind(null,null,!0,c))}n[a].unwatcher()}for(xi(t,Jr(t.transactionQueueTree_,e)),Ni(t,t.transactionQueueTree_),Nr(t.eventQueue_,e,i),a=0;a<o.length;a++)K(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else for(D("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;Di(t,e)}}),a)}(t,ii(e),n)}else ei(e)&&ni(e,(function(e){Ni(t,e)}))}function Di(t,e){var n=Pi(t,e),r=ii(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=0;a<e.length;a++){var s=e[a],u=nt(n,s.path),c=!1,h=void 0;if((0,l.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)c=!0,h=s.abortReason,i=i.concat(Gn(t.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)c=!0,h="maxretry",i=i.concat(Gn(t.serverSyncTree_,s.currentWriteId,!0));else{var f=Ai(t,s.path,o);s.currentInputSnapshot=f;var p=e[a].update(f.val());if(void 0!==p){Dt("transaction failed: Data returned ",p,s.path);var d=ue(p);"object"==typeof p&&null!=p&&(0,l.r3)(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=s.currentWriteId,g=ci(t),y=pr(d,f,g);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=pi(t),o.splice(o.indexOf(v),1),i=(i=i.concat(zn(t.serverSyncTree_,s.path,y,s.currentWriteId,s.applyLocally))).concat(Gn(t.serverSyncTree_,v,!0))}else c=!0,h="nodata",i=i.concat(Gn(t.serverSyncTree_,s.currentWriteId,!0))}if(Nr(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,w=e[a].unwatcher,setTimeout(w,Math.floor(0)),e[a].onComplete))if("nodata"===h){var m=new zi(t,e[a].path),b=e[a].currentInputSnapshot,_=new Xr(b,m,Yt);r.push(e[a].onComplete.bind(null,null,!1,_))}else r.push(e[a].onComplete.bind(null,new Error(h),!1,null))}var w;for(xi(t,t.transactionQueueTree_),a=0;a<r.length;a++)K(r[a]);Ni(t,t.transactionQueueTree_)}}(t,Ri(t,n),r),r}function Pi(t,e){var n,r=t.transactionQueueTree_;for(n=H(e);null!==n&&void 0===Zr(r);)r=Jr(r,n),n=H(e=Y(e));return r}function Ri(t,e){var n=[];return Oi(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Oi(t,e,n){var r=Zr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);ni(e,(function(e){Oi(t,e,n)}))}function xi(t,e){var n=Zr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ti(e,n.length>0?n:void 0)}ni(e,(function(e){xi(t,e)}))}function Li(t,e){var n=ii(Pi(t,e)),r=Jr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){Mi(t,e)})),Mi(t,r),ri(r,(function(e){Mi(t,e)})),n}function Mi(t,e){var n=Zr(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,l.hu)(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):((0,l.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Gn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?ti(e,void 0):n.length=o+1,Nr(t.eventQueue_,ii(e),i),a=0;a<r.length;a++)K(r[a])}}var Fi,ji=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){(0,l.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,l.Wj)("OnDisconnect.cancel",1,t,!0);var e=new l.BH;return gi(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){(0,l.Dv)("OnDisconnect.remove",0,1,arguments.length),Ft("OnDisconnect.remove",this.path_),(0,l.Wj)("OnDisconnect.remove",1,t,!0);var e=new l.BH;return yi(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){(0,l.Dv)("OnDisconnect.set",1,2,arguments.length),Ft("OnDisconnect.set",this.path_),Nt("OnDisconnect.set",1,t,this.path_,!1),(0,l.Wj)("OnDisconnect.set",2,e,!0);var n=new l.BH;return yi(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){(0,l.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),Ft("OnDisconnect.setWithPriority",this.path_),Nt("OnDisconnect.setWithPriority",1,t,this.path_,!1),Rt("OnDisconnect.setWithPriority",2,e,!1),(0,l.Wj)("OnDisconnect.setWithPriority",3,n,!0);var r=new l.BH;return mi(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if((0,l.Dv)("OnDisconnect.update",1,2,arguments.length),Ft("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,D("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pt("OnDisconnect.update",1,t,this.path_,!1),(0,l.Wj)("OnDisconnect.update",2,e,!0);var i=new l.BH;return bi(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ui=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,l.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),qi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,l.Pz)(this.snapshot.exportVal())},t}(),Vi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Bi=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new qi("value",this,new Xr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,l.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Vi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Ki=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,(0,l.r3)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Vi(this,t,e):null},t.prototype.createEvent=function(t,e){(0,l.hu)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new qi(t.type,this,new Xr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,l.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Wi=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,l.hu)(Fi,"Reference.ts has not been loaded"),Fi},set:function(t){Fi=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===$t){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==R)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Yt){if(null!=e&&!At(e)||null!=n&&!At(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,l.hu)(t.getIndex()instanceof vn||t.getIndex()===dn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return(0,l.Dv)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){(0,l.Dv)("Query.on",2,4,arguments.length),Ot("Query.on",1,e,!1),(0,l.Wj)("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Bi(t,e||null,n||null);_i(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Ki(t,e,n);_i(this.repo,this,r)},t.prototype.off=function(t,e,n){(0,l.Dv)("Query.off",0,3,arguments.length),Ot("Query.off",1,t,!0),(0,l.Wj)("Query.off",2,e,!0),(0,l.lb)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Bi(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Ki(i,null,n||null));wi(this.repo,this,r)},t.prototype.get=function(){return t=this.repo,e=this,null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=nt(t,n);r=r||jn(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||jn(i,G()):(i=new xn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new ge(r,!0,!1):null;return _e(Mn(i,e,Ue(t.pendingWriteTree_,e.path),o?a.getNode():ae.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e))?Promise.resolve(new Xr(n,e.getRef(),e.getQueryParams().getIndex())):t.server_.get(e).then((function(n){var r=ue(n),i=Hn(t.serverSyncTree_,e.path,r);return Ar(t.eventQueue_,e.path,i),Promise.resolve(new Xr(r,e.getRef(),e.getQueryParams().getIndex()))}),(function(n){return Ei(t,"get for query "+(0,l.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))}));var t,e,n},t.prototype.once=function(e,n,r,i){var o=this;(0,l.Dv)("Query.once",1,4,arguments.length),Ot("Query.once",1,e,!1),(0,l.Wj)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new l.BH;u.promise.catch((function(){}));var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if((0,l.Dv)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,bn(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if((0,l.Dv)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,_n(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if((0,l.Dv)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Lt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new z(e);if(et(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new vn(n),i=Sn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){(0,l.Dv)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Sn(this.queryParams_,$t);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){(0,l.Dv)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Sn(this.queryParams_,Yt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){(0,l.Dv)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Sn(this.queryParams_,dn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),(0,l.Dv)("Query.startAt",0,2,arguments.length),Nt("Query.startAt",1,e,this.path,!0),xt("Query.startAt",2,n,!0);var r=wn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),(0,l.Dv)("Query.startAfter",0,2,arguments.length),Nt("Query.startAfter",1,e,this.path,!1),xt("Query.startAfter",2,n,!0);var r=In(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),(0,l.Dv)("Query.endAt",0,2,arguments.length),Nt("Query.endAt",1,e,this.path,!0),xt("Query.endAt",2,n,!0);var r=Tn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),(0,l.Dv)("Query.endBefore",0,2,arguments.length),Nt("Query.endBefore",1,e,this.path,!1),xt("Query.endBefore",2,n,!0);var r=En(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if((0,l.Dv)("Query.equalTo",1,2,arguments.length),Nt("Query.equalTo",1,t,this.path,!1),xt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return(0,l.Dv)("Query.toString",0,0,arguments.length),this.repo.toString()+$(this.path)},t.prototype.toJSON=function(){return(0,l.Dv)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=F(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if((0,l.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=it(this.path,e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,(0,l.Wj)(t,3,r.cancel,!0),r.context=n,(0,l.lb)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,l.gK)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),zi=function(t){function e(e,n){if(!(e instanceof si))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new mn,!1)||this}return o(e,t),e.prototype.getKey=function(){return(0,l.Dv)("Reference.key",0,0,arguments.length),et(this.path)?null:X(this.path)},e.prototype.child=function(t){return(0,l.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof z||(null===H(this.path)?Mt("Reference.child",1,t,!1):Lt("Reference.child",1,t,!1)),new e(this.repo,tt(this.path,t))},e.prototype.getParent=function(){(0,l.Dv)("Reference.parent",0,0,arguments.length);var t=Z(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){(0,l.Dv)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return Ci(this.repo)},e.prototype.set=function(t,e){(0,l.Dv)("Reference.set",1,2,arguments.length),Ft("Reference.set",this.path),Nt("Reference.set",1,t,this.path,!1),(0,l.Wj)("Reference.set",2,e,!0);var n=new l.BH;return di(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if((0,l.Dv)("Reference.update",1,2,arguments.length),Ft("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,D("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pt("Reference.update",1,t,this.path,!1),(0,l.Wj)("Reference.update",2,e,!0);var i=new l.BH;return vi(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if((0,l.Dv)("Reference.setWithPriority",2,3,arguments.length),Ft("Reference.setWithPriority",this.path),Nt("Reference.setWithPriority",1,t,this.path,!1),Rt("Reference.setWithPriority",2,e,!1),(0,l.Wj)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new l.BH;return di(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return(0,l.Dv)("Reference.remove",0,1,arguments.length),Ft("Reference.remove",this.path),(0,l.Wj)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if((0,l.Dv)("Reference.transaction",1,3,arguments.length),Ft("Reference.transaction",this.path),(0,l.Wj)("Reference.transaction",1,t,!1),(0,l.Wj)("Reference.transaction",2,e,!0),Ut("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new l.BH;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Ui(n,i)),"function"==typeof e&&e(t,n,i)};return ki(this.repo,this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){(0,l.Dv)("Reference.setPriority",1,2,arguments.length),Ft("Reference.setPriority",this.path),Rt("Reference.setPriority",1,t,!1),(0,l.Wj)("Reference.setPriority",2,e,!0);var n=new l.BH;return di(this.repo,tt(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){(0,l.Dv)("Reference.push",0,2,arguments.length),Ft("Reference.push",this.path),Nt("Reference.push",1,t,this.path,!0),(0,l.Wj)("Reference.push",2,e,!0);var n,r=ui(this.repo),i=hn(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Ft("Reference.onDisconnect",this.path),new ji(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Wi);Wi.__referenceConstructor=zi,function(t){(0,l.hu)(!kn,"__referenceConstructor has already been defined"),kn=t}(zi);var Gi=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',D(t)},t}(),Hi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Qi={},Yi=!1;function Xi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||N("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=wt(i,r),s=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+s.namespace,s=(a=wt(i,r)).repoInfo):o=!a.repoInfo.secure;var c=r&&o?new Hi:new Gi(t,e);return jt("Invalid Firebase Database URL",1,a),et(a.path)||N("Database URL must point to the root of a Firebase Database (not including a child path)."),Ci(function(t,e,n){var r=(0,l.DV)(Qi,e.name);r||(r={},Qi[e.name]=r);var i=(0,l.DV)(r,t.toURLString());return i&&N("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new si(t,Yi,e,n),r[t.toURLString()]=i,i}(s,t,c))}var $i=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return t=e,n=void 0,i=function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=(0,l.DV)(Qi,e.app.name))&&(0,l.DV)(n,e.key)===e||N("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),Ii(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]}))},new((r=void 0)||(r=Promise))((function(e,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}u((i=i.apply(t,n||[])).next())}));var t,n,r,i}},t instanceof si||N("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=Tr(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Yr(t.repoInfo_,(function(e,n,r,i){li(t,e,n,r,i)}),t.authTokenProvider_),setTimeout((function(){return hi(t,!0)}),0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,l.Pz)(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Qr(t.repoInfo_,t.app.options.appId,(function(e,n,r,i){li(t,e,n,r,i)}),(function(e){hi(t,e)}),(function(e){!function(t,e){U(e,(function(e,n){fi(t,e,n)}))}(t,e)}),t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.statsReporter_=(n=function(){return new Sr(t.stats_,t.server_)},r=t.repoInfo_.toString(),Ir[r]||(Ir[r]=n()),Ir[r]),t.infoData_=new br,t.infoSyncTree_=new Wn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e.path);return a.isEmpty()||(o=Hn(t.infoSyncTree_,e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),fi(t,"connected",!1),t.serverSyncTree_=new Wn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Nr(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new zi(this.repo_,G())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?N("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new ft(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Hi)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),(0,l.Dv)("database.ref",0,1,arguments.length),t instanceof zi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),(0,l.Dv)(e,1,1,arguments.length);var n=wt(t,this.repo_.repoInfo_.nodeAdmin);jt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||N(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&N("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){(0,l.Dv)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),Ii(this.repo_)},t.prototype.goOnline=function(){(0,l.Dv)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),Ti(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Ji=Object.freeze({__proto__:null,forceLongPolling:function(){Kr.forceDisallow(),jr.forceAllow()},forceWebSockets:function(){jr.forceDisallow()},isWebSocketsAvailable:function(){return Kr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Er(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);U(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n;t.stats_.incrementCounter(e),n=e,t.statsReporter_.statsToReport_[n]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;Vr(r);var u=new f.zt("auth-internal",new f.H0("database-standalone"));return u.setComponent(new f.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:Xi(e,u,n,s),namespace:o}}}),Zi=Qr;Qr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Qr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var to=zr,eo=ft,no=Object.freeze({__proto__:null,DataConnection:Zi,RealTimeConnection:to,hijackHash:function(t){var e=Qr.prototype.put;return Qr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Qr.prototype.put=e}},ConnectionTarget:eo,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Yi=t}(t)}}),ro=$i.ServerValue;!function(e){Vr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new f.wA("database",(function(t,e){var n=e.instanceIdentifier;return Xi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)}),"PUBLIC").setServiceProps({Reference:zi,Query:Wi,Database:$i,DataSnapshot:Xr,enableLogging:S,INTERNAL:Ji,ServerValue:ro,TEST_ACCESS:no}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.6"),(0,l.Yr)()&&(t.exports=n)}(r.Z)},594:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>p});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},448:(t,e,n)=>{"use strict";n.d(e,{BH:()=>f,LL:()=>k,ZR:()=>C,gQ:()=>q,zI:()=>S,hu:()=>i,g5:()=>o,US:()=>s,h$:()=>u,$s:()=>X,r3:()=>L,ne:()=>V,p$:()=>l,ZB:()=>h,gK:()=>z,z$:()=>p,GJ:()=>x,jU:()=>g,ru:()=>y,d:()=>b,xb:()=>F,w1:()=>_,hl:()=>T,uI:()=>d,UG:()=>v,Yr:()=>I,b$:()=>m,Mn:()=>w,w9:()=>O,cI:()=>D,UI:()=>j,xO:()=>U,DV:()=>M,ug:()=>Y,dS:()=>Q,Pz:()=>P,Dv:()=>W,Wj:()=>G,lb:()=>H,eu:()=>E});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};Object.create,Object.create;var i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function v(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function _(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return p().indexOf("MSAppHost/")>=0}function I(){return!1}function T(){return"indexedDB"in self&&null!=indexedDB}function E(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function S(){return!(!navigator||!navigator.cookieEnabled)}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,k.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),k=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?A(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new C(i,s,r);return u},t}();function A(t,e){return t.replace(N,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var N=/\{\$([^}]+)}/g;function D(t){return JSON.parse(t)}function P(t){return JSON.stringify(t)}var R=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=D(c(o[0])||""),n=D(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},O=function(t){var e=R(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},x=function(t){var e=R(t).claims;return"object"==typeof e&&!0===e.admin};function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var q=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function V(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=K),void 0===r.error&&(r.error=K),void 0===r.complete&&(r.complete=K);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function K(){}var W=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function G(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e,r)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Y=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function X(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,c=128,l=1/0,h=9007199254740991,f=NaN,p=4294967295,d=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],v="[object Arguments]",g="[object Array]",y="[object Boolean]",m="[object Date]",b="[object Error]",_="[object Function]",w="[object GeneratorFunction]",I="[object Map]",T="[object Number]",E="[object Object]",S="[object Promise]",C="[object RegExp]",k="[object Set]",A="[object String]",N="[object Symbol]",D="[object WeakMap]",P="[object ArrayBuffer]",R="[object DataView]",O="[object Float32Array]",x="[object Float64Array]",L="[object Int8Array]",M="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",U="[object Uint8ClampedArray]",q="[object Uint16Array]",V="[object Uint32Array]",B=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,H=RegExp(z.source),Q=RegExp(G.source),Y=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",It="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="["+Et+"]",Ct="["+wt+"]",kt="\\d+",At="["+It+"]",Nt="[^\\ud800-\\udfff"+Et+kt+"\\u2700-\\u27bf"+It+Tt+"]",Dt="\\ud83c[\\udffb-\\udfff]",Pt="[^\\ud800-\\udfff]",Rt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",xt="["+Tt+"]",Lt="(?:"+At+"|"+Nt+")",Mt="(?:"+xt+"|"+Nt+")",Ft="(?:['’](?:d|ll|m|re|s|t|ve))?",jt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ut="(?:"+Ct+"|"+Dt+")?",qt="[\\ufe0e\\ufe0f]?",Vt=qt+Ut+"(?:\\u200d(?:"+[Pt,Rt,Ot].join("|")+")"+qt+Ut+")*",Bt="(?:"+["[\\u2700-\\u27bf]",Rt,Ot].join("|")+")"+Vt,Kt="(?:"+[Pt+Ct+"?",Ct,Rt,Ot,"[\\ud800-\\udfff]"].join("|")+")",Wt=RegExp("['’]","g"),zt=RegExp(Ct,"g"),Gt=RegExp(Dt+"(?="+Dt+")|"+Kt+Vt,"g"),Ht=RegExp([xt+"?"+At+"+"+Ft+"(?="+[St,xt,"$"].join("|")+")",Mt+"+"+jt+"(?="+[St,xt+Lt,"$"].join("|")+")",xt+"?"+Lt+"+"+Ft,xt+"+"+jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt,Bt].join("|"),"g"),Qt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Yt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$t=-1,Jt={};Jt[O]=Jt[x]=Jt[L]=Jt[M]=Jt[F]=Jt[j]=Jt[U]=Jt[q]=Jt[V]=!0,Jt[v]=Jt[g]=Jt[P]=Jt[y]=Jt[R]=Jt[m]=Jt[b]=Jt[_]=Jt[I]=Jt[T]=Jt[E]=Jt[C]=Jt[k]=Jt[A]=Jt[D]=!1;var Zt={};Zt[v]=Zt[g]=Zt[P]=Zt[R]=Zt[y]=Zt[m]=Zt[O]=Zt[x]=Zt[L]=Zt[M]=Zt[F]=Zt[I]=Zt[T]=Zt[E]=Zt[C]=Zt[k]=Zt[A]=Zt[N]=Zt[j]=Zt[U]=Zt[q]=Zt[V]=!0,Zt[b]=Zt[_]=Zt[D]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),ae=e&&!e.nodeType&&e,se=ae&&t&&!t.nodeType&&t,ue=se&&se.exports===ae,ce=ue&&re.process,le=function(){try{return se&&se.require&&se.require("util").types||ce&&ce.binding&&ce.binding("util")}catch(t){}}(),he=le&&le.isArrayBuffer,fe=le&&le.isDate,pe=le&&le.isMap,de=le&&le.isRegExp,ve=le&&le.isSet,ge=le&&le.isTypedArray;function ye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function me(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function _e(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ie(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Te(t,e){return!(null==t||!t.length)&&Oe(t,e,0)>-1}function Ee(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Se(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ke(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ae(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ne(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var De=Fe("length");function Pe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Re(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Oe(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Re(t,Le,n)}function xe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Le(t){return t!=t}function Me(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:f}function Fe(t){return function(e){return null==e?i:e[t]}}function je(t){return function(e){return null==t?i:t[e]}}function Ue(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function qe(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Ve(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Be(t){return t?t.slice(0,sn(t)+1).replace(rt,""):t}function Ke(t){return function(e){return t(e)}}function We(t,e){return Se(e,(function(e){return t[e]}))}function ze(t,e){return t.has(e)}function Ge(t,e){for(var n=-1,r=t.length;++n<r&&Oe(e,t[n],0)>-1;);return n}function He(t,e){for(var n=t.length;n--&&Oe(e,t[n],0)>-1;);return n}function Qe(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ye=je({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Xe=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $e(t){return"\\"+te[t]}function Je(t){return Qt.test(t)}function Ze(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Je(t)?function(t){for(var e=Gt.lastIndex=0;Gt.test(t);)++e;return e}(t):De(t)}function an(t){return Je(t)?function(t){return t.match(Gt)||[]}(t):function(t){return t.split("")}(t)}function sn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var un=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function t(e){var n,r=(e=null==e?oe:cn.defaults(oe.Object(),e,cn.pick(oe,Xt))).Array,it=e.Date,wt=e.Error,It=e.Function,Tt=e.Math,Et=e.Object,St=e.RegExp,Ct=e.String,kt=e.TypeError,At=r.prototype,Nt=It.prototype,Dt=Et.prototype,Pt=e["__core-js_shared__"],Rt=Nt.toString,Ot=Dt.hasOwnProperty,xt=0,Lt=(n=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Mt=Dt.toString,Ft=Rt.call(Et),jt=oe._,Ut=St("^"+Rt.call(Ot).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=ue?e.Buffer:i,Vt=e.Symbol,Bt=e.Uint8Array,Kt=qt?qt.allocUnsafe:i,Gt=tn(Et.getPrototypeOf,Et),Qt=Et.create,te=Dt.propertyIsEnumerable,re=At.splice,ie=Vt?Vt.isConcatSpreadable:i,ae=Vt?Vt.iterator:i,se=Vt?Vt.toStringTag:i,ce=function(){try{var t=co(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),le=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,De=it&&it.now!==oe.Date.now&&it.now,je=e.setTimeout!==oe.setTimeout&&e.setTimeout,ln=Tt.ceil,hn=Tt.floor,fn=Et.getOwnPropertySymbols,pn=qt?qt.isBuffer:i,dn=e.isFinite,vn=At.join,gn=tn(Et.keys,Et),yn=Tt.max,mn=Tt.min,bn=it.now,_n=e.parseInt,wn=Tt.random,In=At.reverse,Tn=co(e,"DataView"),En=co(e,"Map"),Sn=co(e,"Promise"),Cn=co(e,"Set"),kn=co(e,"WeakMap"),An=co(Et,"create"),Nn=kn&&new kn,Dn={},Pn=Uo(Tn),Rn=Uo(En),On=Uo(Sn),xn=Uo(Cn),Ln=Uo(kn),Mn=Vt?Vt.prototype:i,Fn=Mn?Mn.valueOf:i,jn=Mn?Mn.toString:i;function Un(t){if(ns(t)&&!za(t)&&!(t instanceof Kn)){if(t instanceof Bn)return t;if(Ot.call(t,"__wrapped__"))return qo(t)}return new Bn(t)}var qn=function(){function t(){}return function(e){if(!es(e))return{};if(Qt)return Qt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Vn(){}function Bn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Kn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function Qn(t){var e=this.__data__=new zn(t);this.size=e.size}function Yn(t,e){var n=za(t),r=!n&&Wa(t),i=!n&&!r&&Ya(t),o=!n&&!r&&!i&&ls(t),a=n||r||i||o,s=a?Ve(t.length,Ct):[],u=s.length;for(var c in t)!e&&!Ot.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yo(c,u))||s.push(c);return s}function Xn(t){var e=t.length;return e?t[Gr(0,e-1)]:i}function $n(t,e){return xo(ki(t),ar(e,0,t.length))}function Jn(t){return xo(ki(t))}function Zn(t,e,n){(n!==i&&!Va(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Ot.call(t,e)&&Va(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Va(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&Ai(e,Rs(e),t)}function ir(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:ks(t,e[n]);return a}function ar(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function sr(t,e,n,r,o,a){var s,u=1&e,c=2&e,l=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!es(t))return t;var h=za(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return ki(t,s)}else{var f=fo(t),p=f==_||f==w;if(Ya(t))return wi(t,u);if(f==E||f==v||p&&!o){if(s=c||p?{}:vo(t),!u)return c?function(t,e){return Ai(t,ho(t),e)}(t,function(t,e){return t&&Ai(e,Os(e),t)}(s,t)):function(t,e){return Ai(t,lo(t),e)}(t,rr(s,t))}else{if(!Zt[f])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case P:return Ii(t);case y:case m:return new i(+t);case R:return function(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case x:case L:case M:case F:case j:case U:case q:case V:return Ti(t,n);case I:return new i;case T:case A:return new i(t);case C:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case k:return new i;case N:return r=t,Fn?Et(Fn.call(r)):{}}}(t,f,u)}}a||(a=new Qn);var d=a.get(t);if(d)return d;a.set(t,s),ss(t)?t.forEach((function(r){s.add(sr(r,e,n,r,t,a))})):rs(t)&&t.forEach((function(r,i){s.set(i,sr(r,e,n,i,t,a))}));var g=h?i:(l?c?no:eo:c?Os:Rs)(t);return be(g||t,(function(r,i){g&&(r=t[i=r]),tr(s,i,sr(r,e,n,i,t,a))})),s}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=Et(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new kt(o);return Do((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,o=Te,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=Se(e,Ke(n))),r?(o=Ee,a=!1):e.length>=200&&(o=ze,a=!1,e=new Hn(e));t:for(;++i<s;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}Un.templateSettings={escape:Y,evaluate:X,interpolate:$,variable:"",imports:{_:Un}},Un.prototype=Vn.prototype,Un.prototype.constructor=Un,Bn.prototype=qn(Vn.prototype),Bn.prototype.constructor=Bn,Kn.prototype=qn(Vn.prototype),Kn.prototype.constructor=Kn,Wn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===a?i:n}return Ot.call(e,t)?e[t]:i},Wn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==i:Ot.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===i?a:e,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},zn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},zn.prototype.has=function(t){return er(this.__data__,t)>-1},zn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(En||zn),string:new Wn}},Gn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return so(this,t).get(t)},Gn.prototype.has=function(t){return so(this,t).has(t)},Gn.prototype.set=function(t,e){var n=so(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Hn.prototype.add=Hn.prototype.push=function(t){return this.__data__.set(t,a),this},Hn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.clear=function(){this.__data__=new zn,this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Qn.prototype.get=function(t){return this.__data__.get(t)},Qn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(t,e),this.size=n.size,this};var hr=Pi(br),fr=Pi(_r,!0);function pr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s&&!cs(s):n(s,u)))var u=s,c=a}return c}function vr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=go),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?gr(s,e-1,n,r,i):Ce(i,s):r||(i[i.length]=s)}return i}var yr=Ri(),mr=Ri(!0);function br(t,e){return t&&yr(t,e,Rs)}function _r(t,e){return t&&mr(t,e,Rs)}function wr(t,e){return Ie(e,(function(e){return Ja(t[e])}))}function Ir(t,e){for(var n=0,r=(e=yi(e,t)).length;null!=t&&n<r;)t=t[jo(e[n++])];return n&&n==r?t:i}function Tr(t,e,n){var r=e(t);return za(t)?r:Ce(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":se&&se in Et(t)?function(t){var e=Ot.call(t,se),n=t[se];try{t[se]=i;var r=!0}catch(t){}var o=Mt.call(t);return r&&(e?t[se]=n:delete t[se]),o}(t):function(t){return Mt.call(t)}(t)}function Sr(t,e){return t>e}function Cr(t,e){return null!=t&&Ot.call(t,e)}function kr(t,e){return null!=t&&e in Et(t)}function Ar(t,e,n){for(var o=n?Ee:Te,a=t[0].length,s=t.length,u=s,c=r(s),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Se(f,Ke(e))),l=mn(f.length,l),c[u]=!n&&(e||a>=120&&f.length>=120)?new Hn(u&&f):i}f=t[0];var p=-1,d=c[0];t:for(;++p<a&&h.length<l;){var v=f[p],g=e?e(v):v;if(v=n||0!==v?v:0,!(d?ze(d,g):o(h,g,n))){for(u=s;--u;){var y=c[u];if(!(y?ze(y,g):o(t[u],g,n)))continue t}d&&d.push(g),h.push(v)}}return h}function Nr(t,e,n){var r=null==(t=Co(t,e=yi(e,t)))?t:t[jo($o(e))];return null==r?i:ye(r,t,n)}function Dr(t){return ns(t)&&Er(t)==v}function Pr(t,e,n,r,o){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=za(t),u=za(e),c=s?g:fo(t),l=u?g:fo(e),h=(c=c==v?E:c)==E,f=(l=l==v?E:l)==E,p=c==l;if(p&&Ya(t)){if(!Ya(e))return!1;s=!0,h=!1}if(p&&!h)return a||(a=new Qn),s||ls(t)?Zi(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!o(new Bt(t),new Bt(e)));case y:case m:case T:return Va(+t,+e);case b:return t.name==e.name&&t.message==e.message;case C:case A:return t==e+"";case I:var s=Ze;case k:var u=1&r;if(s||(s=nn),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=Zi(s(t),s(e),r,i,o,a);return a.delete(t),l;case N:if(Fn)return Fn.call(t)==Fn.call(e)}return!1}(t,e,c,n,r,o,a);if(!(1&n)){var d=h&&Ot.call(t,"__wrapped__"),_=f&&Ot.call(e,"__wrapped__");if(d||_){var w=d?t.value():t,S=_?e.value():e;return a||(a=new Qn),o(w,S,n,r,a)}}return!!p&&(a||(a=new Qn),function(t,e,n,r,o,a){var s=1&n,u=eo(t),c=u.length;if(c!=eo(e).length&&!s)return!1;for(var l=c;l--;){var h=u[l];if(!(s?h in e:Ot.call(e,h)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var d=!0;a.set(t,e),a.set(e,t);for(var v=s;++l<c;){var g=t[h=u[l]],y=e[h];if(r)var m=s?r(y,g,h,e,t,a):r(g,y,h,t,e,a);if(!(m===i?g===y||o(g,y,n,r,a):m)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,r,o,a))}(t,e,n,r,Pr,o))}function Rr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Et(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var c=(u=n[o])[0],l=t[c],h=u[1];if(s&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new Qn;if(r)var p=r(l,h,c,t,e,f);if(!(p===i?Pr(h,l,3,r,f):p))return!1}}return!0}function Or(t){return!(!es(t)||(e=t,Lt&&Lt in e))&&(Ja(t)?Ut:vt).test(Uo(t));var e}function xr(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?za(t)?Ur(t[0],t[1]):jr(t):pu(t)}function Lr(t){if(!Io(t))return gn(t);var e=[];for(var n in Et(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Mr(t,e){return t<e}function Fr(t,e){var n=-1,i=Ha(t)?r(t.length):[];return hr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function jr(t){var e=uo(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||Rr(n,t,e)}}function Ur(t,e){return bo(t)&&To(e)?Eo(jo(t),e):function(n){var r=ks(n,t);return r===i&&r===e?As(n,t):Pr(e,r,3)}}function qr(t,e,n,r,o){t!==e&&yr(e,(function(a,s){if(o||(o=new Qn),es(a))!function(t,e,n,r,o,a,s){var u=Ao(t,n),c=Ao(e,n),l=s.get(c);if(l)Zn(t,n,l);else{var h=a?a(u,c,n+"",t,e,s):i,f=h===i;if(f){var p=za(c),d=!p&&Ya(c),v=!p&&!d&&ls(c);h=c,p||d||v?za(u)?h=u:Qa(u)?h=ki(u):d?(f=!1,h=wi(c,!0)):v?(f=!1,h=Ti(c,!0)):h=[]:os(c)||Wa(c)?(h=u,Wa(u)?h=ms(u):es(u)&&!Ja(u)||(h=vo(c))):f=!1}f&&(s.set(c,h),o(h,c,r,a,s),s.delete(c)),Zn(t,n,h)}}(t,e,s,n,qr,r,o);else{var u=r?r(Ao(t,s),a,s+"",t,e,o):i;u===i&&(u=a),Zn(t,s,u)}}),Os)}function Vr(t,e){var n=t.length;if(n)return yo(e+=e<0?n:0,n)?t[e]:i}function Br(t,e,n){e=e.length?Se(e,(function(t){return za(t)?function(e){return Ir(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;return e=Se(e,Ke(ao())),function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ei(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(Fr(t,(function(t,n,i){return{criteria:Se(e,(function(e){return e(t)})),index:++r,value:t}})))}function Kr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Ir(t,a);n(s,a)&&$r(o,yi(a,t),s)}return o}function Wr(t,e,n,r){var i=r?xe:Oe,o=-1,a=e.length,s=t;for(t===e&&(e=ki(e)),n&&(s=Se(t,Ke(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&re.call(s,u,1),re.call(t,u,1);return t}function zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;yo(i)?re.call(t,i,1):ci(t,i)}}return t}function Gr(t,e){return t+hn(wn()*(e-t+1))}function Hr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Qr(t,e){return Po(So(t,e,iu),t+"")}function Yr(t){return Xn(Vs(t))}function Xr(t,e){var n=Vs(t);return xo(n,ar(e,0,n.length))}function $r(t,e,n,r){if(!es(t))return t;for(var o=-1,a=(e=yi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var c=jo(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=es(h)?h:yo(e[o+1])?[]:{})}tr(u,c,l),u=u[c]}return t}var Jr=Nn?function(t,e){return Nn.set(t,e),t}:iu,Zr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ti(t){return xo(Vs(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!cs(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ii(t,e,iu,n)}function ii(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,c=cs(e),l=e===i;o<a;){var h=hn((o+a)/2),f=n(t[h]),p=f!==i,d=null===f,v=f==f,g=cs(f);if(s)var y=r||v;else y=l?v&&(r||p):u?v&&p&&(r||!d):c?v&&p&&!d&&(r||!g):!d&&!g&&(r?f<=e:f<e);y?o=h+1:a=h}return mn(a,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Va(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ai(t){return"number"==typeof t?t:cs(t)?f:+t}function si(t){if("string"==typeof t)return t;if(za(t))return Se(t,si)+"";if(cs(t))return jn?jn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=Te,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Ee;else if(o>=200){var c=e?null:Hi(t);if(c)return nn(c);a=!1,i=ze,u=new Hn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function ci(t,e){return null==(t=Co(t,e=yi(e,t)))||delete t[jo($o(e))]}function li(t,e,n,r){return $r(t,e,n(Ir(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Kn&&(n=n.value()),ke(e,(function(t,e){return e.func.apply(e.thisArg,Ce([t],e.args))}),n)}function pi(t,e,n){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=lr(a[o]||s,t[u],e,n));return ui(gr(a,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var u=r<a?e[r]:i;n(s,t[r],u)}return s}function vi(t){return Qa(t)?t:[]}function gi(t){return"function"==typeof t?t:iu}function yi(t,e){return za(t)?t:bo(t,e)?[t]:Fo(bs(t))}var mi=Qr;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var _i=le||function(t){return oe.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Kt?Kt(n):new t.constructor(n);return t.copy(r),r}function Ii(t){var e=new t.constructor(t.byteLength);return new Bt(e).set(new Bt(t)),e}function Ti(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ei(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=cs(t),s=e!==i,u=null===e,c=e==e,l=cs(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!l&&t<e||l&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function Si(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,c=e.length,l=yn(a-s,0),h=r(c+l),f=!i;++u<c;)h[u]=e[u];for(;++o<s;)(f||o<a)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}function Ci(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,c=-1,l=e.length,h=yn(a-u,0),f=r(h+l),p=!i;++o<h;)f[o]=t[o];for(var d=o;++c<l;)f[d+c]=e[c];for(;++s<u;)(p||o<a)&&(f[d+n[s]]=t[o++]);return f}function ki(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ai(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?ir(n,u,c):tr(n,u,c)}return n}function Ni(t,e){return function(n,r){var i=za(n)?me:nr,o=e?e():{};return i(n,t,ao(r,2),o)}}function Di(t){return Qr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&mo(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Et(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}function Pi(t,e){return function(n,r){if(null==n)return n;if(!Ha(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Et(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ri(t){return function(e,n,r){for(var i=-1,o=Et(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Oi(t){return function(e){var n=Je(e=bs(e))?an(e):i,r=n?n[0]:e.charAt(0),o=n?bi(n,1).join(""):e.slice(1);return r[t]()+o}}function xi(t){return function(e){return ke(Js(Ws(e).replace(Wt,"")),t,"")}}function Li(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=qn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function Mi(t){return function(e,n,r){var o=Et(e);if(!Ha(e)){var a=ao(n,3);e=Rs(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function Fi(t){return to((function(e){var n=e.length,r=n,a=Bn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new kt(o);if(a&&!u&&"wrapper"==io(s))var u=new Bn([],!0)}for(r=u?r:n;++r<n;){var c=io(s=e[r]),l="wrapper"==c?ro(s):i;u=l&&_o(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[io(l[0])].apply(u,l[3]):1==s.length&&_o(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&za(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function ji(t,e,n,o,a,s,u,l,h,f){var p=e&c,d=1&e,v=2&e,g=24&e,y=512&e,m=v?i:Li(t);return function i(){for(var c=arguments.length,b=r(c),_=c;_--;)b[_]=arguments[_];if(g)var w=oo(i),I=Qe(b,w);if(o&&(b=Si(b,o,a,g)),s&&(b=Ci(b,s,u,g)),c-=I,g&&c<f){var T=en(b,w);return zi(t,e,ji,i.placeholder,n,b,T,l,h,f-c)}var E=d?n:this,S=v?E[t]:t;return c=b.length,l?b=ko(b,l):y&&c>1&&b.reverse(),p&&h<c&&(b.length=h),this&&this!==oe&&this instanceof i&&(S=m||Li(S)),S.apply(E,b)}}function Ui(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function qi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=si(n),r=si(r)):(n=ai(n),r=ai(r)),o=t(n,r)}return o}}function Vi(t){return to((function(e){return e=Se(e,Ke(ao())),Qr((function(n){var r=this;return t(e,(function(t){return ye(t,r,n)}))}))}))}function Bi(t,e){var n=(e=e===i?" ":si(e)).length;if(n<2)return n?Hr(e,t):e;var r=Hr(e,ln(t/on(e)));return Je(e)?bi(an(r),0,t).join(""):r.slice(0,t)}function Ki(t){return function(e,n,o){return o&&"number"!=typeof o&&mo(e,n,o)&&(n=o=i),e=ds(e),n===i?(n=e,e=0):n=ds(n),function(t,e,n,i){for(var o=-1,a=yn(ln((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:ds(o),t)}}function Wi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ys(e),n=ys(n)),t(e,n)}}function zi(t,e,n,r,o,a,s,c,l,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?a:i,f?s:i,f?i:a,f?i:s,c,l,h],d=n.apply(i,p);return _o(t)&&No(d,p),d.placeholder=r,Ro(d,t,e)}function Gi(t){var e=Tt[t];return function(t,n){if(t=ys(t),(n=null==n?0:mn(vs(n),292))&&dn(t)){var r=(bs(t)+"e").split("e");return+((r=(bs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Hi=Cn&&1/nn(new Cn([,-0]))[1]==l?function(t){return new Cn(t)}:cu;function Qi(t){return function(e){var n=fo(e);return n==I?Ze(e):n==k?rn(e):function(t,e){return Se(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yi(t,e,n,a,l,h,f,p){var d=2&e;if(!d&&"function"!=typeof t)throw new kt(o);var v=a?a.length:0;if(v||(e&=-97,a=l=i),f=f===i?f:yn(vs(f),0),p=p===i?p:vs(p),v-=l?l.length:0,64&e){var g=a,y=l;a=l=i}var m=d?i:ro(t),b=[t,e,n,a,l,g,y,h,f,p];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Si(l,u,e[4]):u,t[4]=l?en(t[3],s):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Ci(l,u,e[6]):u,t[6]=l?en(t[5],s):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,m),t=b[0],e=b[1],n=b[2],a=b[3],l=b[4],!(p=b[9]=b[9]===i?d?0:t.length:yn(b[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var o=Li(t);return function a(){for(var s=arguments.length,u=r(s),c=s,l=oo(a);c--;)u[c]=arguments[c];var h=s<3&&u[0]!==l&&u[s-1]!==l?[]:en(u,l);return(s-=h.length)<n?zi(t,e,ji,a.placeholder,i,u,h,i,i,n-s):ye(this&&this!==oe&&this instanceof a?o:t,this,u)}}(t,e,p):e!=u&&33!=e||l.length?ji.apply(i,b):function(t,e,n,i){var o=1&e,a=Li(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==oe&&this instanceof e?a:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++s];return ye(f,o?n:this,h)}}(t,e,n,a);else var _=function(t,e,n){var r=1&e,i=Li(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ro((m?Jr:No)(_,b),t,e)}function Xi(t,e,n,r){return t===i||Va(t,Dt[n])&&!Ot.call(r,n)?e:t}function $i(t,e,n,r,o,a){return es(t)&&es(e)&&(a.set(e,t),qr(t,e,i,$i,a),a.delete(e)),t}function Ji(t){return os(t)?i:t}function Zi(t,e,n,r,o,a){var s=1&n,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t),h=a.get(e);if(l&&h)return l==e&&h==t;var f=-1,p=!0,d=2&n?new Hn:i;for(a.set(t,e),a.set(e,t);++f<u;){var v=t[f],g=e[f];if(r)var y=s?r(g,v,f,e,t,a):r(v,g,f,t,e,a);if(y!==i){if(y)continue;p=!1;break}if(d){if(!Ne(e,(function(t,e){if(!ze(d,e)&&(v===t||o(v,t,n,r,a)))return d.push(e)}))){p=!1;break}}else if(v!==g&&!o(v,g,n,r,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function to(t){return Po(So(t,i,Go),t+"")}function eo(t){return Tr(t,Rs,lo)}function no(t){return Tr(t,Os,ho)}var ro=Nn?function(t){return Nn.get(t)}:cu;function io(t){for(var e=t.name+"",n=Dn[e],r=Ot.call(Dn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(Ot.call(Un,"placeholder")?Un:t).placeholder}function ao(){var t=Un.iteratee||ou;return t=t===ou?xr:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function uo(t){for(var e=Rs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,To(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Or(n)?n:i}var lo=fn?function(t){return null==t?[]:(t=Et(t),Ie(fn(t),(function(e){return te.call(t,e)})))}:gu,ho=fn?function(t){for(var e=[];t;)Ce(e,lo(t)),t=Gt(t);return e}:gu,fo=Er;function po(t,e,n){for(var r=-1,i=(e=yi(e,t)).length,o=!1;++r<i;){var a=jo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ts(i)&&yo(a,i)&&(za(t)||Wa(t))}function vo(t){return"function"!=typeof t.constructor||Io(t)?{}:qn(Gt(t))}function go(t){return za(t)||Wa(t)||!!(ie&&t&&t[ie])}function yo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?Ha(n)&&yo(e,n.length):"string"==r&&e in n)&&Va(n[e],t)}function bo(t,e){if(za(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!cs(t))||Z.test(t)||!J.test(t)||null!=e&&t in Et(e)}function _o(t){var e=io(t),n=Un[e];if("function"!=typeof n||!(e in Kn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(Tn&&fo(new Tn(new ArrayBuffer(1)))!=R||En&&fo(new En)!=I||Sn&&fo(Sn.resolve())!=S||Cn&&fo(new Cn)!=k||kn&&fo(new kn)!=D)&&(fo=function(t){var e=Er(t),n=e==E?t.constructor:i,r=n?Uo(n):"";if(r)switch(r){case Pn:return R;case Rn:return I;case On:return S;case xn:return k;case Ln:return D}return e});var wo=Pt?Ja:yu;function Io(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function To(t){return t==t&&!es(t)}function Eo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Et(n))}}function So(t,e,n){return e=yn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=yn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),ye(t,this,u)}}function Co(t,e){return e.length<2?t:Ir(t,ei(e,0,-1))}function ko(t,e){for(var n=t.length,r=mn(e.length,n),o=ki(t);r--;){var a=e[r];t[r]=yo(a,n)?o[a]:i}return t}function Ao(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var No=Oo(Jr),Do=je||function(t,e){return oe.setTimeout(t,e)},Po=Oo(Zr);function Ro(t,e,n){var r=e+"";return Po(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return be(d,(function(n){var r="_."+n[0];e&n[1]&&!Te(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(r),n)))}function Oo(t){var e=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function xo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Gr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Lo,Mo,Fo=(Lo=La((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===Mo.size&&Mo.clear(),t})),Mo=Lo.cache,Lo);function jo(t){if("string"==typeof t||cs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Uo(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t){if(t instanceof Kn)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vo=Qr((function(t,e){return Qa(t)?lr(t,gr(e,1,Qa,!0)):[]})),Bo=Qr((function(t,e){var n=$o(e);return Qa(n)&&(n=i),Qa(t)?lr(t,gr(e,1,Qa,!0),ao(n,2)):[]})),Ko=Qr((function(t,e){var n=$o(e);return Qa(n)&&(n=i),Qa(t)?lr(t,gr(e,1,Qa,!0),i,n):[]}));function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=yn(r+i,0)),Re(t,ao(e,3),i)}function zo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=vs(n),o=n<0?yn(r+o,0):mn(o,r-1)),Re(t,ao(e,3),o,!0)}function Go(t){return null!=t&&t.length?gr(t,1):[]}function Ho(t){return t&&t.length?t[0]:i}var Qo=Qr((function(t){var e=Se(t,vi);return e.length&&e[0]===t[0]?Ar(e):[]})),Yo=Qr((function(t){var e=$o(t),n=Se(t,vi);return e===$o(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ar(n,ao(e,2)):[]})),Xo=Qr((function(t){var e=$o(t),n=Se(t,vi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ar(n,i,e):[]}));function $o(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=Qr(Zo);function Zo(t,e){return t&&t.length&&e&&e.length?Wr(t,e):t}var ta=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return zr(t,Se(e,(function(t){return yo(t,n)?+t:t})).sort(Ei)),r}));function ea(t){return null==t?t:In.call(t)}var na=Qr((function(t){return ui(gr(t,1,Qa,!0))})),ra=Qr((function(t){var e=$o(t);return Qa(e)&&(e=i),ui(gr(t,1,Qa,!0),ao(e,2))})),ia=Qr((function(t){var e=$o(t);return e="function"==typeof e?e:i,ui(gr(t,1,Qa,!0),i,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=Ie(t,(function(t){if(Qa(t))return e=yn(t.length,e),!0})),Ve(e,(function(e){return Se(t,Fe(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=oa(t);return null==e?n:Se(n,(function(t){return ye(e,i,t)}))}var sa=Qr((function(t,e){return Qa(t)?lr(t,e):[]})),ua=Qr((function(t){return pi(Ie(t,Qa))})),ca=Qr((function(t){var e=$o(t);return Qa(e)&&(e=i),pi(Ie(t,Qa),ao(e,2))})),la=Qr((function(t){var e=$o(t);return e="function"==typeof e?e:i,pi(Ie(t,Qa),i,e)})),ha=Qr(oa),fa=Qr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,aa(t,n)}));function pa(t){var e=Un(t);return e.__chain__=!0,e}function da(t,e){return e(t)}var va=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Kn&&yo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:da,args:[o],thisArg:i}),new Bn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),ga=Ni((function(t,e,n){Ot.call(t,n)?++t[n]:ir(t,n,1)})),ya=Mi(Wo),ma=Mi(zo);function ba(t,e){return(za(t)?be:hr)(t,ao(e,3))}function _a(t,e){return(za(t)?_e:fr)(t,ao(e,3))}var wa=Ni((function(t,e,n){Ot.call(t,n)?t[n].push(e):ir(t,n,[e])})),Ia=Qr((function(t,e,n){var i=-1,o="function"==typeof e,a=Ha(t)?r(t.length):[];return hr(t,(function(t){a[++i]=o?ye(e,t,n):Nr(t,e,n)})),a})),Ta=Ni((function(t,e,n){ir(t,n,e)}));function Ea(t,e){return(za(t)?Se:Fr)(t,ao(e,3))}var Sa=Ni((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ca=Qr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&mo(t,e[0],e[1])?e=[]:n>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),Br(t,gr(e,1),[])})),ka=De||function(){return oe.Date.now()};function Aa(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Yi(t,c,i,i,i,i,e)}function Na(t,e){var n;if("function"!=typeof e)throw new kt(o);return t=vs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Da=Qr((function(t,e,n){var r=1;if(n.length){var i=en(n,oo(Da));r|=u}return Yi(t,r,e,n,i)})),Pa=Qr((function(t,e,n){var r=3;if(n.length){var i=en(n,oo(Pa));r|=u}return Yi(e,r,t,n,i)}));function Ra(t,e,n){var r,a,s,u,c,l,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new kt(o);function v(e){var n=r,o=a;return r=a=i,h=e,u=t.apply(o,n)}function g(t){return h=t,c=Do(m,e),f?v(t):u}function y(t){var n=t-l;return l===i||n>=e||n<0||p&&t-h>=s}function m(){var t=ka();if(y(t))return b(t);c=Do(m,function(t){var n=e-(t-l);return p?mn(n,s-(t-h)):n}(t))}function b(t){return c=i,d&&r?v(t):(r=a=i,u)}function _(){var t=ka(),n=y(t);if(r=arguments,a=this,l=t,n){if(c===i)return g(l);if(p)return _i(c),c=Do(m,e),v(l)}return c===i&&(c=Do(m,e)),u}return e=ys(e)||0,es(n)&&(f=!!n.leading,s=(p="maxWait"in n)?yn(ys(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),_.cancel=function(){c!==i&&_i(c),h=0,r=l=a=c=i},_.flush=function(){return c===i?u:b(ka())},_}var Oa=Qr((function(t,e){return cr(t,1,e)})),xa=Qr((function(t,e,n){return cr(t,ys(e)||0,n)}));function La(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new kt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(La.Cache||Gn),n}function Ma(t){if("function"!=typeof t)throw new kt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}La.Cache=Gn;var Fa=mi((function(t,e){var n=(e=1==e.length&&za(e[0])?Se(e[0],Ke(ao())):Se(gr(e,1),Ke(ao()))).length;return Qr((function(r){for(var i=-1,o=mn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ye(t,this,r)}))})),ja=Qr((function(t,e){var n=en(e,oo(ja));return Yi(t,u,i,e,n)})),Ua=Qr((function(t,e){var n=en(e,oo(Ua));return Yi(t,64,i,e,n)})),qa=to((function(t,e){return Yi(t,256,i,i,i,e)}));function Va(t,e){return t===e||t!=t&&e!=e}var Ba=Wi(Sr),Ka=Wi((function(t,e){return t>=e})),Wa=Dr(function(){return arguments}())?Dr:function(t){return ns(t)&&Ot.call(t,"callee")&&!te.call(t,"callee")},za=r.isArray,Ga=he?Ke(he):function(t){return ns(t)&&Er(t)==P};function Ha(t){return null!=t&&ts(t.length)&&!Ja(t)}function Qa(t){return ns(t)&&Ha(t)}var Ya=pn||yu,Xa=fe?Ke(fe):function(t){return ns(t)&&Er(t)==m};function $a(t){if(!ns(t))return!1;var e=Er(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Ja(t){if(!es(t))return!1;var e=Er(t);return e==_||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Za(t){return"number"==typeof t&&t==vs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=pe?Ke(pe):function(t){return ns(t)&&fo(t)==I};function is(t){return"number"==typeof t||ns(t)&&Er(t)==T}function os(t){if(!ns(t)||Er(t)!=E)return!1;var e=Gt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==Ft}var as=de?Ke(de):function(t){return ns(t)&&Er(t)==C},ss=ve?Ke(ve):function(t){return ns(t)&&fo(t)==k};function us(t){return"string"==typeof t||!za(t)&&ns(t)&&Er(t)==A}function cs(t){return"symbol"==typeof t||ns(t)&&Er(t)==N}var ls=ge?Ke(ge):function(t){return ns(t)&&ts(t.length)&&!!Jt[Er(t)]},hs=Wi(Mr),fs=Wi((function(t,e){return t<=e}));function ps(t){if(!t)return[];if(Ha(t))return us(t)?an(t):ki(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=fo(t);return(e==I?Ze:e==k?nn:Vs)(t)}function ds(t){return t?(t=ys(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function vs(t){var e=ds(t),n=e%1;return e==e?n?e-n:e:0}function gs(t){return t?ar(vs(t),0,p):0}function ys(t){if("number"==typeof t)return t;if(cs(t))return f;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Be(t);var n=dt.test(t);return n||gt.test(t)?ne(t.slice(2),n?2:8):pt.test(t)?f:+t}function ms(t){return Ai(t,Os(t))}function bs(t){return null==t?"":si(t)}var _s=Di((function(t,e){if(Io(e)||Ha(e))Ai(e,Rs(e),t);else for(var n in e)Ot.call(e,n)&&tr(t,n,e[n])})),ws=Di((function(t,e){Ai(e,Os(e),t)})),Is=Di((function(t,e,n,r){Ai(e,Os(e),t,r)})),Ts=Di((function(t,e,n,r){Ai(e,Rs(e),t,r)})),Es=to(or),Ss=Qr((function(t,e){t=Et(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&mo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Os(a),u=-1,c=s.length;++u<c;){var l=s[u],h=t[l];(h===i||Va(h,Dt[l])&&!Ot.call(t,l))&&(t[l]=a[l])}return t})),Cs=Qr((function(t){return t.push(i,$i),ye(Ls,i,t)}));function ks(t,e,n){var r=null==t?i:Ir(t,e);return r===i?n:r}function As(t,e){return null!=t&&po(t,e,kr)}var Ns=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),t[e]=n}),eu(iu)),Ds=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]}),ao),Ps=Qr(Nr);function Rs(t){return Ha(t)?Yn(t):Lr(t)}function Os(t){return Ha(t)?Yn(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=Io(t),n=[];for(var r in t)("constructor"!=r||!e&&Ot.call(t,r))&&n.push(r);return n}(t)}var xs=Di((function(t,e,n){qr(t,e,n)})),Ls=Di((function(t,e,n,r){qr(t,e,n,r)})),Ms=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Se(e,(function(e){return e=yi(e,t),r||(r=e.length>1),e})),Ai(t,no(t),n),r&&(n=sr(n,7,Ji));for(var i=e.length;i--;)ci(n,e[i]);return n})),Fs=to((function(t,e){return null==t?{}:function(t,e){return Kr(t,e,(function(e,n){return As(t,n)}))}(t,e)}));function js(t,e){if(null==t)return{};var n=Se(no(t),(function(t){return[t]}));return e=ao(e),Kr(t,n,(function(t,n){return e(t,n[0])}))}var Us=Qi(Rs),qs=Qi(Os);function Vs(t){return null==t?[]:We(t,Rs(t))}var Bs=xi((function(t,e,n){return e=e.toLowerCase(),t+(n?Ks(e):e)}));function Ks(t){return $s(bs(t).toLowerCase())}function Ws(t){return(t=bs(t))&&t.replace(mt,Ye).replace(zt,"")}var zs=xi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=xi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Hs=Oi("toLowerCase"),Qs=xi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ys=xi((function(t,e,n){return t+(n?" ":"")+$s(e)})),Xs=xi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),$s=Oi("toUpperCase");function Js(t,e,n){return t=bs(t),(e=n?i:e)===i?function(t){return Yt.test(t)}(t)?function(t){return t.match(Ht)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Zs=Qr((function(t,e){try{return ye(t,i,e)}catch(t){return $a(t)?t:new wt(t)}})),tu=to((function(t,e){return be(e,(function(e){e=jo(e),ir(t,e,Da(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Fi(),ru=Fi(!0);function iu(t){return t}function ou(t){return xr("function"==typeof t?t:sr(t,1))}var au=Qr((function(t,e){return function(n){return Nr(n,t,e)}})),su=Qr((function(t,e){return function(n){return Nr(t,n,e)}}));function uu(t,e,n){var r=Rs(e),i=wr(e,r);null!=n||es(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Rs(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Ja(t);return be(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ki(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ce([this.value()],arguments))})})),t}function cu(){}var lu=Vi(Se),hu=Vi(we),fu=Vi(Ne);function pu(t){return bo(t)?Fe(jo(t)):function(t){return function(e){return Ir(e,t)}}(t)}var du=Ki(),vu=Ki(!0);function gu(){return[]}function yu(){return!1}var mu,bu=qi((function(t,e){return t+e}),0),_u=Gi("ceil"),wu=qi((function(t,e){return t/e}),1),Iu=Gi("floor"),Tu=qi((function(t,e){return t*e}),1),Eu=Gi("round"),Su=qi((function(t,e){return t-e}),0);return Un.after=function(t,e){if("function"!=typeof e)throw new kt(o);return t=vs(t),function(){if(--t<1)return e.apply(this,arguments)}},Un.ary=Aa,Un.assign=_s,Un.assignIn=ws,Un.assignInWith=Is,Un.assignWith=Ts,Un.at=Es,Un.before=Na,Un.bind=Da,Un.bindAll=tu,Un.bindKey=Pa,Un.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return za(t)?t:[t]},Un.chain=pa,Un.chunk=function(t,e,n){e=(n?mo(t,e,n):e===i)?1:yn(vs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,u=r(ln(o/e));a<o;)u[s++]=ei(t,a,a+=e);return u},Un.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Un.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ce(za(n)?ki(n):[n],gr(e,1))},Un.cond=function(t){var e=null==t?0:t.length,n=ao();return t=e?Se(t,(function(t){if("function"!=typeof t[1])throw new kt(o);return[n(t[0]),t[1]]})):[],Qr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ye(i[0],this,n))return ye(i[1],this,n)}}))},Un.conforms=function(t){return function(t){var e=Rs(t);return function(n){return ur(n,t,e)}}(sr(t,1))},Un.constant=eu,Un.countBy=ga,Un.create=function(t,e){var n=qn(t);return null==e?n:rr(n,e)},Un.curry=function t(e,n,r){var o=Yi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Un.curryRight=function t(e,n,r){var o=Yi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Un.debounce=Ra,Un.defaults=Ss,Un.defaultsDeep=Cs,Un.defer=Oa,Un.delay=xa,Un.difference=Vo,Un.differenceBy=Bo,Un.differenceWith=Ko,Un.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:vs(e))<0?0:e,r):[]},Un.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:vs(e)))<0?0:e):[]},Un.dropRightWhile=function(t,e){return t&&t.length?hi(t,ao(e,3),!0,!0):[]},Un.dropWhile=function(t,e){return t&&t.length?hi(t,ao(e,3),!0):[]},Un.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&mo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=vs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:vs(r))<0&&(r+=o),r=n>r?0:gs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Un.filter=function(t,e){return(za(t)?Ie:vr)(t,ao(e,3))},Un.flatMap=function(t,e){return gr(Ea(t,e),1)},Un.flatMapDeep=function(t,e){return gr(Ea(t,e),l)},Un.flatMapDepth=function(t,e,n){return n=n===i?1:vs(n),gr(Ea(t,e),n)},Un.flatten=Go,Un.flattenDeep=function(t){return null!=t&&t.length?gr(t,l):[]},Un.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:vs(e)):[]},Un.flip=function(t){return Yi(t,512)},Un.flow=nu,Un.flowRight=ru,Un.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Un.functions=function(t){return null==t?[]:wr(t,Rs(t))},Un.functionsIn=function(t){return null==t?[]:wr(t,Os(t))},Un.groupBy=wa,Un.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Un.intersection=Qo,Un.intersectionBy=Yo,Un.intersectionWith=Xo,Un.invert=Ns,Un.invertBy=Ds,Un.invokeMap=Ia,Un.iteratee=ou,Un.keyBy=Ta,Un.keys=Rs,Un.keysIn=Os,Un.map=Ea,Un.mapKeys=function(t,e){var n={};return e=ao(e,3),br(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Un.mapValues=function(t,e){var n={};return e=ao(e,3),br(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Un.matches=function(t){return jr(sr(t,1))},Un.matchesProperty=function(t,e){return Ur(t,sr(e,1))},Un.memoize=La,Un.merge=xs,Un.mergeWith=Ls,Un.method=au,Un.methodOf=su,Un.mixin=uu,Un.negate=Ma,Un.nthArg=function(t){return t=vs(t),Qr((function(e){return Vr(e,t)}))},Un.omit=Ms,Un.omitBy=function(t,e){return js(t,Ma(ao(e)))},Un.once=function(t){return Na(2,t)},Un.orderBy=function(t,e,n,r){return null==t?[]:(za(e)||(e=null==e?[]:[e]),za(n=r?i:n)||(n=null==n?[]:[n]),Br(t,e,n))},Un.over=lu,Un.overArgs=Fa,Un.overEvery=hu,Un.overSome=fu,Un.partial=ja,Un.partialRight=Ua,Un.partition=Sa,Un.pick=Fs,Un.pickBy=js,Un.property=pu,Un.propertyOf=function(t){return function(e){return null==t?i:Ir(t,e)}},Un.pull=Jo,Un.pullAll=Zo,Un.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,ao(n,2)):t},Un.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,i,n):t},Un.pullAt=ta,Un.range=du,Un.rangeRight=vu,Un.rearg=qa,Un.reject=function(t,e){return(za(t)?Ie:vr)(t,Ma(ao(e,3)))},Un.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=ao(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return zr(t,i),n},Un.rest=function(t,e){if("function"!=typeof t)throw new kt(o);return Qr(t,e=e===i?e:vs(e))},Un.reverse=ea,Un.sampleSize=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:vs(e),(za(t)?$n:Xr)(t,e)},Un.set=function(t,e,n){return null==t?t:$r(t,e,n)},Un.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:$r(t,e,n,r)},Un.shuffle=function(t){return(za(t)?Jn:ti)(t)},Un.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&mo(t,e,n)?(e=0,n=r):(e=null==e?0:vs(e),n=n===i?r:vs(n)),ei(t,e,n)):[]},Un.sortBy=Ca,Un.sortedUniq=function(t){return t&&t.length?oi(t):[]},Un.sortedUniqBy=function(t,e){return t&&t.length?oi(t,ao(e,2)):[]},Un.split=function(t,e,n){return n&&"number"!=typeof n&&mo(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=si(e))&&Je(t)?bi(an(t),0,n):t.split(e,n):[]},Un.spread=function(t,e){if("function"!=typeof t)throw new kt(o);return e=null==e?0:yn(vs(e),0),Qr((function(n){var r=n[e],i=bi(n,0,e);return r&&Ce(i,r),ye(t,this,i)}))},Un.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Un.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:vs(e))<0?0:e):[]},Un.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:vs(e)))<0?0:e,r):[]},Un.takeRightWhile=function(t,e){return t&&t.length?hi(t,ao(e,3),!1,!0):[]},Un.takeWhile=function(t,e){return t&&t.length?hi(t,ao(e,3)):[]},Un.tap=function(t,e){return e(t),t},Un.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new kt(o);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ra(t,e,{leading:r,maxWait:e,trailing:i})},Un.thru=da,Un.toArray=ps,Un.toPairs=Us,Un.toPairsIn=qs,Un.toPath=function(t){return za(t)?Se(t,jo):cs(t)?[t]:ki(Fo(bs(t)))},Un.toPlainObject=ms,Un.transform=function(t,e,n){var r=za(t),i=r||Ya(t)||ls(t);if(e=ao(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:es(t)&&Ja(o)?qn(Gt(t)):{}}return(i?be:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Un.unary=function(t){return Aa(t,1)},Un.union=na,Un.unionBy=ra,Un.unionWith=ia,Un.uniq=function(t){return t&&t.length?ui(t):[]},Un.uniqBy=function(t,e){return t&&t.length?ui(t,ao(e,2)):[]},Un.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},Un.unset=function(t,e){return null==t||ci(t,e)},Un.unzip=oa,Un.unzipWith=aa,Un.update=function(t,e,n){return null==t?t:li(t,e,gi(n))},Un.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,gi(n),r)},Un.values=Vs,Un.valuesIn=function(t){return null==t?[]:We(t,Os(t))},Un.without=sa,Un.words=Js,Un.wrap=function(t,e){return ja(gi(e),t)},Un.xor=ua,Un.xorBy=ca,Un.xorWith=la,Un.zip=ha,Un.zipObject=function(t,e){return di(t||[],e||[],tr)},Un.zipObjectDeep=function(t,e){return di(t||[],e||[],$r)},Un.zipWith=fa,Un.entries=Us,Un.entriesIn=qs,Un.extend=ws,Un.extendWith=Is,uu(Un,Un),Un.add=bu,Un.attempt=Zs,Un.camelCase=Bs,Un.capitalize=Ks,Un.ceil=_u,Un.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ys(n))==n?n:0),e!==i&&(e=(e=ys(e))==e?e:0),ar(ys(t),e,n)},Un.clone=function(t){return sr(t,4)},Un.cloneDeep=function(t){return sr(t,5)},Un.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:i)},Un.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:i)},Un.conformsTo=function(t,e){return null==e||ur(t,e,Rs(e))},Un.deburr=Ws,Un.defaultTo=function(t,e){return null==t||t!=t?e:t},Un.divide=wu,Un.endsWith=function(t,e,n){t=bs(t),e=si(e);var r=t.length,o=n=n===i?r:ar(vs(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Un.eq=Va,Un.escape=function(t){return(t=bs(t))&&Q.test(t)?t.replace(G,Xe):t},Un.escapeRegExp=function(t){return(t=bs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Un.every=function(t,e,n){var r=za(t)?we:pr;return n&&mo(t,e,n)&&(e=i),r(t,ao(e,3))},Un.find=ya,Un.findIndex=Wo,Un.findKey=function(t,e){return Pe(t,ao(e,3),br)},Un.findLast=ma,Un.findLastIndex=zo,Un.findLastKey=function(t,e){return Pe(t,ao(e,3),_r)},Un.floor=Iu,Un.forEach=ba,Un.forEachRight=_a,Un.forIn=function(t,e){return null==t?t:yr(t,ao(e,3),Os)},Un.forInRight=function(t,e){return null==t?t:mr(t,ao(e,3),Os)},Un.forOwn=function(t,e){return t&&br(t,ao(e,3))},Un.forOwnRight=function(t,e){return t&&_r(t,ao(e,3))},Un.get=ks,Un.gt=Ba,Un.gte=Ka,Un.has=function(t,e){return null!=t&&po(t,e,Cr)},Un.hasIn=As,Un.head=Ho,Un.identity=iu,Un.includes=function(t,e,n,r){t=Ha(t)?t:Vs(t),n=n&&!r?vs(n):0;var i=t.length;return n<0&&(n=yn(i+n,0)),us(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Oe(t,e,n)>-1},Un.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=yn(r+i,0)),Oe(t,e,i)},Un.inRange=function(t,e,n){return e=ds(e),n===i?(n=e,e=0):n=ds(n),function(t,e,n){return t>=mn(e,n)&&t<yn(e,n)}(t=ys(t),e,n)},Un.invoke=Ps,Un.isArguments=Wa,Un.isArray=za,Un.isArrayBuffer=Ga,Un.isArrayLike=Ha,Un.isArrayLikeObject=Qa,Un.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Er(t)==y},Un.isBuffer=Ya,Un.isDate=Xa,Un.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Un.isEmpty=function(t){if(null==t)return!0;if(Ha(t)&&(za(t)||"string"==typeof t||"function"==typeof t.splice||Ya(t)||ls(t)||Wa(t)))return!t.length;var e=fo(t);if(e==I||e==k)return!t.size;if(Io(t))return!Lr(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},Un.isEqual=function(t,e){return Pr(t,e)},Un.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Pr(t,e,i,n):!!r},Un.isError=$a,Un.isFinite=function(t){return"number"==typeof t&&dn(t)},Un.isFunction=Ja,Un.isInteger=Za,Un.isLength=ts,Un.isMap=rs,Un.isMatch=function(t,e){return t===e||Rr(t,e,uo(e))},Un.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Rr(t,e,uo(e),n)},Un.isNaN=function(t){return is(t)&&t!=+t},Un.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(t)},Un.isNil=function(t){return null==t},Un.isNull=function(t){return null===t},Un.isNumber=is,Un.isObject=es,Un.isObjectLike=ns,Un.isPlainObject=os,Un.isRegExp=as,Un.isSafeInteger=function(t){return Za(t)&&t>=-9007199254740991&&t<=h},Un.isSet=ss,Un.isString=us,Un.isSymbol=cs,Un.isTypedArray=ls,Un.isUndefined=function(t){return t===i},Un.isWeakMap=function(t){return ns(t)&&fo(t)==D},Un.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Er(t)},Un.join=function(t,e){return null==t?"":vn.call(t,e)},Un.kebabCase=zs,Un.last=$o,Un.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=vs(n))<0?yn(r+o,0):mn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Re(t,Le,o,!0)},Un.lowerCase=Gs,Un.lowerFirst=Hs,Un.lt=hs,Un.lte=fs,Un.max=function(t){return t&&t.length?dr(t,iu,Sr):i},Un.maxBy=function(t,e){return t&&t.length?dr(t,ao(e,2),Sr):i},Un.mean=function(t){return Me(t,iu)},Un.meanBy=function(t,e){return Me(t,ao(e,2))},Un.min=function(t){return t&&t.length?dr(t,iu,Mr):i},Un.minBy=function(t,e){return t&&t.length?dr(t,ao(e,2),Mr):i},Un.stubArray=gu,Un.stubFalse=yu,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Tu,Un.nth=function(t,e){return t&&t.length?Vr(t,vs(e)):i},Un.noConflict=function(){return oe._===this&&(oe._=jt),this},Un.noop=cu,Un.now=ka,Un.pad=function(t,e,n){t=bs(t);var r=(e=vs(e))?on(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Bi(hn(i),n)+t+Bi(ln(i),n)},Un.padEnd=function(t,e,n){t=bs(t);var r=(e=vs(e))?on(t):0;return e&&r<e?t+Bi(e-r,n):t},Un.padStart=function(t,e,n){t=bs(t);var r=(e=vs(e))?on(t):0;return e&&r<e?Bi(e-r,n)+t:t},Un.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(bs(t).replace(rt,""),e||0)},Un.random=function(t,e,n){if(n&&"boolean"!=typeof n&&mo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=ds(t),e===i?(e=t,t=0):e=ds(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return mn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Gr(t,e)},Un.reduce=function(t,e,n){var r=za(t)?ke:Ue,i=arguments.length<3;return r(t,ao(e,4),n,i,hr)},Un.reduceRight=function(t,e,n){var r=za(t)?Ae:Ue,i=arguments.length<3;return r(t,ao(e,4),n,i,fr)},Un.repeat=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:vs(e),Hr(bs(t),e)},Un.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Un.result=function(t,e,n){var r=-1,o=(e=yi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[jo(e[r])];a===i&&(r=o,a=n),t=Ja(a)?a.call(t):a}return t},Un.round=Eu,Un.runInContext=t,Un.sample=function(t){return(za(t)?Xn:Yr)(t)},Un.size=function(t){if(null==t)return 0;if(Ha(t))return us(t)?on(t):t.length;var e=fo(t);return e==I||e==k?t.size:Lr(t).length},Un.snakeCase=Qs,Un.some=function(t,e,n){var r=za(t)?Ne:ni;return n&&mo(t,e,n)&&(e=i),r(t,ao(e,3))},Un.sortedIndex=function(t,e){return ri(t,e)},Un.sortedIndexBy=function(t,e,n){return ii(t,e,ao(n,2))},Un.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Va(t[r],e))return r}return-1},Un.sortedLastIndex=function(t,e){return ri(t,e,!0)},Un.sortedLastIndexBy=function(t,e,n){return ii(t,e,ao(n,2),!0)},Un.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Va(t[n],e))return n}return-1},Un.startCase=Ys,Un.startsWith=function(t,e,n){return t=bs(t),n=null==n?0:ar(vs(n),0,t.length),e=si(e),t.slice(n,n+e.length)==e},Un.subtract=Su,Un.sum=function(t){return t&&t.length?qe(t,iu):0},Un.sumBy=function(t,e){return t&&t.length?qe(t,ao(e,2)):0},Un.template=function(t,e,n){var r=Un.templateSettings;n&&mo(t,e,n)&&(e=i),t=bs(t),e=Is({},e,r,Xi);var o,a,s=Is({},e.imports,r.imports,Xi),u=Rs(s),c=We(s,u),l=0,h=e.interpolate||bt,f="__p += '",p=St((e.escape||bt).source+"|"+h.source+"|"+(h===$?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),d="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$t+"]")+"\n";t.replace(p,(function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(l,u).replace(_t,$e),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var v=Ot.call(e,"variable")&&e.variable;if(v){if(ct.test(v))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(B,""):f).replace(K,"$1").replace(W,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Zs((function(){return It(u,d+"return "+f).apply(i,c)}));if(g.source=f,$a(g))throw g;return g},Un.times=function(t,e){if((t=vs(t))<1||t>h)return[];var n=p,r=mn(t,p);e=ao(e),t-=p;for(var i=Ve(r,e);++n<t;)e(n);return i},Un.toFinite=ds,Un.toInteger=vs,Un.toLength=gs,Un.toLower=function(t){return bs(t).toLowerCase()},Un.toNumber=ys,Un.toSafeInteger=function(t){return t?ar(vs(t),-9007199254740991,h):0===t?t:0},Un.toString=bs,Un.toUpper=function(t){return bs(t).toUpperCase()},Un.trim=function(t,e,n){if((t=bs(t))&&(n||e===i))return Be(t);if(!t||!(e=si(e)))return t;var r=an(t),o=an(e);return bi(r,Ge(r,o),He(r,o)+1).join("")},Un.trimEnd=function(t,e,n){if((t=bs(t))&&(n||e===i))return t.slice(0,sn(t)+1);if(!t||!(e=si(e)))return t;var r=an(t);return bi(r,0,He(r,an(e))+1).join("")},Un.trimStart=function(t,e,n){if((t=bs(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=si(e)))return t;var r=an(t);return bi(r,Ge(r,an(e))).join("")},Un.truncate=function(t,e){var n=30,r="...";if(es(e)){var o="separator"in e?e.separator:o;n="length"in e?vs(e.length):n,r="omission"in e?si(e.omission):r}var a=(t=bs(t)).length;if(Je(t)){var s=an(t);a=s.length}if(n>=a)return t;var u=n-on(r);if(u<1)return r;var c=s?bi(s,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(s&&(u+=c.length-u),as(o)){if(t.slice(u).search(o)){var l,h=c;for(o.global||(o=St(o.source,bs(ft.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(si(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},Un.unescape=function(t){return(t=bs(t))&&H.test(t)?t.replace(z,un):t},Un.uniqueId=function(t){var e=++xt;return bs(t)+e},Un.upperCase=Xs,Un.upperFirst=$s,Un.each=ba,Un.eachRight=_a,Un.first=Ho,uu(Un,(mu={},br(Un,(function(t,e){Ot.call(Un.prototype,e)||(mu[e]=t)})),mu),{chain:!1}),Un.VERSION="4.17.21",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Un[t].placeholder=Un})),be(["drop","take"],(function(t,e){Kn.prototype[t]=function(n){n=n===i?1:yn(vs(n),0);var r=this.__filtered__&&!e?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=mn(n,r.__takeCount__):r.__views__.push({size:mn(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Kn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Kn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ao(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),be(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Kn.prototype[t]=function(){return this[n](1).value()[0]}})),be(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Kn.prototype[t]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(iu)},Kn.prototype.find=function(t){return this.filter(t).head()},Kn.prototype.findLast=function(t){return this.reverse().find(t)},Kn.prototype.invokeMap=Qr((function(t,e){return"function"==typeof t?new Kn(this):this.map((function(n){return Nr(n,t,e)}))})),Kn.prototype.reject=function(t){return this.filter(Ma(ao(t)))},Kn.prototype.slice=function(t,e){t=vs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Kn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=vs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Kn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Kn.prototype.toArray=function(){return this.take(p)},br(Kn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Un[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(Un.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Kn,c=s[0],l=u||za(e),h=function(t){var e=o.apply(Un,Ce([t],s));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=a&&!f,v=u&&!p;if(!a&&l){e=v?e:new Kn(this);var g=t.apply(e,s);return g.__actions__.push({func:da,args:[h],thisArg:i}),new Bn(g,f)}return d&&v?t.apply(this,s):(g=this.thru(h),d?r?g.value()[0]:g.value():g)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=At[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Un.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(za(i)?i:[],t)}return this[n]((function(n){return e.apply(za(n)?n:[],t)}))}})),br(Kn.prototype,(function(t,e){var n=Un[e];if(n){var r=n.name+"";Ot.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:e,func:n})}})),Dn[ji(i,2).name]=[{name:"wrapper",func:i}],Kn.prototype.clone=function(){var t=new Kn(this.__wrapped__);return t.__actions__=ki(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ki(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ki(this.__views__),t},Kn.prototype.reverse=function(){if(this.__filtered__){var t=new Kn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Kn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=za(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=mn(e,t+a);break;case"takeRight":t=yn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,p=mn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return fi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var v=-1,g=t[c+=e];++v<h;){var y=l[v],m=y.iteratee,b=y.type,_=m(g);if(2==b)g=_;else if(!_){if(1==b)continue t;break t}}d[f++]=g}return d},Un.prototype.at=va,Un.prototype.chain=function(){return pa(this)},Un.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(t){for(var e,n=this;n instanceof Vn;){var r=qo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Un.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Kn){var e=t;return this.__actions__.length&&(e=new Kn(this)),(e=e.reverse()).__actions__.push({func:da,args:[ea],thisArg:i}),new Bn(e,this.__chain__)}return this.thru(ea)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,ae&&(Un.prototype[ae]=function(){return this}),Un}();oe._=cn,(r=function(){return cn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";n(486);const t={apiKey:"AIzaSyBfhzlaOuvzV04oHNOGN2afunCOpJJGaNs",authDomain:"raven-test-app.firebaseapp.com",databaseURL:"https://raven-test-app.firebaseio.com",projectId:"raven-test-app",storageBucket:"raven-test-app.appspot.com",messagingSenderId:"720703019142",appId:"1:720703019142:web:92852a2073af849b391907",measurementId:"G-9T19QD6LCS"},e="raven_user_id",r="raven_user",i="raven_device_token",o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(t,e){navigator.serviceWorker.register(t).then((t=>{t.onupdatefound=()=>{const n=t.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((t=>{console.error("Error during service worker registration:",t)}))}var s=n(983);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Qa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++b)}var m="closure_uid_"+(1e9*Math.random()>>>0),b=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function C(t){return t}function k(t,e,n){this.code=D+t,this.message=e||P[t]||"",this.a=n||null}function A(t){var e=t&&t.code;return e?new k(e.substring(D.length),t.message,t.serverResponse):null}S(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var N,D="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function F(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function j(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function q(){this.b=this.a=null}N=O("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(M,L),M.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new j((function(){return new K}),(function(t){t.reset()}));function B(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}q.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var W=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},G=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=W(t,e)}function X(t,e){var n;return(n=0<=(e=W(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ht=u.navigator;if(ht){var ft=ht.userAgent;if(ft){tt=ft;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===Et&&e||"",this.b=Tt}function wt(t){return t instanceof _t&&t.constructor===_t&&t.b===Tt?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var It,Tt={},Et={};function St(){if(void 0===It){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:C,createScript:C,createScriptURL:C})}catch(t){u.console&&u.console.error(t.message)}It=t}else It=t}return It}function Ct(t,e){this.a=e===Pt?t:""}function kt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function At(t,e){var n=wt(t);if(!Dt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new Ct(t=e?e.createScriptURL(t):t,Pt)}(t=n.replace(Nt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?wt(t):encodeURIComponent(String(t))})))}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Nt=/%{(\w+)}/g,Dt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function Rt(t,e){this.a=e===Ut?t:""}function Ot(t){return t instanceof Rt&&t.constructor===Rt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Rt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&xt.test(e[1])?new Rt(t,Ut):null}return t}function jt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Ut))}var Ut={},qt=new Rt("about:invalid#zClosurez",Ut);function Vt(t,e,n){this.a=n===Bt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:jt(t),e=e||u,n=n instanceof _t?wt(n):n||"",e.open(Ot(t),n,r,void 0)}function Wt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Gt(t){return Gt[" "](t),t}Gt[" "]=f;var Ht,Qt,Yt=pt("Opera"),Xt=pt("Trident")||pt("MSIE"),$t=pt("Edge"),Jt=$t||Xt,Zt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=(Qt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Qt):$t?/Edge\/([\d\.]+)/.exec(Qt):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qt):te?/WebKit\/(\S+)/.exec(Qt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Qt):void 0);if(re&&(ne=re?re[1]:""),Xt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Ht=String(ie);break t}}Ht=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Ht)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=lt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||lt(0==a[2].length,0==s[2].length)||lt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}u.document&&Xt?oe=ee()||parseInt(Ht,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Qt){}var ce=!Xt||9<=Number(ue);function le(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}z(a?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){u.setTimeout((function(){throw t}),0)}function me(t,e){pe||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);pe=function(){t.then(we)}}else pe=function(){var t=we;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!pt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(fe||(fe=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),fe(t)):u.setImmediate(t)}}(),be||(pe(),be=!0),_e.add(t,e)}var be=!1,_e=new q;function we(){for(var t;t=B();){try{t.a.call(t.b)}catch(t){ye(t)}U(V,t)}be=!1}function Ie(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Me(n,Ee,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Se,t)}))}catch(t){Me(this,Se,t)}}var Te=0,Ee=2,Se=3;function Ce(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ce.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ke=new j((function(){return new Ce}),(function(t){t.reset()}));function Ae(t,e,n){var r=ke.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof Ie)return t;var e=new Ie(f);return Me(e,Ee,t),e}function De(t){return new Ie((function(e,n){n(t)}))}function Pe(t,e,n){Fe(t,e,n,null)||me(T(e,t))}function Re(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Pe(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Te&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),qe(n,i,Se,e)))}t.c=null}else Me(t,Se,e)}function xe(t,e){t.b||t.a!=Ee&&t.a!=Se||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ae(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,xe(t,i),i.a}function Me(t,e,n){t.a==Te&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Se||n instanceof Ke||function(t,e){t.g=!0,me((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Ie)return xe(t,Ae(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function je(t){t.h||(t.h=!0,me(t.gc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(t){Be.call(null,t)}U(ke,e)}function Ve(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Le(this,v(t)?t:null,v(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ae(t,t,e)).c=!0,xe(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new Ke(t);me((function(){Oe(this,e)}),this)}},t.$c=function(t){this.a=Te,Me(this,Ee,t)},t.ad=function(t){this.a=Te,Me(this,Se,t)},t.gc=function(){for(var t;t=Ue(this);)qe(this,t,this.a,this.i);this.h=!1};var Be=ye;function Ke(t){L.call(this,t)}function We(){0!=ze&&(Ge[y(this)]=this),this.xa=this.xa,this.pa=this.pa}S(Ke,L),Ke.prototype.name="cancel";var ze=0,Ge={};function He(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=ze)){var e=y(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ge[e]}}We.prototype.xa=!1,We.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},Ye=!Xt||9<=Number(ue),Xe=Xt&&!se("9"),$e=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Gt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Ze,Je);var tn=Qe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new rn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=In(n),t&&t[en]?En(t,e,n,g(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=_n(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=bn,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=In(n),t&&t[en]?Sn(t,e,n,g(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=In(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=_n(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_n(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in ln?ln[t]:ln[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Ze(e,this))}function _n(t){return(t=t[cn])instanceof an?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(t){return v(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function Tn(){We.call(this),this.v=new an(this),this.ac=this,this.gb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Cn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(v(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function An(t){var e=null;return new Ie((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Nn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Dn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];On(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)On(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(Tn,We),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){hn(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;mt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Cn(a,r,!0,t)&&i}if(i=Cn(a=t.b=n,r,!0,t)&&i,i=Cn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Cn(a=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=Pn.prototype).W=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return On(this.b,t)?this.b[t]:e},t.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,jn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Wn(e,Yn)),t.b=new $n(e,t.i))}function Un(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Vn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Bn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Wn(e,Gn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Wn(e,Gn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Wn(n,"/"==n.charAt(0)?Qn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Wn(n,Xn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Gn=/[#\/\?@]/g,Hn=/[#\?:]/g,Qn=/[#\?]/g,Yn=/[#\?@]/g,Xn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new Pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Dn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Nn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return Jn(t),e=ir(t,e),On(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Pn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),lr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":lr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Jn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=J(e,this.a.get(ir(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function hr(){var t=Pr();return Xt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||u.window;var n="about:blank";t&&(n=Ot(Ft(t)||qt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Pr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||u.window;try{t.close()}catch(t){}}function yr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Ar(Pr())==Cr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft(void 0!==n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:jt(e),a.href=Ot(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=Ot(e),a&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Vt(t=(r=St())?r.createHTML(t):t,null,Bt),r=a.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function _r(){var t=null;return new Ie((function(e){"complete"==u.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function wr(t){return t=t||Pr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Er(){return s.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":s.Z.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function Sr(){var t=Er();return"ReactNative"===t||"Node"===t}var Cr="Firefox",kr="Chrome";function Ar(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Cr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":kr:"Safari"}var Nr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Dr(t,e){e=e||[];var n,r=[],i={};for(n in Nr)i[Nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Ar(i=Pr()):"Worker"===r&&(r=Ar(i=Pr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Pr(){return u.navigator&&u.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Or(){try{var t=u.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!hr()||!!u.indexedDB}catch(t){return Tr()&&!!u.indexedDB}return!1}function xr(){return(Lr()||"chrome-extension:"===Mr()||wr())&&!Sr()&&Or()&&!Tr()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return u.location&&u.location.protocol||null}function Fr(t){return!vr(t=t||Pr())&&Ar(t)!=Cr}function jr(t){return void 0===t?null:or(t)}function Ur(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function qr(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=Ar(t=t||Pr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Wr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Pr(),e=Er(),this.b=vr(t)||"ReactNative"===e}function zr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Gr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Hr(){return!(!Rr("fireauth.oauthhelper",u)&&!Rr("fireauth.iframe",u))}Wr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Yr={};function Xr(t){Yr[t]||(Yr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==$r.abcd}catch(Qt){Qr=!1}function Jr(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[ai]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[gi];if(t=ri(t[di]),!i||i!=hi&&i!=fi&&!n||i==fi&&!r||i==li&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[mi]=n||null,e[_i]=n||null,e[yi]=r):(e[mi]=r||null,e[_i]=r||null,e[yi]=n||null),e[bi]=t||null,Jr(this,Ii,i),Jr(this,wi,ei(e))}S(ui,ni),ui.prototype.w=function(){var t=ui.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var li="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",gi="requestType",yi="email",mi="fromEmail",bi="multiFactorInfo",_i="previousEmail",wi="data",Ii="operation";function Ti(t){var e=qn(t=Vn(t),Ei)||null,n=qn(t,Si)||null,r=qn(t,Ai)||null;if(r=r&&Di[r]||null,!e||!n||!r)throw new k("argument-error",Ei+", "+Si+"and "+Ai+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Ci)||null,languageCode:qn(t,ki)||null,tenantId:qn(t,Ni)||null})}var Ei="apiKey",Si="oobCode",Ci="continueUrl",ki="languageCode",Ai="mode",Ni="tenantId",Di={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:hi,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Pi(t){try{return new Ti(t)}catch(t){return null}}function Ri(t){var e=t[Fi];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Oi];if(n&&"object"==typeof n){e=n[qi];var r=n[ji];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",qi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Oi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new k("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Oi="android",xi="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Fi="url",ji="installApp",Ui="minimumVersion",qi="packageName",Vi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Wi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Wi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Wi.prototype.T=function(){return this.f},Wi.prototype.l=function(){return this.c},Wi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Qi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Qi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Qi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Xi(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function $i(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Ji])return new to(t)}catch(t){}return null}var Ji="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Ji]){var n=zi(t[Ji]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function eo(t){to.call(this,t),Jr(this,"profile",ei((t=qr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function ao(t){var e=Vn(t),n=qn(e,"link"),r=qn(Vn(n),"link");return e=qn(e,"deep_link_id"),qn(Vn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}S(eo,to),S(no,eo),S(ro,eo),S(io,eo),S(oo,eo);var uo="enroll",co="signin";function lo(){}function ho(t,e){return t.then((function(t){if(t[Za]){var n=zi(t[Za]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new k("user-mismatch"):t}))}function fo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Xi(t)||{}).Ja||null,this.ob=null}function _o(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function wo(t){bo.call(this,t,Qi),this.a=[]}function Io(){wo.call(this,"facebook.com")}function To(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){wo.call(this,"github.com")}function So(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function Co(){wo.call(this,"google.com"),this.Ca("profile")}function ko(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function Ao(){bo.call(this,"twitter.com",Hi)}function No(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function Do(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new Do(t.email,t.password,t.signInMethod):null}function Ro(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=xo(e)))throw new k("argument-error","Invalid email link!");return new Do(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Pi(t=ao(t)))&&t.operation===hi?t:null}function Lo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new k("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function Fo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function jo(t){try{this.a=t||s.Z.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new Lo({eb:t,cb:e})}function qo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ko(o,n);case"facebook.com":return To(n);case"github.com":return So(n);case"twitter.com":return No(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fo(e,a):new go(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Vo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Bo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Ko(t){return(t=t||{}).type?new Bo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&A(t.error),t.postBody,t.tenantId):null}function Wo(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},so.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ka=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.w=function(){},fo.prototype.ka=function(t){return _s(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ws(t,n)},fo.prototype.c=function(t,e){return ho(Is(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(t){return _s(t,yo(this))},go.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,ws(t,n)},go.prototype.c=function(t,e){return ho(Is(t,yo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Ib=gt(t),this},S(_o,bo),S(wo,bo),wo.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},wo.prototype.Qb=function(){return Z(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},S(Io,wo),Jr(Io,"PROVIDER_ID","facebook.com"),Jr(Io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(Eo,wo),Jr(Eo,"PROVIDER_ID","github.com"),Jr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),S(Co,wo),Jr(Co,"PROVIDER_ID","google.com"),Jr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Ao,bo),Jr(Ao,"PROVIDER_ID","twitter.com"),Jr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),Do.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ds,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},Do.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ps,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ws,{idToken:e,email:this.a,password:this.f})},Do.prototype.c=function(t,e){return ho(this.ka(t),e)},Do.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ro,{PROVIDER_ID:"password"}),Zr(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(t){return t.fb(Fo(this))},Lo.prototype.b=function(t,e){var n=Fo(this);return n.idToken=e,ru(t,tu,n)},Lo.prototype.c=function(t,e){var n=Fo(this);return n.operation="REAUTH",ho(t=ru(t,eu,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.fb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,Gs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Hs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(jo,{PROVIDER_ID:"phone"}),Zr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),Bo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Bo.prototype.T=function(){return this.h},Bo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Go=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Wt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Wt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Qo(t,e,n){k.call(this,t,n),(t=e||{}).Jb&&Jr(this,"email",t.Jb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.Zb&&Jr(this,"tenantId",t.Zb)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:qo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function Xo(){}function $o(t){return t.c||(t.c=t.b())}function Jo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Sb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ra(t,e,n){this.reset(t,e,n,void 0,void 0)}function ia(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}S(Ho,k),S(Qo,k),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},Xo.prototype.c=null,S(Jo,Xo),Jo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},zo=new Jo,S(ta,Xo),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ra.prototype.a=null,ra.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);function la(t){return t.c?t.c:t.a?la(t.a):(F("Root logger has no level set."),null)}ia.prototype.log=function(t,e,n){if(t.value>=la(this).value)for(v(e)&&(e=e()),t=new ra(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ha={},fa=null;function pa(t){var e;if(fa||(fa=new ia(""),ha[""]=fa,fa.c=ua),!(e=ha[t])){e=new ia(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=pa(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ha[t]=e}return e}function da(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ga(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=ya,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=pa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(va,Xo),va.prototype.a=function(){return new ga(this.f)},va.prototype.b=function(t){return function(){return t}}({}),S(ga,Tn);var ya=0;function ma(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ba(t){t.readyState=4,t.g=null,t.c=null,t.m=null,_a(t)}function _a(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function wa(t){Tn.call(this),this.headers=new Pn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ia,this.u=this.S=!1}(t=ga.prototype).open=function(t,e){if(this.readyState!=ya)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,_a(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ba(this)),this.readyState=ya},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,_a(this)),this.a&&(this.readyState=3,_a(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ma(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ba(this):_a(this),3==this.readyState&&ma(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ba(this))},t.sc=function(t){this.a&&(this.response=t,ba(this))},t.Ua=function(t){var e=this.i;e&&e.log(sa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ba(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(wa,Tn);var Ia="";wa.prototype.b=pa("goog.net.XhrIo");var Ta=/^https?$/i,Ea=["POST","PUT"];function Sa(t){return"content-type"==t.toLowerCase()}function Ca(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ka(t),Na(t)}function ka(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Aa(t){if(t.c&&void 0!==a)if(t.C[1]&&4==Pa(t)&&2==Ra(t))da(t.b,Oa(t,"Local request error detected and ignored"));else if(t.i&&4==Pa(t))kn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Pa(t)){da(t.b,Oa(t,"Request complete")),t.c=!1;try{var e,n=Ra(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(xn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ta.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Pa(t)?t.a.statusText:""}catch(e){da(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ra(t)+"]",ka(t)}}finally{Na(t)}}}function Na(t,e){if(t.a){Da(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Da(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Pa(t){return t.a?t.a.readyState:0}function Ra(t){try{return 2<Pa(t)?t.a.status:-1}catch(t){return-1}}function Oa(t,e){return e+" ["+t.R+" "+t.l+" "+Ra(t)+"]"}function xa(t){var e=za;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function La(t,e,n){t.a=!0,t.c=n,t.f=!e,Ua(t)}function Ma(t){if(t.a){if(!t.v)throw new qa(t);t.v=!1}}function Fa(t,e,n,r){t.g.push([e,n,r]),t.a&&Ua(t)}function ja(t){return Q(t.g,(function(t){return v(t[1])}))}function Ua(t){if(t.h&&t.a&&ja(t)){var e=t.h,n=Ka[e];n&&(u.clearTimeout(n.a),delete Ka[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(x(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,ja(t)||(n=!0)}}t.c=e,r&&(s=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof xa?(Fa(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Ba(e),Ka[e.a]=e,t.h=e.a)}function qa(){L.call(this)}function Va(){L.call(this)}function Ba(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(t=wa.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",da(this.b,Oa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(da(this.b,Oa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Na(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Na(this,!0)),wa.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Aa(this):this.Jc())},t.Jc=function(){Aa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ia:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return da(this.b,"Can not get response: "+t.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Va(this),Ma(this),La(this,!1,t))}},xa.prototype.m=function(t,e){this.i=!1,La(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Fa(this,r,(function(t){t instanceof Va?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,S(qa,L),qa.prototype.message="Deferred has already fired",qa.prototype.name="AlreadyCalledError",S(Va,L),Va.prototype.message="Deferred was canceled",Va.prototype.name="CanceledError",Ba.prototype.c=function(){throw delete Ka[this.a],this.b};var Ka={};function Wa(t){var e={},n=e.document||document,r=kt(t).toString(),i=ge(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new xa(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Ga(i,!0);var t=new Ya(Qa,"Timeout reached for loading script "+r);Ma(a),La(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ga(i,e.xd||!1,s),Ma(a),La(a,!0,null))},i.onerror=function(){Ga(i,!0,s);var t=new Ya(Ha,"Error while loading script "+r);Ma(a),La(a,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=h(e.document):(null===l&&(l=h(u.document)),e=l),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function za(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ga(t,!0,this.Ma)}}function Ga(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ha=0,Qa=1;function Ya(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Xa(t){this.f=t}function $a(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ts,this.g=gt(t.secureTokenHeaders||es),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ns,this.a=gt(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=u.XMLHttpRequest||n&&s.Z.INTERNAL.node&&s.Z.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new va(self):Sr()?this.f=new Xa(n):this.f=new ta,this.b=null}S(Ya,L),S(Xa,Xo),Xa.prototype.a=function(){return new this.f},Xa.prototype.b=function(){return{}};var Ja,Za="idToken",ts=new Wr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ns=new Wr(3e4,6e4),rs={"Content-Type":"application/json"};function is(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function os(t,e){e&&(t.l=as("https://securetoken.googleapis.com/v1/token",e),t.h=as("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=as("https://identitytoolkit.googleapis.com/v2/",e))}function as(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function ss(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function us(t,e,n,r,i,o,a){(function(){var t=Pr();return!((t=Ar(t)!=kr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Xt&&ue&&!(9<ue))})()||Tr()?t=I(t.u,t):(Ja||(Ja=new Ie((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[ls]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Fa(t,null,e,void 0)}(Wa(At(cs,{onload:ls})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,a)}$a.prototype.T=function(){return this.b},$a.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new wa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}En(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return da(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(a,"ready",(function(){s&&clearTimeout(s),He(this)})),Sn(a,"timeout",(function(){s&&clearTimeout(s),He(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=t.D?$o(t.D):$o(zo),t.a.onreadystatechange=I(t.Vb,t);try{da(t.b,Oa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return da(t.b,Oa(t,"Error opening Xhr: "+e.message)),void Ca(t,e)}e=r||"";var o=new Pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)z(t,e,void 0);else for(var n=Dn(t),r=Nn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Sa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Y(Ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Da(t),0<t.g&&(t.u=function(t){return Xt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),da(t.b,Oa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=kn(t.Ma,t.g,t)),da(t.b,Oa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){da(t.b,Oa(t,"Send error: "+e.message)),Ca(t,e)}}(a,t,n,r,i)};var cs=new _t(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),ls="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new k("invalid-email")}function fs(t){"email"in t&&hs(t)}function ps(t){if(!t[Za]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,gt(t));throw new k("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}$a.prototype.s=function(t,e,n,r,i){var o=this;Ja.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$a.prototype.zb=function(){return ru(this,zs,{})},$a.prototype.Bb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},$a.prototype.Cb=function(t,e){return ru(this,Ws,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function ys(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,Qs,e)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Xs,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ys,e)}function Ts(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=$a.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.vb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,js,t)},t.wb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.ub=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Eb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.fb=function(t){return ru(this,Zs,t)},t.nb=function(t,e){return ru(this,Vs,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Ss,{oobCode:t})},t.jb=function(t){return ru(this,Es,{oobCode:t})};var Es={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},Cs={endpoint:"signupNewUser",A:function(t){if(hs(t),!t.password)throw new k("weak-password")},G:ps,V:!0,B:!0},ks={endpoint:"createAuthUri",B:!0},As={endpoint:"deleteAccount",N:["idToken"]},Ns={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},Ds={endpoint:"emailLinkSignin",N:["email","oobCode"],A:hs,G:ps,V:!0,B:!0},Ps={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:hs,G:ps,V:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},Os={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},xs={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},js={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},Us={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},qs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Vs={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},Ws={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new k("weak-password")},G:ps,V:!0},zs={endpoint:"signupNewUser",G:ps,V:!0,B:!0},Gs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Hs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Qs={endpoint:"verifyAssertion",A:ys,Ya:ms,G:bs,V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:ys,Ya:ms,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:function(t){if(ys(t),!t.idToken)throw new k("internal-error")},Ya:ms,G:bs,V:!0},$s={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:ps,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(hs(t),!t.password)throw new k("wrong-password")},G:ps,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");ds(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);ps(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Za]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return De(new k("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ne(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=Vn(e+n);Un(s,"key",t.c),a&&Un(s,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(s,c,i[c]);return new Ie((function(e,n){us(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:or(Ur(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=jr(t)),new k("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(lu||(lu=new Ie((function(t,e){function n(){Kr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:uu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},Ne(Wa(r=At(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new Ie((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new _t(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Wr(3e4,6e4),cu=new Wr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Bn((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Un(this.a,"apiKey",this.h),Un(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return s.Z.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=fr();return function(t){return ru(t,Us,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:mr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(fr())}))}function gu(t){return t.m||(t.m=_r().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ko(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.m}function yu(t){return t.l||(t.C=t.c?Dr(t.c,pu(t.b)):null,t.l=new $a(t.g,O(t.i),t.C),t.f&&os(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function bu(t){if(this.a=t||s.Z.INTERNAL.reactNative&&s.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=I(this.c,this)}hu.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Un(t,"apiKey",this.s),Un(t,"appName",this.c),Un(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=s.Z.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Un(t,"providerId",this.a.providerId),e=Ur((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=gt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||Un(t,"customParameters",jr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Un(t,"scopes",n.join(",")),this.l?Un(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Un(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Un(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!qn(t,a)&&Un(t,a,this.b[a]);return this.h?Un(t,"tid",this.h):tr(t.b,"tid"),this.f?Un(t,"eid",this.f):tr(t.b,"eid"),(a=pu(this.c)).length&&Un(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Ob=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ie((function(e){return function n(){An(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return An(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Pr();return!Fr(t)&&!Br(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return De(new k("popup-blocked"));if(a&&!Fr())return this.ma().o((function(e){gr(t),i(e)})),r(),Ne();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){Vo(n),a||pr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){Vo(e),pr(mu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){$(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&qr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,jr(e)))},t.U=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Tu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function Au(){if(!Ru())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(z(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Nu(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Nu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Du(t){return t.i||(t.i=Nu(t)),t.i}function Pu(t,e){var n=0;return new Ie((function r(i,o){Du(t).then(e).then(i).o((function(e){if(!(3<++n))return Du(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!u.indexedDB}catch(t){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Fu(t){return Du(t).then((function(t){var e=Ou(xu(t,!1));return e.getAll?Lu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Ru()){var t=Vr(),r="__sak"+t;return wu||(wu=new Au),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==Er();if(!(t=Bu()||t&&s.Z.INTERNAL.node&&s.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Bu()||s.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=u.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Wu(){if(!function(){var t="Node"==Er();if(!(t=zu()||t&&s.Z.INTERNAL.node&&s.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=zu()||s.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zu(){try{var t=u.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){var t={};t.Browser=Yu,t.Node=Xu,t.ReactNative=$u,t.Worker=Ju,this.a=t[Er()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Au.prototype).set=function(t,e){var n=this,r=!1;return Pu(this,(function(e){return Lu((e=Ou(xu(e,!0))).get(t))})).then((function(i){return Pu(n,(function(o){if(o=Ou(xu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Pu(this,(function(e){return Lu(Ou(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Pu(this,(function(r){return n=!0,e.b++,Lu(Ou(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){ju(t),function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&ju(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t}))},(t=qu.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.U=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Ne().then((function(){return qr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&hn(u.window,"storage",t)},t.ia=function(t){u.window&&dn(u.window,"storage",t)},(t=Ku.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.U=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return Ne().then((function(){return qr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Hu,Qu,Yu={F:Vu,bb:Wu},Xu={F:Vu,bb:Wu},$u={F:bu,bb:Ku},Ju={F:Vu,bb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Br(Pr())||!Ir()),e=Fr(),n=Or();this.m=t,this.h=e,this.l=n,this.a={},Hu||(Hu=new Gu),t=Hu;try{this.g=!hr()&&Hr()||!u.indexedDB?new t.a.F:new Uu(Tr()?new qu:new t.a.F)}catch(t){this.g=new qu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new qu}this.v=new qu,this.f=I(this.Yb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(hr()||!Hr())&&u.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.mb(e))},Xt&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,I(this.mb,this))},t.mb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=u.Int32Array?new Int32Array(mc):mc),this.reset()}S(lc,(function(){this.b=-1}));for(var hc=64,fc=hc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=J(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|sc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){lc.call(this,8,_c)}S(bc,lc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new k("invalid-cordova-configuration",t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ec(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Sc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=qr(qn(o=Vn(i),"firebaseError")||null))?A(o):null)?new Bo(r.c,r.b,null,null,o,null,r.T()):new Bo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new Bo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=An(500).then((function(){return Sc(t).then((function(){r||Tc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Wo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Sc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Ko(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Cc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?_r().then((function(){return new Ie((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",u))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",u))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",u))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",u))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Ob=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Ne()},t.Mb=function(){return De(new k("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return De(new k("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=Ne().then((function(){return Vo(e),Ec(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Bo(e,r,null,o,new k("no-auth-event"),null,i),s=Rr("BuildInfo.packageName",u);if("string"!=typeof s)throw new k("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",u),l={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Pr().toLowerCase().match(/android/))return De(new k("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=function(t){var e=new bc;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=mu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=Pr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){s=function(){var e=Rr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=An(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},l=function(){zr()&&c()},o.addEventListener("resume",c,!1),Pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Sc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Ec(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bo("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Sa=function(t){$(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Ac(t){return ic(t.b,kc,t.a)}function Nc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Wc,this.C=new Yc,this.g=new Cc(Bc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Dc(this.D,this.v,this.m,N,this.J)}function Dc(t,e,n,r,i){var o=s.Z.SDK_VERSION||null;return wr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Pc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&Pc(t).o((function(e){var n=new Bo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Tb()||zc(t.b)}function Oc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){Pc(t).o((function(e){var n=new Bo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function xc(t,e){$(t.h,(function(t){return t==e}))}Nc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Dc(this.D,this.v,this.m,null,this.J),this.i={}},Nc.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=E())),e=!0;break}}return zc(this.b),e};var Lc=new Wr(2e3,1e4),Mc=new Wr(3e4,6e4);function Fc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Uc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(jc(e))throw new k("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ie((function(){})):Ac(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Nc.prototype.qa=function(){return this.b.qa()};var Vc={};function Bc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=Bc(e,n,r);return Vc[i]||(Vc[i]=new Nc(t,e,n,r)),Vc[i]}function Wc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function Gc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function Hc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Hc(t,n):Hc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Xc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function $c(t,e){this.a=e,Jr(this,"verificationId",t)}function Jc(t,e,n,r){return new jo(t).fb(e,n).then((function(t){return new $c(t,r)}))}function Zc(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:Gr(1e3*e.exp),authTime:Gr(1e3*e.auth_time),issuedAtTime:Gr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function tl(t,e,n){var r=e&&e[nl];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;z(e[el]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Wc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Wc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Qc(t,s,e,null)})).o((function(e){Qc(t,s,null,e)}))}(this,t,e):De(new k("invalid-auth-event")):(Qc(this,!1,null,null),Ne())}else De(new k("invalid-auth-event"))},Wc.prototype.qa=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=An(Mc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):De(new k("invalid-auth-event"))}else De(new k("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var el="mfaInfo",nl="mfaPendingCredential";function rl(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new tl(t,e,n),Jr(this,"resolver",this.b)}function il(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rl(e,t.serverResponse,n,t.message)}catch(t){}return null}function ol(){}function al(t){Jr(this,"factorId",t.fa),this.a=t}function sl(t){if(al.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ul(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function cl(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),ll(this,n)}function ll(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function hl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fl(t,e){t.stop(),t.b=An(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return zr()||!t?Ne():new Ie((function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fl(t,!0)})).o((function(e){t.i(e)&&fl(t,!1)}))}function pl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vl(t,e){t.b=zi(e[Za]||""),t.a=e.refreshToken,dl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gl(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:Gr(e||null),creationTime:Gr(t||null)})}function yl(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ml(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=s.Z.SDK_VERSION?Dr(s.Z.SDK_VERSION):null;this.a=new $a(this.l,O(N),r),t.emulatorConfig&&os(this.a,t.emulatorConfig),this.b=new pl(this.a),Cl(this,e[Za]),vl(this.b,e),Jr(this,"refreshToken",this.b.a),Nl(this,n||{}),Tn.call(this),this.R=!1,this.s&&xr()&&(this.i=Kc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new hl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=I(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){os(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){wl(i,t.f)},this.ba=null,this.O=new cl(this,n),Jr(this,"multiFactor",this.O)}function bl(t,e){t.ja&&dn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&hn(e,"languageCodeChanged",t.Oa)}function _l(t,e){t.X&&dn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&hn(e,"emulatorConfigChanged",t.Aa)}function wl(t,e){t.$=e,ss(t.a,s.Z.SDK_VERSION?Dr(s.Z.SDK_VERSION,t.$):null)}function Il(t,e){t.ba&&dn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&hn(e,"frameworkChanged",t.Ba)}function Tl(t){try{return s.Z.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function El(t){t.D||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.aa),hn(t,"tokenChanged",t.aa))}function Sl(t){dn(t,"tokenChanged",t.aa),t.u.stop()}function Cl(t,e){t.za=e,Jr(t,"_lat",e)}function kl(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Re(e).then((function(){return t}))}function Al(t){t.i&&!t.R&&(t.R=!0,Oc(t.i,t))}function Nl(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new gl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Dl(){}function Pl(t){return Ne().then((function(){if(t.D)throw new k("app-deleted")}))}function Rl(t){return H(t.providerData,(function(t){return t.providerId}))}function Ol(t,e){e&&(xl(t,e.providerId),t.providerData.push(e))}function xl(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Ll(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Ml(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new gl(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new gl),z(e.providerData,(function(e){Ol(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Jr(t,"refreshToken",t.b.a),ll(t.O,e.O.b))}function Fl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,xs,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Ll(t,"isAnonymous",!1),e}))}))}function jl(t,e){e[Za]&&t.za!=e[Za]&&(vl(t.b,e),t.dispatchEvent(new ul("tokenChanged")),Cl(t,e[Za]),Ll(t,"refreshToken",t.b.a))}function Ul(t,e){return Fl(t).then((function(){if(Y(Rl(t),e))return kl(t).then((function(){throw new k("provider-already-linked")}))}))}function ql(t,e,n){return ti({user:t,credential:qo(e),additionalUserInfo:e=$i(e),operationType:n})}function Vl(t,e){return jl(t,e),t.reload().then((function(){return t}))}function Bl(t,e,n,r,i){if(!xr())return De(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return De(t.h);var o=Xi(n.providerId),a=Vr(t.uid+":::"),u=null;(!Fr()||Ir())&&t.s&&n.isOAuthProvider&&(u=mu(t.s,t.l,t.m,e,n,null,a,s.Z.SDK_VERSION||null,null,null,t.tenantId));var c=yr(u,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Wl(t),!i)return t.I().then((function(){}))})).then((function(){return Fc(t.i,c,e,n,a,!!u,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=qc(t.i,t,e,c,a)}))})).then((function(t){return c&&gr(c),t?ti(t):null})).o((function(t){throw c&&gr(c),t})),zl(t,r,i)}function Kl(t,e,n,r,i){if(!xr())return De(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return De(t.h);var o=null,a=Vr(t.uid+":::");return r=r().then((function(){if(Wl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,kl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Ql,t.w(),e.a)),e})).then((function(){return Uc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yl(t.ha);throw o})).then((function(){if(o)throw o})),zl(t,r,i)}function Wl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new k("internal-error");throw new k("auth-domain-config-required")}}function zl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),De(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ul("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){X(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=il(e.w(),Tl(t),I(t.jc,t))),n||e}))}function Gl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Za]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new ml(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Ol(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Hl(t){this.a=t,this.b=ec()}tl.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[el],delete n[nl],mt(n,t),e.g(n)}))},S(rl,k),ol.prototype.sb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Fo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Fo(t.a)}),ru(e,Os,n)}))}(this,t,e)},S(al,ol),S(sl,al),S(ul,Je),(t=cl.prototype).yc=function(t){ll(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return jl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=G(e.b,(function(t){return t.uid!=n}));return ll(e,r),jl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(t){return t.w()}))}}},hl.prototype.start=function(){this.a=this.c,fl(this,!0)},hl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},pl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},pl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?us(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.f,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,dl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},gl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(ml,Tn),ml.prototype.wa=function(t){this.ya=t,is(this.a,t)},ml.prototype.la=function(){return this.ya},ml.prototype.Ga=function(){return Z(this.$)},ml.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Jr(ml.prototype,"providerId","firebase"),(t=ml.prototype).reload=function(){var t=this;return zl(this,Pl(this).then((function(){return Fl(t).then((function(){return kl(t)})).then(Dl)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return zl(this,Pl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.za&&(Cl(e,t.accessToken),e.dispatchEvent(new ul("tokenChanged"))),Ll(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");Nl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,(function(t){return new yl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ol(this,e[n]);Ll(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ul("userReloaded",{hd:t}))},t.Lc=function(t){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return zl(this,t.c(this.a,this.uid).then((function(t){return jl(e,t),n=ql(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return zl(this,Ul(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=ql(e,t,"link"),Vl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return zl(this,Ul(this,"phone").then((function(){return Jc(Tl(n),t,e,I(n.qb,n))})))},t.Mc=function(t,e){var n=this;return zl(this,Ne().then((function(){return Jc(Tl(n),t,e,I(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return zl(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return jl(e,t),e.reload()})))},t.ed=function(t){var e=this;return zl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jl(e,t),e.reload()})))},t.Cb=function(t){var e=this;return zl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return jl(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Pl(this);var e=this;return zl(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jl(e,t),Ll(e,"displayName",t.displayName||null),Ll(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),kl(e)})).then(Dl))},t.cd=function(t){var e=this;return zl(this,Fl(this).then((function(n){return Y(Rl(e),t)?function(t,e,n){return ru(t,Ns,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(Rl(e),(function(t){n[t]||xl(e,t)})),n[jo.PROVIDER_ID]||Jr(e,"phoneNumber",null),kl(e)})):kl(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return zl(this,this.I().then((function(e){return ru(t.a,As,{idToken:e})})).then((function(){t.dispatchEvent(new ul("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");bl(t,null),_l(t,null),Il(t,null),t.J=[],t.D=!0,Sl(t),Jr(t,"refreshToken",null),t.i&&xc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):null},t.Ec=function(t){var e=this;return Bl(this,"linkViaPopup",t,(function(){return Ul(e,t.providerId).then((function(){return kl(e)}))}),!1)},t.Nc=function(t){return Bl(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Fc=function(t){var e=this;return Kl(this,"linkViaRedirect",t,(function(){return Ul(e,t.providerId)}),!1)},t.Oc=function(t){return Kl(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zl(this,this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=ql(i,t,"link"),Vl(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zl(this,Ne().then((function(){return ho(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=ql(i,t,"reauthenticate"),jl(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return zl(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Bi(new Ri(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return zl(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return zl(this,t=ho(Ne(t),n.uid).then((function(t){return e=ql(n,t,"reauthenticate"),jl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.O.w()),t};var Ql={name:"redirectUser",F:"session"};function Yl(t){return ic(t.b,Ql,t.a)}function Xl(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zl("local"),n=Zl("session"),r=Zl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=qr(u.localStorage.getItem(r))}catch(t){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Jl,t.a).then((function(t){return t?Zl(t):e}))}))}))})).then((function(e){return t.c=e,$l(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zl("local"),this.a,I(this.g,this))}function $l(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zl(Zu[n]),t.a));return r.push(ic(t.b,Jl,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Pe(t[s],T(o,s),a);else e(i)}))}(r)}Xl.prototype.g=function(){var t=this,e=Zl("local");rh(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return $l(t,"local").then((function(){t.c=e}))}))}))};var Jl={name:"persistence",F:"session"};function Zl(t){return{name:"authUser",F:t}}function th(t,e){return rh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function eh(t){return rh(t,(function(){return ic(t.b,t.c,t.a)}))}function nh(t,e,n){return rh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Gl(t||{})}))}))}function rh(t,e){return t.f=t.f.then(e,e),t.f}function ih(t){if(this.l=!1,Jr(this,"settings",new Xc),Jr(this,"app",t),!fh(this).options||!fh(this).options.apiKey)throw new k("invalid-api-key");t=s.Z.SDK_VERSION?Dr(s.Z.SDK_VERSION):null,this.a=new $a(fh(this).options&&fh(this).options.apiKey,O(N),t),this.R=[],this.s=[],this.O=[],this.hb=s.Z.INTERNAL.createSubscribe(I(this.zc,this)),this.X=void 0,this.bc=s.Z.INTERNAL.createSubscribe(I(this.Ac,this)),lh(this,null),this.i=new Xl(fh(this).options.apiKey+":"+fh(this).name),this.D=new Hl(fh(this).options.apiKey+":"+fh(this).name),this.$=gh(this,function(t){var e=fh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Ql,t.a).then((function(t){return t&&e&&(t.authDomain=e),Gl(t||{})}))}(t.D,fh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Yl(t.D)}));return gh(t,e)}(t).then((function(){return nh(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return th(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:eh(t.i)}))):null})).then((function(e){lh(t,e||null)}));return gh(t,n)}(this)),this.h=gh(this,function(t){return t.$.then((function(){return ch(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.ya=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=fh(t).options.authDomain,n=fh(t).options.apiKey;e&&xr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,fh(t).name,t.P),Oc(t.b,t),ph(t)&&Al(ph(t)),t.m){Al(t.m);var r=t.m;r.wa(t.la()),bl(r,t),wl(r=t.m,t.J),Il(r,t),os((r=t.m).a,t.P),_l(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Vn(this.P.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function oh(t){Je.call(this,"languageCodeChanged"),this.h=t}function ah(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function sh(t){Je.call(this,"frameworkChanged"),this.f=t}function uh(t){return t.Oa||De(new k("auth-domain-config-required"))}function ch(t){if(!xr())return De(new k("operation-not-supported-in-this-environment"));var e=uh(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return gh(t,e)}function lh(t,e){ph(t)&&(function(t,e){$(t.S,(function(t){return t==e}))}(ph(t),t.Ba),dn(ph(t),"tokenChanged",t.ya),dn(ph(t),"userDeleted",t.za),dn(ph(t),"userInvalidated",t.Aa),Sl(ph(t))),e&&(e.S.push(t.Ba),hn(e,"tokenChanged",t.ya),hn(e,"userDeleted",t.za),hn(e,"userInvalidated",t.Aa),0<t.u&&El(e)),Jr(t,"currentUser",e),e&&(e.wa(t.la()),bl(e,t),wl(e,t.J),Il(e,t),os(e.a,t.P),_l(e,t))}function hh(t,e){var n=null,r=null;return gh(t,e.then((function(e){return n=qo(e),r=$i(e),function(t,e){var n={};return n.apiKey=fh(t).options.apiKey,n.authDomain=fh(t).options.authDomain,n.appName=fh(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new ml(t,e);return n&&(i.ha=n),r&&wl(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return ph(t)&&e.uid==ph(t).uid?(Ml(ph(t),e),t.da(e)):(lh(t,e),Al(e),t.da(e))})).then((function(){vh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=il(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ti({user:ph(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fh(t){return t.app}function ph(t){return t.currentUser}function dh(t){return ph(t)&&ph(t)._lat||null}function vh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](dh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](dh(t))}}function gh(t,e){return t.R.push(e),e.oa((function(){X(t.R,e)})),e}function yh(){}function mh(){this.a={},this.b=1e12}Xl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Or()&&"none"!==t)throw n}}(t),rh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,$l(n,t)})).then((function(){if(n.c=Zl(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},S(ih,Tn),S(oh,Je),S(ah,Je),S(sh,Je),(t=ih.prototype).xb=function(t){return gh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,is(this.a,this.aa),this.dispatchEvent(new oh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&_r().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,os(this.a,this.P),this.dispatchEvent(new ah(this.P))}},t.Gc=function(t){this.J.push(t),ss(this.a,s.Z.SDK_VERSION?Dr(s.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new sh(this.J))},t.Ga=function(){return Z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:fh(this).options.apiKey,authDomain:fh(this).options.authDomain,appName:fh(this).name,currentUser:ph(this)&&ph(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return hh(i,_s(i.a,o))}))},t.Xc=function(t){if(!xr())return De(new k("operation-not-supported-in-this-environment"));var e=this,n=Xi(t.providerId),r=Vr(),i=null;(!Fr()||Ir())&&fh(this).options.authDomain&&t.isOAuthProvider&&(i=mu(fh(this).options.authDomain,fh(this).options.apiKey,fh(this).name,"signInViaPopup",t,null,r,s.Z.SDK_VERSION||null,null,null,this.T(),this.P));var o=yr(i,n&&n.ua,n&&n.ta);return gh(this,n=uh(this).then((function(n){return Fc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&gr(o),t?ti(t):null})).o((function(t){throw o&&gr(o),t})))},t.Yc=function(t){if(!xr())return De(new k("operation-not-supported-in-this-environment"));var e=this;return gh(this,uh(this).then((function(){return function(t){return rh(t,(function(){return t.b.set(Jl,t.c.F,t.a)}))}(e.i)})).then((function(){return Uc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return ch(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},t.dd=function(t){if(!t)return De(new k("null-user"));if(this.S!=t.tenantId)return De(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=fh(this).options.apiKey,n.authDomain=fh(this).options.authDomain,n.appName=fh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Za]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new ml(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&wl(e,r),Ml(e,t),e}(t,n,e.D,e.Ga());return gh(this,this.h.then((function(){if(fh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ph(e)&&t.uid==ph(e).uid?(Ml(ph(e),t),e.da(t)):(lh(e,r),Al(r),e.da(r))})).then((function(){vh(e)})))},t.Ab=function(){var t=this;return gh(this,this.h.then((function(){return t.b&&Gc(t.b.b),ph(t)?(lh(t,null),eh(t.i).then((function(){vh(t)}))):Ne()})))},t.Zc=function(){var t=this;return nh(this.i,fh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ph(t)&&e){n=ph(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Ml(ph(t),e),ph(t).I();(ph(t)||e)&&(lh(t,e),e&&(Al(e),e.ha=t.D),t.b&&Oc(t.b,t),vh(t))}}))},t.da=function(t){return th(this.i,t)},t.mc=function(){vh(this),this.da(ph(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return hh(e,Ne(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ph(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),gh(t,t.h.then((function(){!t.l&&Y(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(dh(t)))})))}(this,(function(){t.next(ph(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ph(r)):"function"==typeof t.next&&t.next(ph(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(ph(r)):"function"==typeof t.next&&t.next(ph(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return gh(this,this.h.then((function(){return ph(e)?ph(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return hh(e,ru(e.a,$s,{token:t}))})).then((function(t){var n=t.user;return Ll(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return hh(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return hh(n,ru(n.a,Cs,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return hh(e,t.ka(e.a))}))},t.Sc=function(t){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=ph(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return hh(t,t.a.zb()).then((function(e){var n=e.user;return Ll(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ph(this)&&ph(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ph(this)&&El(ph(this))},t.Pc=function(t){var e=this;z(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&ph(this)&&Sl(ph(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),gh(this,this.h.then((function(){e.l||Y(e.s,t)&&t(dh(e))})))},t.removeAuthTokenListener=function(t){$(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Zl("local"),t.a,this.ja),this.b&&(xc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return gh(this,function(t,e){return ru(t,ks,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.wb=function(t,e){var n=this;return gh(this,Ne().then((function(){var t=new Ri(e);if(!t.c)throw new k("argument-error",Li+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return gh(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return gh(this,this.a.Ra(t).then((function(t){return new ci(t)})))},t.jb=function(t){return gh(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return gh(this,Ne().then((function(){return void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return gh(this,Jc(this,t,e,I(this.$a,this)))},t.Vc=function(t,e){var n=this;return gh(this,Ne().then((function(){var r=e||fr(),i=Oo(t,r);if(!(r=xo(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.$a(i)})))},yh.prototype.render=function(){},yh.prototype.reset=function(){},yh.prototype.getResponse=function(){},yh.prototype.execute=function(){};var bh=null;function _h(t,e){return(e=wh(e))&&t.a[e]||null}function wh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ih(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function Th(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Eh(){}function Sh(){}mh.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ih(t,e),this.b++},mh.prototype.reset=function(t){var e=_h(this,t);t=wh(t),e&&t&&(e.delete(),delete this.a[t])},mh.prototype.getResponse=function(t){return(t=_h(this,t))?t.getResponse():null},mh.prototype.execute=function(t){(t=_h(this,t))&&t.execute()},Ih.prototype.getResponse=function(){return Th(this),this.b},Ih.prototype.execute=function(){Th(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Ih.prototype.delete=function(){Th(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Jr(Eh,"FACTOR_ID","phone"),Sh.prototype.g=function(){return bh||(bh=new mh),Ne(bh)},Sh.prototype.c=function(){};var Ch=null;function kh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ah=new _t(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Nh=new Wr(3e4,6e4);kh.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Nh.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},Ne(Wa(At(Ah,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},kh.prototype.c=function(){this.b--};var Dh=null;function Ph(t,e,n,r,i,o,a){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Ch||(Ch=new Sh),a=Ch):(Dh||(Dh=new kh),a=Dh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Lh],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $a(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Rh];this.a[Rh]=function(t){if(Mh(s,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,u);"function"==typeof e&&e(t)}};var l=this.a[Oh];this.a[Oh]=function(){if(Mh(s,null),"function"==typeof l)l();else if("string"==typeof l){var t=Rr(l,u);"function"==typeof t&&t()}}}var Rh="callback",Oh="expired-callback",xh="sitekey",Lh="size";function Mh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Fh(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function jh(t){if(t.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function Uh(t,e,n){var r=!1;try{this.b=n||s.Z.app()}catch(t){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=s.Z.SDK_VERSION?Dr(s.Z.SDK_VERSION,o):null,Ph.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,O(N),r)}function qh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Vh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Vh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=Ph.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Fh(this,Ne().then((function(){if(Lr()&&!Tr())return _r();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,qs,{})})).then((function(e){t.a[xh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){jh(this);var t=this;return Fh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ge(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):he(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){jh(this);var t=this;return Fh(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){jh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){jh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Uh,Ph);var Vh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Wh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function zh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Gh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Hh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Qh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yh(t){return g(t)&&"string"==typeof t.uid}function Xh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $h(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function Jh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){qh(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Zh(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return qh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$h(ih.prototype,{jb:{name:"applyActionCode",j:[Bh("code")]},Ra:{name:"checkActionCode",j:[Bh("code")]},nb:{name:"confirmPasswordReset",j:[Bh("code"),Bh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bh("email"),Bh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Bh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Bh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xh(Wh(),zh(),"nextOrObserver"),zh("opt_error",!0),zh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xh(Wh(),zh(),"nextOrObserver"),zh("opt_error",!0),zh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Bh("email"),Xh(Wh("opt_actionCodeSettings",!0),Gh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Bh("email"),Wh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Bh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Hh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Hh()]},Tc:{name:"signInWithCustomToken",j:[Bh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Bh("email"),Bh("password")]},Vc:{name:"signInWithEmailLink",j:[Bh("email"),Bh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Xh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof ml)}},Gh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Bh("url"),Wh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Bh("code")]}}),Jh(ih.prototype,{lc:{name:"languageCode",kb:Xh(Bh(),Gh(),"languageCode")},ti:{name:"tenantId",kb:Xh(Bh(),Gh(),"tenantId")}}),ih.Persistence=Zu,ih.Persistence.LOCAL="local",ih.Persistence.SESSION="session",ih.Persistence.NONE="none",$h(ml.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Hh()]},qb:{name:"linkWithCredential",j:[Hh()]},Dc:{name:"linkWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Hh()]},tb:{name:"reauthenticateWithCredential",j:[Hh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Xh(Wh("opt_actionCodeSettings",!0),Gh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bh(null,!0)]},cd:{name:"unlink",j:[Bh("provider")]},Bb:{name:"updateEmail",j:[Bh("email")]},Cb:{name:"updatePassword",j:[Bh("password")]},ed:{name:"updatePhoneNumber",j:[Hh("phone")]},Db:{name:"updateProfile",j:[Wh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Bh("email"),Xh(Wh("opt_actionCodeSettings",!0),Gh(null,!0),"opt_actionCodeSettings",!0)]}}),$h(mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(yh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Jh(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Kh("appVerificationDisabledForTesting")}}),$h($c.prototype,{confirm:{name:"confirm",j:[Bh("verificationCode")]}}),Zh(lo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,Po,Mo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Xh(Bh(),Wh(),"json")]),Zh(Ro,"credential",(function(t,e){return new Do(t,e)}),[Bh("email"),Bh("password")]),$h(Do.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),$h(Io.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Zh(Io,"credential",To,[Xh(Bh(),Wh(),"token")]),Zh(Ro,"credentialWithLink",Oo,[Bh("email"),Bh("emailLink")]),$h(Eo.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Zh(Eo,"credential",So,[Xh(Bh(),Wh(),"token")]),$h(Co.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Zh(Co,"credential",ko,[Xh(Bh(),Xh(Wh(),Gh()),"idToken"),Xh(Bh(),Gh(),"accessToken",!0)]),$h(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Zh(Ao,"credential",No,[Xh(Bh(),Wh(),"token"),Bh("secret",!0)]),$h(wo.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},credential:{name:"credential",j:[Xh(Bh(),Xh(Wh(),Gh()),"optionsOrIdToken"),Xh(Bh(),Gh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),$h(go.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),$h(fo.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Zh(jo,"credential",Uo,[Bh("verificationId"),Bh("verificationCode")]),$h(jo.prototype,{fb:{name:"verifyPhoneNumber",j:[Xh(Bh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Qh(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Qh(t.session,co)&&Yh(t.multiFactorHint):t.session&&t.multiFactorUid?Qh(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),$h(Lo.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),$h(k.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),$h(Qo.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),$h(Ho.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),$h(rl.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),$h(tl.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),$h(cl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Bh("displayName",!0)]},bd:{name:"unenroll",j:[Xh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yh},Bh(),"multiFactorInfoIdentifier")]}}),$h(Uh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zh(Ti,"parseLink",Pi,[Bh("link")]),Zh(Eh,"assertion",(function(t){return new sl(t)}),[Hh("phone")]),function(){if(void 0===s.Z||!s.Z.INTERNAL||!s.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ih,AuthCredential:lo,Error:k};Zh(t,"EmailAuthProvider",Ro,[]),Zh(t,"FacebookAuthProvider",Io,[]),Zh(t,"GithubAuthProvider",Eo,[]),Zh(t,"GoogleAuthProvider",Co,[]),Zh(t,"TwitterAuthProvider",Ao,[]),Zh(t,"OAuthProvider",wo,[Bh("providerId")]),Zh(t,"SAMLAuthProvider",_o,[Bh("providerId")]),Zh(t,"PhoneAuthProvider",jo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ih)}}]),Zh(t,"RecaptchaVerifier",Uh,[Xh(Bh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Wh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof s.Z.app.App)}}]),Zh(t,"ActionCodeURL",Ti,[]),Zh(t,"PhoneMultiFactorGenerator",Eh,[]),s.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ih(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),s.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),s.Z.registerVersion("@firebase/auth","0.16.4"),s.Z.INTERNAL.extendNamespace({User:ml})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n(790);var u=n(594),c=n(448),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function h(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var f,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},d=d||{},v=p||self;function g(){}function y(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var b="closure_uid_"+(1e9*Math.random()>>>0),_=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function I(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function T(t,e,n){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:I).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function S(){return Date.now()}function C(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function k(){this.j=this.j,this.i=this.i}k.prototype.j=!1,k.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++_)}(this)},k.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var A=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},N=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function D(t){return Array.prototype.concat.apply([],arguments)}function P(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function R(t){return/^[\s\xa0]*$/.test(t)}var O,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function L(t,e){return-1!=t.indexOf(e)}function M(t,e){return t<e?-1:t>e?1:0}t:{var F=v.navigator;if(F){var j=F.userAgent;if(j){O=j;break t}}O=""}function U(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function q(t){var e={};for(var n in t)e[n]=t[n];return e}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<V.length;o++)n=V[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function K(t){return K[" "](t),t}K[" "]=g;var W,z,G=L(O,"Opera"),H=L(O,"Trident")||L(O,"MSIE"),Q=L(O,"Edge"),Y=Q||H,X=L(O,"Gecko")&&!(L(O.toLowerCase(),"webkit")&&!L(O,"Edge"))&&!(L(O,"Trident")||L(O,"MSIE"))&&!L(O,"Edge"),$=L(O.toLowerCase(),"webkit")&&!L(O,"Edge");function J(){var t=v.document;return t?t.documentMode:void 0}t:{var Z="",tt=(z=O,X?/rv:([^\);]+)(\)|;)/.exec(z):Q?/Edge\/([\d\.]+)/.exec(z):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(z):$?/WebKit\/(\S+)/.exec(z):G?/(?:Version)[ \/]?(\S+)/.exec(z):void 0);if(tt&&(Z=tt?tt[1]:""),H){var et=J();if(null!=et&&et>parseFloat(Z)){W=String(et);break t}}W=Z}var nt,rt={};function it(t){return function(t,e){var n=rt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=x(String(W)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}v.document&&H?nt=J()||parseInt(W,10)||void 0:nt=void 0;var ot=nt,at=!H||9<=Number(ot),st=H&&!it("9"),ut=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{v.addEventListener("test",g,e),v.removeEventListener("test",g,e)}catch(t){}return t}();function ct(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function lt(t,e){if(ct.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(X){t:{try{K(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ht[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ct.prototype.b=function(){this.defaultPrevented=!0},C(lt,ct);var ht={2:"touch",3:"pen",4:"mouse"};lt.prototype.b=function(){lt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,st)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ft="closure_listenable_"+(1e6*Math.random()|0),pt=0;function dt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++pt,this.Y=this.Z=!1}function vt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function gt(t){this.src=t,this.a={},this.b=0}function yt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=A(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(vt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function mt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}gt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=mt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new dt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var bt="closure_lm_"+(1e6*Math.random()|0),_t={};function wt(t,e,n,r,i){if(r&&r.once)return Tt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);return null}return n=Pt(n),t&&t[ft]?t.va(e,n,m(r)?!!r.capture:!!r,i):It(t,e,n,!1,r,i)}function It(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i;if(a&&!at)return null;var s=Nt(t);if(s||(t[bt]=s=new gt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=At,e=at?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ut||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ct(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Tt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Tt(t,e[o],n,r,i);return null}return n=Pt(n),t&&t[ft]?t.wa(e,n,m(r)?!!r.capture:!!r,i):It(t,e,n,!0,r,i)}function Et(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Et(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=Pt(n),t&&t[ft]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=mt(o=t.a[e],n,r,i))&&(vt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Nt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=mt(e,n,r,i)),(n=-1<t?e[t]:null)&&St(n))}function St(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ft])yt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ct(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nt(e))?(yt(n,t),0==n.b&&(n.src=null,e[bt]=null)):vt(t)}}}function Ct(t){return t in _t?_t[t]:_t[t]="on"+t}function kt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&St(t),n.call(r,e)}function At(t,e){if(t.Y)return!0;if(!at){if(!e)t:{e=["window","event"];for(var n=v,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return kt(t,e=new lt(e,this))}return kt(t,new lt(e,this))}function Nt(t){return(t=t[bt])instanceof gt?t:null}var Dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pt(t){return"function"==typeof t?t:(t[Dt]||(t[Dt]=function(e){return t.handleEvent(e)}),t[Dt])}function Rt(){k.call(this),this.c=new gt(this),this.J=this,this.C=null}function Ot(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ct(e,t);else if(e instanceof ct)e.target=e.target||t;else{var i=e;B(e=new ct(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=xt(a,r,!0,e)&&i}if(i=xt(a=e.a=t,r,!0,e)&&i,i=xt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=xt(a=e.a=n[o],r,!1,e)&&i}function xt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&yt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}C(Rt,k),Rt.prototype[ft]=!0,(f=Rt.prototype).addEventListener=function(t,e,n,r){wt(this,t,e,n,r)},f.removeEventListener=function(t,e,n,r){Et(this,t,e,n,r)},f.G=function(){if(Rt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)vt(n[r]);delete e.a[t],e.b--}}this.C=null},f.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},f.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Lt=v.JSON.stringify;function Mt(){this.b=this.a=null}var Ft,jt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new qt}),(function(t){t.reset()}));function Ut(){var t=Wt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function qt(){this.next=this.b=this.a=null}function Vt(t){v.setTimeout((function(){throw t}),0)}function Bt(t,e){Ft||function(){var t=v.Promise.resolve(void 0);Ft=function(){t.then(zt)}}(),Kt||(Ft(),Kt=!0),Wt.add(t,e)}Mt.prototype.add=function(t,e){var n=jt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},qt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},qt.prototype.reset=function(){this.next=this.b=this.a=null};var Kt=!1,Wt=new Mt;function zt(){for(var t;t=Ut();){try{t.a.call(t.b)}catch(t){Vt(t)}var e=jt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Kt=!1}function Gt(t,e){Rt.call(this),this.b=t||1,this.a=e||v,this.f=T(this.Za,this),this.g=S()}function Ht(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Qt(t,e,n){if("function"==typeof t)n&&(t=T(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=T(t.handleEvent,t)}return 2147483647<Number(e)?-1:v.setTimeout(t,e||0)}function Yt(t){t.a=Qt((function(){t.a=null,t.c&&(t.c=!1,Yt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}C(Gt,Rt),(f=Gt.prototype).aa=!1,f.M=null,f.Za=function(){if(this.aa){var t=S()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ot(this,"tick"),this.aa&&(Ht(this),this.start()))}},f.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=S())},f.G=function(){Gt.X.G.call(this),Ht(this),delete this.a};var Xt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Yt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(v.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(k);function $t(t){k.call(this),this.b=t,this.a={}}C($t,k);var Jt=[];function Zt(t,e,n,r){Array.isArray(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var o=wt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function te(t){U(t.a,(function(t,e){this.a.hasOwnProperty(e)&&St(t)}),t),t.a={}}function ee(){this.a=!0}function ne(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Lt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}$t.prototype.G=function(){$t.X.G.call(this),te(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.info=function(){};var re={},ie=null;function oe(){return ie=ie||new Rt}function ae(t){ct.call(this,re.Fa,t)}function se(t){var e=oe();Ot(e,new ae(e,t))}function ue(t,e){ct.call(this,re.STAT_EVENT,t),this.stat=e}function ce(t){var e=oe();Ot(e,new ue(e,t))}function le(t){ct.call(this,re.Ga,t)}function he(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return v.setTimeout((function(){t()}),e)}re.Fa="serverreachability",C(ae,ct),re.STAT_EVENT="statevent",C(ue,ct),re.Ga="timingevent",C(le,ct);var fe={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},pe={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function de(){}function ve(t){var e;return(e=t.a)||(e=t.a={}),e}function ge(){}de.prototype.a=null;var ye,me={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function be(){ct.call(this,"d")}function _e(){ct.call(this,"c")}function we(){}function Ie(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new $t(this),this.P=Te,t=Y?125:void 0,this.R=new Gt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}C(be,ct),C(_e,ct),C(we,de),ye=new we;var Te=45e3,Ee={},Se={};function Ce(t,e,n){t.H=1,t.i=Qe(Be(e)),t.j=n,t.I=!0,ke(t,null)}function ke(t,e){t.u=S(),De(t),t.l=Be(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),un(n.b,"t",r),t.D=0,t.a=nr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Xt(T(t.Ca,t,t.a),t.O)),Zt(t.J,t.a,"readystatechange",t.Xa),e=t.B?q(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),se(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ae(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ne(t,n);if(i==Se){4==e&&(t.h=4,ce(14),r=!1),ne(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ee){t.h=4,ce(15),ne(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ne(t.c,t.f,i,null),Le(t,i)}4==e&&0==n.length&&(t.h=1,ce(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qn(e),e.F=!0,ce(11))):(ne(t.c,t.f,n,"[Invalid Chunked Response]"),xe(t),Oe(t))}function Ne(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Se:(n=Number(e.substring(n,r)),isNaN(n)?Ee:(r+=1)+n>e.length?Se:(e=e.substr(r,n),t.D=r+n,e))}function De(t){t.T=S()+t.P,Pe(t,t.P)}function Pe(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=he(T(t.Va,t),e)}function Re(t){t.o&&(v.clearTimeout(t.o),t.o=null)}function Oe(t){0==t.g.v||t.A||$n(t.g,t)}function xe(t){Re(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ht(t.R),te(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Le(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||vn(n.b,t)))if(n.I=t.N,!t.C&&vn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Xn(n),Un(n)}Hn(n),ce(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=he(T(n.Sa,n),6e3));if(1>=dn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Zn(n,11)}else if((t.C||n.a==t)&&Xn(n),!R(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(L(l,"spdy")||L(l,"quic")||L(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(gn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,He(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=S()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=er(u,u.C?u.ga:null,u.fa),p.C){yn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Re(d),De(d)),u.a=p}else Gn(u);0<n.g.length&&Bn(n)}else"stop"!=i[0]&&"close"!=i[0]||Zn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Zn(n,7):jn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);se(4)}catch(t){}}function Me(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(y(t)||"string"==typeof t)N(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(y(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(y(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Fe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function je(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ue(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ue(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(f=Ie.prototype).setTimeout=function(t){this.P=t},f.Xa=function(t){t=t.target;var e=this.F;e&&3==xn(t)?e.f():this.Ca(t)},f.Ca=function(t){try{if(t==this.a)t:{var e=xn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Y&&!this.a.$())){this.A||4!=e||7==n||se(8==n||0>=r?3:2),Re(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,ce(12),xe(this),Oe(this);break t}ne(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Le(this,u)}this.I?(Ae(this,e,o),Y&&this.b&&3==e&&(Zt(this.J,this.R,"tick",this.Wa),this.R.start())):(ne(this.c,this.f,o,null),Le(this,o)),4==e&&xe(this),this.b&&!this.A&&(4==e?$n(this.g,this):(this.b=!1,De(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ce(12)):(this.h=0,ce(13)),xe(this),Oe(this)}}}catch(t){}},f.Wa=function(){if(this.a){var t=xn(this.a),e=this.a.$();this.D<e.length&&(Re(this),Ae(this,t,e),this.b&&4!=t&&De(this))}},f.cancel=function(){this.A=!0,xe(this)},f.Va=function(){this.o=null;var t=S();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(se(3),ce(17)),xe(this),this.h=2,Oe(this)):Pe(this,this.T-t)},(f=Fe.prototype).K=function(){je(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},f.L=function(){return je(this),this.a.concat()},f.get=function(t,e){return Ue(this.b,t)?this.b[t]:e},f.set=function(t,e){Ue(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},f.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ve){this.a=void 0!==e?e:t.a,Ke(this,t.f),this.j=t.j,We(this,t.c),ze(this,t.h),this.g=t.g,e=t.b;var n=new rn;n.c=e.c,e.a&&(n.a=new Fe(e.a),n.b=e.b),Ge(this,n),this.i=t.i}else t&&(n=String(t).match(qe))?(this.a=!!e,Ke(this,n[1]||"",!0),this.j=Ye(n[2]||""),We(this,n[3]||"",!0),ze(this,n[4]),this.g=Ye(n[5]||"",!0),Ge(this,n[6]||"",!0),this.i=Ye(n[7]||"")):(this.a=!!e,this.b=new rn(null,this.a))}function Be(t){return new Ve(t)}function Ke(t,e,n){t.f=n?Ye(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function We(t,e,n){t.c=n?Ye(e,!0):e}function ze(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ge(t,e,n){e instanceof rn?(t.b=e,function(t,e){e&&!t.f&&(on(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(an(this,e),un(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Xe(e,en)),t.b=new rn(e,t.a))}function He(t,e,n){t.b.set(e,n)}function Qe(t){return He(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^S()).toString(36)),t}function Ye(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$e),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $e(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ve.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Xe(e,Je,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Xe(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Xe(n,"/"==n.charAt(0)?tn:Ze,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Xe(n,nn)),t.join("")};var Je=/[#\/\?@]/g,Ze=/[#\?:]/g,tn=/[#\?]/g,en=/[#\?@]/g,nn=/#/g;function rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function on(t){t.a||(t.a=new Fe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function an(t,e){on(t),e=cn(t,e),Ue(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ue((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&je(t)))}function sn(t,e){return on(t),e=cn(t,e),Ue(t.a.b,e)}function un(t,e,n){an(t,e),0<n.length&&(t.c=null,t.a.set(cn(t,e),P(n)),t.b+=n.length)}function cn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(f=rn.prototype).add=function(t,e){on(this),this.c=null,t=cn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},f.forEach=function(t,e){on(this),this.a.forEach((function(n,r){N(n,(function(n){t.call(e,n,r,this)}),this)}),this)},f.L=function(){on(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},f.K=function(t){on(this);var e=[];if("string"==typeof t)sn(this,t)&&(e=D(e,this.a.get(cn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=D(e,t[n])}return e},f.set=function(t,e){return on(this),this.c=null,sn(this,t=cn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},f.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},f.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ln=function(t,e){this.b=t,this.a=e};function hn(t){this.g=t||fn,t=v.PerformanceNavigationTiming?0<(t=v.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(v.ia&&v.ia.ya&&v.ia.ya()&&v.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var fn=10;function pn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function dn(t){return t.b?1:t.a?t.a.size:0}function vn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function gn(t,e){t.a?t.a.add(e):t.b=e}function yn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function mn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=h(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return P(t.c)}function bn(){}function _n(){this.a=new bn}function wn(t,e,n){var r=n||"";try{Me(t,(function(t,n){var i=t;m(t)&&(i=Lt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function In(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}hn.prototype.cancel=function(){var t,e;if(this.c=mn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=h(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},bn.prototype.stringify=function(t){return v.JSON.stringify(t,void 0)},bn.prototype.parse=function(t){return v.JSON.parse(t,void 0)};var Tn=v.JSON.parse;function En(t){Rt.call(this),this.headers=new Fe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Sn,this.D=this.F=!1}C(En,Rt);var Sn="",Cn=/^https?$/i,kn=["POST","PUT"];function An(t){return"content-type"==t.toLowerCase()}function Nn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Dn(t),Rn(t)}function Dn(t){t.u||(t.u=!0,Ot(t,"complete"),Ot(t,"error"))}function Pn(t){if(t.b&&void 0!==d&&(!t.s[1]||4!=xn(t)||2!=t.W()))if(t.l&&4==xn(t))Qt(t.za,0,t);else if(Ot(t,"readystatechange"),4==xn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(qe)[1]||null;if(!o&&v.self&&v.self.location){var a=v.self.location.protocol;o=a.substr(0,a.length-1)}i=!Cn.test(o?o.toLowerCase():"")}e=i}if(e)Ot(t,"complete"),Ot(t,"success");else{t.h=6;try{var s=2<xn(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Dn(t)}}finally{Rn(t)}}}function Rn(t,e){if(t.a){On(t);var n=t.a,r=t.s[0]?g:null;t.a=null,t.s=null,e||Ot(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function On(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(v.clearTimeout(t.m),t.m=null)}function xn(t){return t.a?t.a.readyState:0}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return U(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):He(t,e,n))}function Mn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fn(t){this.pa=0,this.g=[],this.c=new ee,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Mn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Mn("baseRetryDelayMs",5e3,t),this.Ra=Mn("retryDelaySeedMs",1e4,t),this.Ma=Mn("forwardChannelMaxRetries",2,t),this.ma=Mn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new hn(t&&t.concurrentRequestLimit),this.ka=new _n,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function jn(t){if(qn(t),3==t.v){var e=t.R++,n=Be(t.B);He(n,"SID",t.J),He(n,"RID",e),He(n,"TYPE","terminate"),Wn(t,n),(e=new Ie(t,t.c,e,void 0)).H=2,e.i=Qe(Be(n)),n=!1,v.navigator&&v.navigator.sendBeacon&&(n=v.navigator.sendBeacon(e.i.toString(),"")),!n&&v.Image&&((new Image).src=e.i,n=!0),n||(e.a=nr(e.g,null),e.a.ba(e.i)),e.u=S(),De(e)}tr(t)}function Un(t){t.a&&(Qn(t),t.a.cancel(),t.a=null)}function qn(t){Un(t),t.j&&(v.clearTimeout(t.j),t.j=null),Xn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&v.clearTimeout(t.h),t.h=null)}function Vn(t,e){t.g.push(new ln(t.Oa++,e)),3==t.v&&Bn(t)}function Bn(t){pn(t.b)||t.h||(t.h=!0,Bt(t.Ba,t),t.u=0)}function Kn(t,e){var n;n=e?e.f:t.R++;var r=Be(t.B);He(r,"SID",t.J),He(r,"RID",n),He(r,"AID",t.P),Wn(t,r),t.i&&t.l&&Ln(r,t.i,t.l),n=new Ie(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=zn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),gn(t.b,n),Ce(n,r,e)}function Wn(t,e){t.f&&Me({},(function(t,n){He(e,n,t)}))}function zn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?T(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{wn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Gn(t){t.a||t.j||(t.T=1,Bt(t.Aa,t),t.o=0)}function Hn(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=he(T(t.Aa,t),Jn(t,t.o)),t.o++,0))}function Qn(t){null!=t.s&&(v.clearTimeout(t.s),t.s=null)}function Yn(t){t.a=new Ie(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Be(t.la);He(e,"RID","rpc"),He(e,"SID",t.J),He(e,"CI",t.H?"0":"1"),He(e,"AID",t.P),Wn(t,e),He(e,"TYPE","xmlhttp"),t.i&&t.l&&Ln(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Qe(Be(e)),n.j=null,n.I=!0,ke(n,t)}function Xn(t){null!=t.m&&(v.clearTimeout(t.m),t.m=null)}function $n(t,e){var n=null;if(t.a==e){Xn(t),Qn(t),t.a=null;var r=2}else{if(!vn(t.b,e))return;n=e.s,yn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=S()-e.u;var i=t.u;Ot(r=oe(),new le(r,n,e,i)),Bn(t)}else Gn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(dn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=he(T(t.Ba,t,e),Jn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Hn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Zn(t,5);break;case 4:Zn(t,10);break;case 3:Zn(t,6);break;default:Zn(t,2)}}function Jn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Zn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=T(t.Ya,t);n||(n=new Ve("//www.google.com/images/cleardot.gif"),v.location&&"http"==v.location.protocol||Ke(n,"https"),Qe(n)),function(t,e){var n=new ee;if(v.Image){var r=new Image;r.onload=E(In,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(In,n,r,"TestLoadImage: error",!1,e),r.onabort=E(In,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(In,n,r,"TestLoadImage: timeout",!1,e),v.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ce(2);t.v=0,t.f&&t.f.ra(e),tr(t),qn(t)}function tr(t){t.v=0,t.I=-1,t.f&&(0==mn(t.b).length&&0==t.g.length||(t.b.c.length=0,P(t.g),t.g.length=0),t.f.qa())}function er(t,e,n){var r=function(t){return t instanceof Ve?Be(t):new Ve(t,void 0)}(n);if(""!=r.c)e&&We(r,e+"."+r.c),ze(r,r.h);else{var i=v.location;r=function(t,e,n,r){var i=new Ve(null,void 0);return t&&Ke(i,t),e&&We(i,e),n&&ze(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&U(t.V,(function(t,e){He(r,e,t)})),e=t.A,n=t.na,e&&n&&He(r,e,n),He(r,"VER",t.ha),Wn(t,r),r}function nr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(t.Na)).F=t.C,e}function rr(){}function ir(){if(H&&!(10<=Number(ot)))throw Error("Environmental error: no available transport.")}function or(t,e){Rt.call(this),this.a=new Fn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!R(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!R(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ur(this)}function ar(t){be.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function sr(){_e.call(this),this.status=1}function ur(t){this.a=t}(f=En.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ve(this.H):ve(ye),this.a.onreadystatechange=T(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Nn(this,t)}t=n||"";var i=new Fe(this.headers);r&&Me(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=An,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=v.FormData&&t instanceof v.FormData,!(0<=A(kn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(t){return H&&it(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=T(this.xa,this)):this.m=Qt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Nn(this,t)}},f.xa=function(){void 0!==d&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ot(this,"timeout"),this.abort(8))},f.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ot(this,"complete"),Ot(this,"abort"),Rn(this))},f.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Rn(this,!0)),En.X.G.call(this)},f.za=function(){this.j||(this.A||this.l||this.g?Pn(this):this.Ua())},f.Ua=function(){Pn(this)},f.W=function(){try{return 2<xn(this)?this.a.status:-1}catch(t){return-1}},f.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},f.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Tn(e)}},f.ua=function(){return this.h},f.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(f=Fn.prototype).ha=8,f.v=1,f.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ie(this,this.c,t,void 0),r=this.l;if(this.O&&(r?B(r=q(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=zn(this,n,e),He(i=Be(this.B),"RID",t),He(i,"CVER",22),this.A&&He(i,"X-HTTP-Session-Id",this.A),Wn(this,i),this.i&&r&&Ln(i,this.i,r),gn(this.b,n),this.Ia&&He(i,"TYPE","init"),this.da?(He(i,"$req",e),He(i,"SID","null"),n.U=!0,Ce(n,i,null)):Ce(n,i,e),this.v=2}}else 3==this.v&&(t?Kn(this,t):0==this.g.length||pn(this.b)||Kn(this))},f.Aa=function(){if(this.j=null,Yn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=he(T(this.Ta,this),t)}},f.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ce(10),Un(this),Yn(this))},f.Sa=function(){null!=this.m&&(this.m=null,Un(this),Hn(this),ce(19))},f.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ce(2)):(this.c.info("Failed to ping google.com"),ce(1))},(f=rr.prototype).ta=function(){},f.sa=function(){},f.ra=function(){},f.qa=function(){},f.Ja=function(){},ir.prototype.a=function(t,e){return new or(t,e)},C(or,Rt),or.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ce(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=er(t,null,t.fa),Bn(t)},or.prototype.close=function(){jn(this.a)},or.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Vn(this.a,e)}else this.l?((e={}).__data__=Lt(t),Vn(this.a,e)):Vn(this.a,t)},or.prototype.G=function(){this.a.f=null,delete this.f,jn(this.a),delete this.a,or.X.G.call(this)},C(ar,be),C(sr,_e),C(ur,rr),ur.prototype.ta=function(){Ot(this.a,"a")},ur.prototype.sa=function(t){Ot(this.a,new ar(t))},ur.prototype.ra=function(t){Ot(this.a,new sr(t))},ur.prototype.qa=function(){Ot(this.a,"b")},ir.prototype.createWebChannel=ir.prototype.a,or.prototype.send=or.prototype.h,or.prototype.open=or.prototype.g,or.prototype.close=or.prototype.close,fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,pe.COMPLETE="complete",ge.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",Rt.prototype.listen=Rt.prototype.va,En.prototype.listenOnce=En.prototype.wa,En.prototype.getLastError=En.prototype.Qa,En.prototype.getLastErrorCode=En.prototype.ua,En.prototype.getStatus=En.prototype.W,En.prototype.getResponseJson=En.prototype.Pa,En.prototype.getResponseText=En.prototype.$,En.prototype.send=En.prototype.ba;var cr=fe,lr=pe,hr=re,fr=10,pr=11,dr=ge,vr=En,gr=function(t,e){return(gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function yr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}gr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function mr(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function br(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function _r(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var wr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();wr.o=-1;var Ir=new u.Yd("@firebase/firestore");function Tr(){return Ir.logLevel}function Er(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ir.logLevel<=u.in.DEBUG){var r=e.map(kr);Ir.debug.apply(Ir,_r(["Firestore (8.3.1): "+t],r))}}function Sr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ir.logLevel<=u.in.ERROR){var r=e.map(kr);Ir.error.apply(Ir,_r(["Firestore (8.3.1): "+t],r))}}function Cr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ir.logLevel<=u.in.WARN){var r=e.map(kr);Ir.warn.apply(Ir,_r(["Firestore (8.3.1): "+t],r))}}function kr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Ar(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw Sr(e),new Error(e)}function Nr(t,e){t||Ar()}function Dr(t,e){return t}function Pr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Pr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Or(t,e){return t<e?-1:t>e?1:0}function xr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Lr(t){return t+"\0"}function Mr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ur(t){return null==t}function qr(t){return 0===t&&1/t==-1/0}function Vr(t){return"number"==typeof t&&Number.isInteger(t)&&!qr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Br={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Kr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return yr(e,t),e}(Error),Wr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ar(),void 0===n?n=t.length-e:n>t.length-e&&Ar(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Kr(Br.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Wr),Gr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Gr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Kr(Br.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Kr(Br.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Kr(Br.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Kr(Br.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Wr),Qr=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(zr.fromString(e))},t.fromName=function(e){return new t(zr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===zr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return zr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new zr(e.slice()))},t}(),Yr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Or(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Yr.EMPTY_BYTE_STRING=new Yr("");var Xr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(Nr(!!t),"string"==typeof t){var e=0,n=Xr.exec(t);if(Nr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Jr(t.seconds),nanos:Jr(t.nanos)}}function Jr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zr(t){return"string"==typeof t?Yr.fromBase64String(t):Yr.fromUint8Array(t)}var ti=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Kr(Br.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Kr(Br.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Kr(Br.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Kr(Br.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Or(this.nanoseconds,t.nanoseconds):Or(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function ei(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ni(t){var e=t.mapValue.fields.__previous_value__;return ei(e)?ni(e):e}function ri(t){var e=$r(t.mapValue.fields.__local_write_time__.timestampValue);return new ti(e.seconds,e.nanos)}function ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ei(t)?4:10:Ar()}function oi(t,e){var n=ii(t);if(n!==ii(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ri(t).isEqual(ri(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$r(t.timestampValue),r=$r(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zr(t.bytesValue).isEqual(Zr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Jr(t.geoPointValue.latitude)===Jr(e.geoPointValue.latitude)&&Jr(t.geoPointValue.longitude)===Jr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Jr(t.integerValue)===Jr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Jr(t.doubleValue),r=Jr(e.doubleValue);return n===r?qr(n)===qr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return xr(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Mr(n)!==Mr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!oi(n[i],r[i])))return!1;return!0}(t,e);default:return Ar()}}function ai(t,e){return void 0!==(t.values||[]).find((function(t){return oi(t,e)}))}function si(t,e){var n=ii(t),r=ii(e);if(n!==r)return Or(n,r);switch(n){case 0:return 0;case 1:return Or(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Jr(t.integerValue||t.doubleValue),r=Jr(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ui(t.timestampValue,e.timestampValue);case 4:return ui(ri(t),ri(e));case 5:return Or(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Zr(t),r=Zr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Or(n[i],r[i]);if(0!==o)return o}return Or(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Or(Jr(t.latitude),Jr(e.latitude));return 0!==n?n:Or(Jr(t.longitude),Jr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=si(n[i],r[i]);if(o)return o}return Or(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Or(r[a],o[a]);if(0!==s)return s;var u=si(n[r[a]],i[o[a]]);if(0!==u)return u}return Or(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ar()}}function ui(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Or(t,e);var n=$r(t),r=$r(e),i=Or(n.seconds,r.seconds);return 0!==i?i:Or(n.nanos,r.nanos)}function ci(t){return li(t)}function li(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$r(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Qr.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=li(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+li(t.fields[o])}return e+"}"}(t.mapValue):Ar();var e,n}function hi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function fi(t){return!!t&&"integerValue"in t}function pi(t){return!!t&&"arrayValue"in t}function di(t){return!!t&&"nullValue"in t}function vi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gi(t){return!!t&&"mapValue"in t}var yi=function(t,e){this.key=t,this.version=e},mi=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return yr(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(yi),bi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return yr(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(yi),_i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(yi),wi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Ii(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new wi(t,e,n,r,i,o,a)}function Ti(t){var e=Dr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ci(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Ur(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Mi(e.startAt)),e.endAt&&(n+="|ub:",n+=Mi(e.endAt)),e.h=n}return e.h}function Ei(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ji(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!oi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qi(t.startAt,e.startAt)&&qi(t.endAt,e.endAt)}function Si(t){return Qr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ci=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return yr(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ki(t,n,r):"array-contains"===n?new Pi(t,r):"in"===n?new Ri(t,r):"not-in"===n?new Oi(t,r):"array-contains-any"===n?new xi(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ai(t,n):new Ni(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(si(e,this.value)):null!==e&&ii(this.value)===ii(e)&&this.m(si(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ar()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),ki=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Qr.fromName(r.referenceValue),i}return yr(e,t),e.prototype.matches=function(t){var e=Qr.comparator(t.key,this.key);return this.m(e)},e}(Ci),Ai=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Di(0,n),r}return yr(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ci),Ni=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Di(0,n),r}return yr(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ci);function Di(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Qr.fromName(t.referenceValue)}))}var Pi=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return yr(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return pi(e)&&ai(e.arrayValue,this.value)},e}(Ci),Ri=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return yr(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ai(this.value.arrayValue,e)},e}(Ci),Oi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return yr(e,t),e.prototype.matches=function(t){if(ai(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ai(this.value.arrayValue,e)},e}(Ci),xi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return yr(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!pi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ai(e.value.arrayValue,t)}))},e}(Ci),Li=function(t,e){this.position=t,this.before=e};function Mi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ci(t)})).join(",")}var Fi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ji(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ui(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Qr.comparator(Qr.fromName(a.referenceValue),n.key):si(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function qi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}var Vi=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Bi(t,e,n,r,i,o,a,s){return new Vi(t,e,n,r,i,o,a,s)}function Ki(t){return new Vi(t)}function Wi(t){return!Ur(t.limit)&&"F"===t.limitType}function zi(t){return!Ur(t.limit)&&"L"===t.limitType}function Gi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Hi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Qi(t){return null!==t.collectionGroup}function Yi(t){var e=Dr(t);if(null===e.p){e.p=[];var n=Hi(e),r=Gi(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Fi(n)),e.p.push(new Fi(Hr.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Fi(Hr.keyField(),u))}}}return e.p}function Xi(t){var e=Dr(t);if(!e.T)if("F"===e.limitType)e.T=Ii(e.path,e.collectionGroup,Yi(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Yi(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Fi(o.field,a))}var s=e.endAt?new Li(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Li(e.startAt.position,!e.startAt.before):null;e.T=Ii(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function $i(t,e,n){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ji(t,e){return Ei(Xi(t),Xi(e))&&t.limitType===e.limitType}function Zi(t){return Ti(Xi(t))+"|lt:"+t.limitType}function to(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ci(e.value);var e})).join(", ")+"]"),Ur(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Mi(t.startAt)),t.endAt&&(e+=", endAt: "+Mi(t.endAt)),"Target("+e+")"}(Xi(t))+"; limitType="+t.limitType+")"}function eo(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Qr.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ui(t.startAt,Yi(t),e)||t.endAt&&Ui(t.endAt,Yi(t),e))}(t,e)}function no(t){return function(e,n){for(var r=!1,i=0,o=Yi(t);i<o.length;i++){var a=o[i],s=ro(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function ro(t,e,n){var r=t.field.isKeyField()?Qr.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?si(r,i):Ar()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ar()}}var io=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ti(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),oo=function(){function t(t){this.fields=t,t.sort(Hr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return xr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ao=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!gi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return oi(this.proto,t.proto)},t}(),so=function(){function t(t){void 0===t&&(t=ao.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ii(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(Hr.emptyPath(),this.A);return null!=t?new ao(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=gi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.P(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function uo(t){var e=[];return Fr(t.fields||{},(function(t,n){var r=new Hr([t]);if(gi(n)){var i=uo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new oo(e)}function co(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qr(e)?"-0":e}}function lo(t){return{integerValue:""+t}}function ho(t,e){return Vr(e)?lo(e):co(t,e)}var fo=function(){this._=void 0};function po(t,e,n){return t instanceof yo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof mo?bo(t,e):t instanceof _o?wo(t,e):function(t,e){var n=go(t,e),r=To(n)+To(t.S);return fi(n)&&fi(t.S)?lo(r):co(t.D,r)}(t,e)}function vo(t,e,n){return t instanceof mo?bo(t,e):t instanceof _o?wo(t,e):n}function go(t,e){return t instanceof Io?fi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e}(fo),mo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return yr(e,t),e}(fo);function bo(t,e){for(var n=Eo(e),r=function(t){n.some((function(e){return oi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var _o=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return yr(e,t),e}(fo);function wo(t,e){for(var n=Eo(e),r=function(t){n=n.filter((function(e){return!oi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Io=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return yr(e,t),e}(fo);function To(t){return Jr(t.integerValue||t.doubleValue)}function Eo(t){return pi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var So=function(t,e){this.field=t,this.transform=e},Co=function(t,e){this.version=t,this.transformResults=e},ko=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ao(t,e){return void 0!==t.updateTime?e instanceof mi&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof mi}var No=function(){};function Do(t,e,n){return t instanceof Lo?function(t,e,n){var r=t.value,i=jo(t.fieldTransforms,e,n.transformResults);return r=qo(t.fieldTransforms,r,i),new mi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Mo?function(t,e,n){if(!Ao(t.precondition,e))return new _i(t.key,n.version);var r=Fo(t,e,jo(t.fieldTransforms,e,n.transformResults));return new mi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new bi(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Po(t,e,n){return t instanceof Lo?function(t,e,n){if(!Ao(t.precondition,e))return e;var r=t.value,i=Uo(t.fieldTransforms,n,e);r=qo(t.fieldTransforms,r,i);var o=xo(e);return new mi(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof Mo?function(t,e,n){if(!Ao(t.precondition,e))return e;var r=xo(e),i=Fo(t,e,Uo(t.fieldTransforms,n,e));return new mi(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Ao(t.precondition,e)?new bi(t.key,io.min()):e}(t,e)}function Ro(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],a=e instanceof mi?e.field(o.field):void 0,s=go(o.transform,a||null);null!=s&&(n=null==n?(new so).set(o.field,s):n.set(o.field,s))}return n?n.v():null}(t.fieldTransforms,e)}function Oo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&xr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof mo&&e instanceof mo||t instanceof _o&&e instanceof _o?xr(t.elements,e.elements,oi):t instanceof Io&&e instanceof Io?oi(t.S,e.S):t instanceof yo&&e instanceof yo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function xo(t){return t instanceof mi?t.version:io.min()}var Lo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return yr(e,t),e}(No),Mo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return yr(e,t),e}(No);function Fo(t,e,n){var r;return r=function(t,e){var n=new so(e);return t.fieldMask.fields.forEach((function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.v()}(t,r=e instanceof mi?e.data():ao.empty()),qo(t.fieldTransforms,r,n)}function jo(t,e,n){var r=[];Nr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof mi&&(s=e.field(o.field)),r.push(vo(a,s,n[i]))}return r}function Uo(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=null;n instanceof mi&&(u=n.field(a.field)),r.push(po(s,u,e))}return r}function qo(t,e,n){for(var r=new so(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.v()}var Vo,Bo,Ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return yr(e,t),e}(No),Wo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return yr(e,t),e}(No),zo=function(t){this.count=t};function Go(t){switch(t){case Br.OK:return Ar();case Br.CANCELLED:case Br.UNKNOWN:case Br.DEADLINE_EXCEEDED:case Br.RESOURCE_EXHAUSTED:case Br.INTERNAL:case Br.UNAVAILABLE:case Br.UNAUTHENTICATED:return!1;case Br.INVALID_ARGUMENT:case Br.NOT_FOUND:case Br.ALREADY_EXISTS:case Br.PERMISSION_DENIED:case Br.FAILED_PRECONDITION:case Br.ABORTED:case Br.OUT_OF_RANGE:case Br.UNIMPLEMENTED:case Br.DATA_LOSS:return!0;default:return Ar()}}function Ho(t){if(void 0===t)return Sr("GRPC error has no .code"),Br.UNKNOWN;switch(t){case Vo.OK:return Br.OK;case Vo.CANCELLED:return Br.CANCELLED;case Vo.UNKNOWN:return Br.UNKNOWN;case Vo.DEADLINE_EXCEEDED:return Br.DEADLINE_EXCEEDED;case Vo.RESOURCE_EXHAUSTED:return Br.RESOURCE_EXHAUSTED;case Vo.INTERNAL:return Br.INTERNAL;case Vo.UNAVAILABLE:return Br.UNAVAILABLE;case Vo.UNAUTHENTICATED:return Br.UNAUTHENTICATED;case Vo.INVALID_ARGUMENT:return Br.INVALID_ARGUMENT;case Vo.NOT_FOUND:return Br.NOT_FOUND;case Vo.ALREADY_EXISTS:return Br.ALREADY_EXISTS;case Vo.PERMISSION_DENIED:return Br.PERMISSION_DENIED;case Vo.FAILED_PRECONDITION:return Br.FAILED_PRECONDITION;case Vo.ABORTED:return Br.ABORTED;case Vo.OUT_OF_RANGE:return Br.OUT_OF_RANGE;case Vo.UNIMPLEMENTED:return Br.UNIMPLEMENTED;case Vo.DATA_LOSS:return Br.DATA_LOSS;default:return Ar()}}(Bo=Vo||(Vo={}))[Bo.OK=0]="OK",Bo[Bo.CANCELLED=1]="CANCELLED",Bo[Bo.UNKNOWN=2]="UNKNOWN",Bo[Bo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bo[Bo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bo[Bo.NOT_FOUND=5]="NOT_FOUND",Bo[Bo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bo[Bo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bo[Bo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bo[Bo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bo[Bo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bo[Bo.ABORTED=10]="ABORTED",Bo[Bo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bo[Bo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bo[Bo.INTERNAL=13]="INTERNAL",Bo[Bo.UNAVAILABLE=14]="UNAVAILABLE",Bo[Bo.DATA_LOSS=15]="DATA_LOSS";var Qo=function(){function t(t,e){this.comparator=t,this.root=e||Xo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Yo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Yo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!0)},t}(),Yo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Xo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ar();if(this.right.isRed())throw Ar();var t=this.left.check();if(t!==this.right.check())throw Ar();return t+(this.isRed()?0:1)},t}();Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1,Xo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Xo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var $o=function(){function t(t){this.comparator=t,this.data=new Qo(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Jo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Jo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Jo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Zo=new Qo(Qr.comparator);function ta(){return Zo}function ea(){return ta()}var na=new Qo(Qr.comparator);function ra(){return na}var ia=new Qo(Qr.comparator);function oa(){return ia}var aa=new $o(Qr.comparator);function sa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=aa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ua=new $o(Or);function ca(){return ua}var la=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(io.min(),r,ca(),ta(),sa())},t}(),ha=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Yr.EMPTY_BYTE_STRING,n,sa(),sa(),sa())},t}(),fa=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},pa=function(t,e){this.targetId=t,this.$=e},da=function(t,e,n,r){void 0===n&&(n=Yr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},va=function(){function t(){this.F=0,this.O=ma(),this.k=Yr.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=sa(),e=sa(),n=sa();return this.O.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ar()}})),new ha(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=ma()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),ga=function(){function t(t){this.X=t,this.Z=new Map,this.tt=ta(),this.et=ya(),this.nt=new $o(Or)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof mi?this.it(r,t.N):t.N instanceof bi&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.rt(r,t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Ar()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach((function(t,r){n.at(r)&&e(r)}))},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Si(i))if(0===n){var o=new Qr(i.path);this.rt(e,o,new bi(o,io.min()))}else Nr(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach((function(r,i){var o=e.lt(i);if(o){if(r.current&&Si(o.target)){var a=new Qr(o.target.path);null!==e.tt.get(a)||e.wt(i,a)||e.rt(i,a,new bi(a,t))}r.q&&(n.set(i,r.K()),r.W())}}));var r=sa();this.et.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new la(t,n,this.nt,this.tt,r);return this.tt=ta(),this.et=ya(),this.nt=new $o(Or),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new va,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new $o(Or),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Er("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new va),this.X.getRemoteKeysForTarget(t).forEach((function(n){e.rt(t,n,null)}))},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function ya(){return new Qo(Qr.comparator)}function ma(){return new Qo(Qr.comparator)}var ba={asc:"ASCENDING",desc:"DESCENDING"},_a={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wa=function(t,e){this.databaseId=t,this.V=e};function Ia(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ta(t,e){return t.V?e.toBase64():e.toUint8Array()}function Ea(t,e){return Ia(t,e.toTimestamp())}function Sa(t){return Nr(!!t),io.fromTimestamp(function(t){var e=$r(t);return new ti(e.seconds,e.nanos)}(t))}function Ca(t,e){return function(t){return new zr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ka(t){var e=zr.fromString(t);return Nr($a(e)),e}function Aa(t,e){return Ca(t.databaseId,e.path)}function Na(t,e){var n=ka(e);if(n.get(1)!==t.databaseId.projectId)throw new Kr(Br.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Kr(Br.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Qr(Oa(n))}function Da(t,e){return Ca(t.databaseId,e)}function Pa(t){var e=ka(t);return 4===e.length?zr.emptyPath():Oa(e)}function Ra(t){return new zr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Oa(t){return Nr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function xa(t,e,n){return{name:Aa(t,e),fields:n.proto.mapValue.fields}}function La(t,e,n){var r=Na(t,e.name),i=Sa(e.updateTime),o=new ao({mapValue:{fields:e.fields}});return new mi(r,i,o,{hasCommittedMutations:!!n})}function Ma(t,e){var n;if(e instanceof Lo)n={update:xa(t,e.key,e.value)};else if(e instanceof Ko)n={delete:Aa(t,e.key)};else if(e instanceof Mo)n={update:xa(t,e.key,e.data),updateMask:Xa(e.fieldMask)};else{if(!(e instanceof Wo))return Ar();n={verify:Aa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof yo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _o)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Io)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Ar()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ea(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ar()}(t,e.precondition)),n}function Fa(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ko.updateTime(Sa(t.updateTime)):void 0!==t.exists?ko.exists(t.exists):ko.none()}(e.currentDocument):ko.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Nr("REQUEST_TIME"===e.setToServerValue),n=new yo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new mo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new _o(i)}else"increment"in e?n=new Io(t,e.increment):Ar();var o=Hr.fromServerFormat(e.fieldPath);return new So(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Na(t,e.update.name),o=new ao({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new oo(e.map((function(t){return Hr.fromServerFormat(t)})))}(e.updateMask);return new Mo(i,o,a,n,r)}return new Lo(i,o,n,r)}if(e.delete){var s=Na(t,e.delete);return new Ko(s,n)}if(e.verify){var u=Na(t,e.verify);return new Wo(u,n)}return Ar()}function ja(t,e){return{documents:[Da(t,e.path)]}}function Ua(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Da(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Da(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(vi(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NAN"}};if(di(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(vi(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NOT_NAN"}};if(di(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(t.field),op:za(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ga(t.field),direction:Wa(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.V||Ur(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Ba(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ba(e.endAt)),n}function qa(t){var e=Pa(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Nr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Va(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Fi(Ha(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Ur(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ka(n.startAt));var l=null;return n.endAt&&(l=Ka(n.endAt)),Bi(e,i,s,a,u,"F",c,l)}function Va(t){return t?void 0!==t.unaryFilter?[Ya(t)]:void 0!==t.fieldFilter?[Qa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Va(t)})).reduce((function(t,e){return t.concat(e)})):Ar():[]}function Ba(t){return{before:t.before,values:t.position}}function Ka(t){var e=!!t.before,n=t.values||[];return new Li(n,e)}function Wa(t){return ba[t]}function za(t){return _a[t]}function Ga(t){return{fieldPath:t.canonicalString()}}function Ha(t){return Hr.fromServerFormat(t.fieldPath)}function Qa(t){return Ci.create(Ha(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ar()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ya(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ha(t.unaryFilter.field);return Ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ha(t.unaryFilter.field);return Ci.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ha(t.unaryFilter.field);return Ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ha(t.unaryFilter.field);return Ci.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ar()}}function Xa(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function $a(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ja(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ts(e)),e=Za(t.get(n),e);return ts(e)}function Za(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ts(t){return t+""}function es(t){var e=t.length;if(Nr(e>=2),2===e)return Nr(""===t.charAt(0)&&""===t.charAt(1)),zr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Ar(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Ar()}o=a+2}return new zr(r)}var ns=function(t,e){this.seconds=t,this.nanoseconds=e},rs=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};rs.store="owner",rs.key="owner";var is=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};is.store="mutationQueues",is.keyPath="userId";var os=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};os.store="mutations",os.keyPath="batchId",os.userMutationsIndex="userMutationsIndex",os.userMutationsKeyPath=["userId","batchId"];var as=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ja(e)]},t.key=function(t,e,n){return[t,Ja(e),n]},t}();as.store="documentMutations",as.PLACEHOLDER=new as;var ss=function(t,e){this.path=t,this.readTime=e},us=function(t,e){this.path=t,this.version=e},cs=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};cs.store="remoteDocuments",cs.readTimeIndex="readTimeIndex",cs.readTimeIndexPath="readTime",cs.collectionReadTimeIndex="collectionReadTimeIndex",cs.collectionReadTimeIndexPath=["parentPath","readTime"];var ls=function(t){this.byteSize=t};ls.store="remoteDocumentGlobal",ls.key="remoteDocumentGlobalKey";var hs=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};hs.store="targets",hs.keyPath="targetId",hs.queryTargetsIndexName="queryTargetsIndex",hs.queryTargetsKeyPath=["canonicalId","targetId"];var fs=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};fs.store="targetDocuments",fs.keyPath=["targetId","path"],fs.documentTargetsIndex="documentTargetsIndex",fs.documentTargetsKeyPath=["path","targetId"];var ps=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ps.key="targetGlobalKey",ps.store="targetGlobal";var ds=function(t,e){this.collectionId=t,this.parent=e};ds.store="collectionParents",ds.keyPath=["collectionId","parent"];var vs=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};vs.store="clientMetadata",vs.keyPath="clientId";var gs=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};gs.store="bundles",gs.keyPath="bundleId";var ys=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ys.store="namedQueries",ys.keyPath="name";var ms=_r(_r([],_r(_r([],_r(_r([],_r(_r([],[is.store,os.store,as.store,cs.store,hs.store,rs.store,ps.store,fs.store]),[vs.store])),[ls.store])),[ds.store])),[gs.store,ys.store]),bs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_s=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),ws=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Is=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ar(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Ts=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new ws,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new Cs(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Ps(e.target.error);n.gt.reject(new Cs(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Cs(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Er("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new As(e)},t}(),Es=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It((0,c.z$)())&&Sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Er("SimpleDb","Removing database:",t),Ns(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=(0,c.z$)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return mr(this,void 0,void 0,(function(){var e,n=this;return br(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Er("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Cs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Kr(Br.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Cs(t,n))},i.onupgradeneeded=function(t){Er("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Tt.St(e,i.transaction,t.oldVersion,n.version).next((function(){Er("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}}))}))},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return mr(this,void 0,void 0,(function(){var i,o,a,s,u;return br(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return br(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.Vt(t)];case 2:return s.db=h.sent(),e=Ts.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Is.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.Et];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Er("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ss=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Ns(this.xt.delete())},t}(),Cs=function(t){function e(e,n){var r=this;return(r=t.call(this,Br.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return yr(e,t),e}(Kr);function ks(t){return"IndexedDbTransactionError"===t.name}var As=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Er("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Er("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ns(n)},t.prototype.add=function(t){return Er("SimpleDb","ADD",this.store.name,t,t),Ns(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ns(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Er("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Er("SimpleDb","DELETE",this.store.name,t),Ns(this.store.delete(t))},t.prototype.count=function(){return Er("SimpleDb","COUNT",this.store.name),Ns(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Lt=function(t,e){Er("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,(function(t,e,n){return n.delete()}))},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new Is((function(n,r){e.onerror=function(t){var e=Ps(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Mt=function(t,e){var n=[];return new Is((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ss(i),a=e(i.primaryKey,i.value,o);if(a instanceof Is){var s=a.catch((function(t){return o.done(),Is.reject(t)}));n.push(s)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}})).next((function(){return Is.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ns(t){return new Is((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ps(t.target.error);n(e)}}))}var Ds=!1;function Ps(t){var e=Es.It((0,c.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Kr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ds||(Ds=!0,setTimeout((function(){throw r}),0)),r}}return t}var Rs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return yr(e,t),e}(_s);function Os(t,e){var n=Dr(t);return Es.Pt(n.Qt,e)}var xs=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Do(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=Po(a,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var a;(a=o[i]).key.isEqual(t)&&(e=Po(a,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),sa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&xr(this.mutations,t.mutations,(function(t,e){return Oo(t,e)}))&&xr(this.baseMutations,t.baseMutations,(function(t,e){return Oo(t,e)}))},t}(),Ls=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Nr(e.mutations.length===r.length);for(var i=oa(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ms=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=io.min()),void 0===o&&(o=io.min()),void 0===a&&(a=Yr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Fs=function(t){this.Kt=t};function js(t,e){if(e.document)return La(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Qr.fromSegments(e.noDocument.path),r=Ks(e.noDocument.readTime);return new bi(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Qr.fromSegments(e.unknownDocument.path);return r=Ks(e.unknownDocument.version),new _i(i,r)}return Ar()}function Us(t,e,n){var r=qs(n),i=e.key.path.popLast().toArray();if(e instanceof mi){var o=function(t,e){return{name:Aa(t,e.key),fields:e.toProto().mapValue.fields,updateTime:Ia(t,e.version.toTimestamp())}}(t.Kt,e),a=e.hasCommittedMutations;return new cs(null,null,o,a,r,i)}if(e instanceof bi){var s=e.key.path.toArray(),u=Bs(e.version);return a=e.hasCommittedMutations,new cs(null,new ss(s,u),null,a,r,i)}if(e instanceof _i){var c=e.key.path.toArray(),l=Bs(e.version);return new cs(new us(c,l),null,null,!0,r,i)}return Ar()}function qs(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vs(t){var e=new ti(t[0],t[1]);return io.fromTimestamp(e)}function Bs(t){var e=t.toTimestamp();return new ns(e.seconds,e.nanoseconds)}function Ks(t){var e=new ti(t.seconds,t.nanoseconds);return io.fromTimestamp(e)}function Ws(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Fa(t.Kt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Fa(t.Kt,e)})),s=ti.fromMillis(e.localWriteTimeMs);return new xs(e.batchId,s,n,a)}function zs(t){var e,n,r=Ks(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ks(t.lastLimboFreeSnapshotVersion):io.min();return void 0!==t.query.documents?(Nr(1===(n=t.query).documents.length),e=Xi(Ki(Pa(n.documents[0])))):e=function(t){return Xi(qa(t))}(t.query),new Ms(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Yr.fromBase64String(t.resumeToken))}function Gs(t,e){var n,r=Bs(e.snapshotVersion),i=Bs(e.lastLimboFreeSnapshotVersion);n=Si(e.target)?ja(t.Kt,e.target):Ua(t.Kt,e.target);var o=e.resumeToken.toBase64();return new hs(e.targetId,Ti(e.target),r,o,e.sequenceNumber,i,n)}function Hs(t){var e=qa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$i(e,e.limit,"L"):e}var Qs=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ys(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ks(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Ys(t).put({bundleId:(n=e).id,createTime:Bs(Sa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Xs(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Hs(e.bundledQuery),readTime:Ks(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Xs(t).put(function(t){return{name:t.name,readTime:Bs(Sa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ys(t){return Os(t,gs.store)}function Xs(t){return Os(t,ys.store)}var $s=function(){function t(){this.Wt=new Js}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),Is.resolve()},t.prototype.getCollectionParents=function(t,e){return Is.resolve(this.Wt.getEntries(e))},t}(),Js=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new $o(zr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new $o(zr.comparator)).toArray()},t}(),Zs=function(){function t(){this.jt=new Js}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.jt.add(e)}));var o={collectionId:r,parent:Ja(i)};return tu(t).put(o)}return Is.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Lr(e),""],!1,!0);return tu(t).kt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(es(o.parent))}return n}))},t}();function tu(t){return Os(t,ds.store)}var eu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ru(t,e,n){var r=t.store(os.store),i=t.store(as.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.qt({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Nr(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=as.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Is.waitFor(o).next((function(){return c}))}function iu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ar();e=t.noDocument}return JSON.stringify(e).length}nu.DEFAULT_COLLECTION_PERCENTILE=10,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nu.DEFAULT=new nu(41943040,nu.DEFAULT_COLLECTION_PERCENTILE,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nu.DISABLED=new nu(-1,0,0);var ou=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Nr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return su(t).qt({index:os.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=uu(t),a=su(t);return a.add({}).next((function(s){Nr("number"==typeof s);for(var u=new xs(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ma(t.Kt,e)})),i=n.mutations.map((function(e){return Ma(t.Kt,e)}));return new os(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new $o((function(t,e){return Or(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=as.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,as.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.zt[s]=u.keys()})),Is.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return su(t).get(e).next((function(t){return t?(Nr(t.userId===n.userId),Ws(n.D,t)):null}))},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?Is.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return su(t).qt({index:os.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Nr(e.batchId>=r),o=Ws(n.D,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return su(t).qt({index:os.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return su(t).kt(os.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ws(e.D,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=as.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return uu(t).qt({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=es(u);if(s===n.userId&&e.path.isEqual(l))return su(t).get(c).next((function(t){if(!t)throw Ar();Nr(t.userId===n.userId),o.push(Ws(n.D,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new $o(Or),i=[];return e.forEach((function(e){var o=as.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=uu(t).qt({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=es(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Is.waitFor(i).next((function(){return n.Yt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=as.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new $o(Or);return uu(t).qt({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=es(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Yt(t,s)}))},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(su(t).get(e).next((function(t){if(null===t)throw Ar();Nr(t.userId===n.userId),r.push(Ws(n.D,t))})))})),Is.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return ru(t.Qt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Xt(e.batchId)})),Is.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Is.resolve();var r=IDBKeyRange.lowerBound(as.prefixForUser(e.userId)),i=[];return uu(t).qt({range:r},(function(t,n,r){if(t[0]===e.userId){var o=es(t[1]);i.push(o)}else r.done()})).next((function(){Nr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return au(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return cu(t).get(this.userId).next((function(t){return t||new is(e.userId,-1,"")}))},t}();function au(t,e,n){var r=as.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return uu(t).qt({range:o,Bt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function su(t){return Os(t,os.store)}function uu(t){return Os(t,as.store)}function cu(t){return Os(t,is.store)}var lu=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),hu=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next((function(n){var r=new lu(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next((function(t){return io.fromTimestamp(new ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next((function(){return n.se(t).next((function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return fu(t).delete(e.targetId)})).next((function(){return n.se(t)})).next((function(e){return Nr(e.targetCount>0),e.targetCount-=1,n.ie(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return fu(t).qt((function(a,s){var u=zs(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Is.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return fu(t).qt((function(t,n){var r=zs(n);e(r)}))},t.prototype.se=function(t){return pu(t).get(ps.key).next((function(t){return Nr(null!==t),t}))},t.prototype.ie=function(t,e){return pu(t).put(ps.key,e)},t.prototype.re=function(t,e){return fu(t).put(Gs(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ti(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return fu(t).qt({range:r,index:hs.queryTargetsIndexName},(function(t,n,r){var o=zs(n);Ei(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=du(t);return e.forEach((function(e){var a=Ja(e.path);i.push(o.put(new fs(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Is.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=du(t);return Is.forEach(e,(function(e){var o=Ja(e.path);return Is.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=du(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=du(t),i=sa();return r.qt({range:n,Bt:!0},(function(t,e,n){var r=es(t[1]),o=new Qr(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Ja(e.path),r=IDBKeyRange.bound([n],[Lr(n)],!1,!0),i=0;return du(t).qt({index:fs.documentTargetsIndex,Bt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.yt=function(t,e){return fu(t).get(e).next((function(t){return t?zs(t):null}))},t}();function fu(t){return Os(t,hs.store)}function pu(t){return Os(t,ps.store)}function du(t){return Os(t,fs.store)}function vu(t){return mr(this,void 0,void 0,(function(){return br(this,(function(e){if(t.code!==Br.FAILED_PRECONDITION||t.message!==bs)throw t;return Er("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function gu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Or(n,i);return 0===a?Or(r,o):a}var yu=function(){function t(t){this.ce=t,this.buffer=new $o(gu),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();gu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),mu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Er("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return mr(e,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ks(e=n.sent())?(Er("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,vu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),bu=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Is.resolve(wr.o);var r=new yu(e);return this.we.forEachTarget(t,(function(t){return r.he(t.sequenceNumber)})).next((function(){return n.we.me(t,(function(t){return r.he(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Er("LruGarbageCollector","Garbage collection skipped; disabled"),Is.resolve(eu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Er("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),eu):n.ye(t,e)}))},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,a,s,c,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(Er("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),Tr()<=u.in.DEBUG&&Er("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(c-s)+"ms\nTotal Duration: "+(c-h)+"ms"),Is.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),_u=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new bu(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.ge=function(t){var e=0;return this.me(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return wu(t,n)},t.prototype.removeReference=function(t,e,n){return wu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return wu(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return cu(t).Ut((function(r){return au(t,r,e).next((function(t){return t&&(n=!0),Is.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,(function(a,s){if(s<=e){var u=n.Ee(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),du(t).delete([0,Ja(a.path)])}))}));i.push(u)}})).next((function(){return Is.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return wu(t,e)},t.prototype.pe=function(t,e){var n,r=du(t),i=wr.o;return r.qt({index:fs.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==wr.o&&e(new Qr(es(n)),i),i=s,n=a):i=wr.o})).next((function(){i!==wr.o&&e(new Qr(es(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function wu(t,e){return du(t).put(function(t,e){return new fs(0,Ja(t.path),e)}(e,t.currentSequenceNumber))}var Iu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Fr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return jr(this.inner)},t}(),Tu=function(){function t(){this.changes=new Iu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:io.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Is.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Eu=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return ku(t).put(Au(e),n)},t.prototype.removeEntry=function(t,e){var n=ku(t),r=Au(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Te(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ku(t).get(Au(e)).next((function(t){return n.Ie(t)}))},t.prototype.Ae=function(t,e){var n=this;return ku(t).get(Au(e)).next((function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:iu(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ea();return this.Re(t,e,(function(t,e){var i=n.Ie(e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.be=function(t,e){var n=this,r=ea(),i=new Qo(Qr.comparator);return this.Re(t,e,(function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,iu(e))):(r=r.insert(t,null),i=i.insert(t,0))})).next((function(){return{ve:r,Pe:i}}))},t.prototype.Re=function(t,e,n){if(e.isEmpty())return Is.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ku(t).qt({range:r},(function(t,e,r){for(var a=Qr.fromSegments(t);o&&Qr.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ra(),o=e.path.length+1,a={};if(n.isEqual(io.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=qs(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=cs.collectionReadTimeIndex}return ku(t).qt(a,(function(t,n,a){if(t.length===o){var s=js(r.D,n);e.path.isPrefixOf(s.key.path)?s instanceof mi&&eo(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Su(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Cu(t).get(ls.key).next((function(t){return Nr(!!t),t}))},t.prototype.Te=function(t,e){return Cu(t).put(ls.key,e)},t.prototype.Ie=function(t){if(t){var e=js(this.D,t);return e instanceof bi&&e.version.isEqual(io.min())?null:e}return null},t}(),Su=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new Iu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return yr(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new $o((function(t,e){return Or(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Se.get(o);if(a.maybeDocument){var u=Us(e.Ve.D,a.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=iu(u);r+=c-s,n.push(e.Ve.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Us(e.Ve.D,new bi(o,io.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))})),n.push(this.Ve.updateMetadata(t,r)),Is.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next((function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next((function(t){var e=t.ve;return t.Pe.forEach((function(t,e){n.Se.set(t,e)})),e}))},e}(Tu);function Cu(t){return Os(t,ls.store)}function ku(t){return Os(t,cs.store)}function Au(t){return t.path.toArray()}var Nu=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Nr(n<r&&n>=0&&r<=11);var o=new Ts("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(rs.store)}(t),function(t){t.createObjectStore(is.store,{keyPath:is.keyPath}),t.createObjectStore(os.store,{keyPath:os.keyPath,autoIncrement:!0}).createIndex(os.userMutationsIndex,os.userMutationsKeyPath,{unique:!0}),t.createObjectStore(as.store)}(t),Du(t),function(t){t.createObjectStore(cs.store)}(t));var a=Is.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(fs.store),t.deleteObjectStore(hs.store),t.deleteObjectStore(ps.store)}(t),Du(t)),a=a.next((function(){return function(t){var e=t.store(ps.store),n=new ps(0,0,io.min().toTimestamp(),0);return e.put(ps.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(os.store).kt().next((function(n){t.deleteObjectStore(os.store),t.createObjectStore(os.store,{keyPath:os.keyPath,autoIncrement:!0}).createIndex(os.userMutationsIndex,os.userMutationsKeyPath,{unique:!0});var r=e.store(os.store),i=n.map((function(t){return r.put(t)}));return Is.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(vs.store,{keyPath:vs.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.De(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(ls.store)}(t),i.Ce(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.xe(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Ne(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(cs.store);e.createIndex(cs.readTimeIndex,cs.readTimeIndexPath,{unique:!1}),e.createIndex(cs.collectionReadTimeIndex,cs.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.$e(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(gs.store,{keyPath:gs.keyPath})}(t),function(t){t.createObjectStore(ys.store,{keyPath:ys.keyPath})}(t)}))),a},t.prototype.Ce=function(t){var e=0;return t.store(cs.store).qt((function(t,n){e+=iu(n)})).next((function(){var n=new ls(e);return t.store(ls.store).put(ls.key,n)}))},t.prototype.De=function(t){var e=this,n=t.store(is.store),r=t.store(os.store);return n.kt().next((function(n){return Is.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(os.userMutationsIndex,i).next((function(r){return Is.forEach(r,(function(r){Nr(r.userId===n.userId);var i=Ws(e.D,r);return ru(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.xe=function(t){var e=t.store(fs.store),n=t.store(cs.store);return t.store(ps.store).get(ps.key).next((function(t){var r=[];return n.qt((function(n,i){var o=new zr(n),a=function(t){return[0,Ja(t)]}(o);r.push(e.get(a).next((function(n){return n?Is.resolve():function(n){return e.put(new fs(0,Ja(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Is.waitFor(r)}))}))},t.prototype.Ne=function(t,e){t.createObjectStore(ds.store,{keyPath:ds.keyPath});var n=e.store(ds.store),r=new Js,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ja(i)})}};return e.store(cs.store).qt({Bt:!0},(function(t,e){var n=new zr(t);return i(n.popLast())})).next((function(){return e.store(as.store).qt({Bt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],es(n));return i(r.popLast())}))}))},t.prototype.$e=function(t){var e=this,n=t.store(hs.store);return n.qt((function(t,r){var i=zs(r),o=Gs(e.D,i);return n.put(o)}))},t}();function Du(t){t.createObjectStore(fs.store,{keyPath:fs.keyPath}).createIndex(fs.documentTargetsIndex,fs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hs.store,{keyPath:hs.keyPath}).createIndex(hs.queryTargetsIndexName,hs.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ps.store)}var Pu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ru=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=a,this.document=s,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Kr(Br.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _u(this,i),this.We=n+"main",this.D=new Fs(u),this.je=new Es(this.We,11,new Nu(this.D)),this.Ge=new hu(this.referenceDelegate,this.D),this.Gt=new Zs,this.ze=function(t,e){return new Eu(t,e)}(this.D,this.Gt),this.He=new Qs,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&Sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Kr(Br.FAILED_PRECONDITION,Pu);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ge.getHighestSequenceNumber(e)}))})).then((function(e){t.Me=new wr(e,t.Oe)})).then((function(){t.Le=!0})).catch((function(e){return t.je&&t.je.close(),Promise.reject(e)}))},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return mr(e,void 0,void 0,(function(){return br(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct((function(n){return mr(e,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget((function(){return mr(e,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return xu(e).put(new vs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.nn(e).next((function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable((function(){return t.Ke(!1)})))}))})).next((function(){return t.sn(e)})).next((function(n){return t.isPrimary&&!n?t.rn(e).next((function(){return!1})):!!n&&t.on(e).next((function(){return!0}))}))})).catch((function(e){if(ks(e))return Er("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Er("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable((function(){return t.Ke(e)})),t.isPrimary=e}))},t.prototype.nn=function(t){var e=this;return Ou(t).get(rs.key).next((function(t){return Is.resolve(e.cn(t))}))},t.prototype.an=function(t){return xu(t).delete(this.clientId)},t.prototype.un=function(){return mr(this,void 0,void 0,(function(){var t,e,n,r,i=this;return br(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Os(t,vs.store);return e.kt().next((function(t){var n=i.ln(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Is.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Je)for(e=0,n=t;e<n.length;e++)r=n[e],this.Je.removeItem(this.fn(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.Ye().then((function(){return t.un()})).then((function(){return t.tn()}))}))},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?Is.resolve(!0):Ou(t).get(rs.key).next((function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Kr(Br.FAILED_PRECONDITION,Pu);return!1}}return!(!e.networkEnabled||!e.inForeground)||xu(t).kt().next((function(t){return void 0===e.ln(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Er("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return mr(this,void 0,void 0,(function(){var t=this;return br(this,(function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[rs.store,vs.store],(function(e){var n=new Rs(e,wr.o);return t.rn(n).next((function(){return t.an(n)}))}))];case 1:return e.sent(),this.je.close(),this.yn(),[2]}}))}))},t.prototype.ln=function(t,e){var n=this;return t.filter((function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)}))},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return xu(e).kt().next((function(e){return t.ln(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ou.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Er("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.je.runTransaction(t,o,ms,(function(o){return i=new Rs(o,r.Me?r.Me.next():wr.o),"readwrite-primary"===e?r.nn(i).next((function(t){return!!t||r.sn(i)})).next((function(e){if(!e)throw Sr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Fe.enqueueRetryable((function(){return r.Ke(!1)})),new Kr(Br.FAILED_PRECONDITION,bs);return n(i)})).next((function(t){return r.on(i).next((function(){return t}))})):r.pn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.pn=function(t){var e=this;return Ou(t).get(rs.key).next((function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Kr(Br.FAILED_PRECONDITION,Pu)}))},t.prototype.on=function(t){var e=new rs(this.clientId,this.allowTabSynchronization,Date.now());return Ou(t).put(rs.key,e)},t.At=function(){return Es.At()},t.prototype.rn=function(t){var e=this,n=Ou(t);return n.get(rs.key).next((function(t){return e.cn(t)?(Er("IndexedDbPersistence","Releasing primary lease."),n.delete(rs.key)):Is.resolve()}))},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Sr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()}))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Er("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Sr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){Sr("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ou(t){return Os(t,rs.store)}function xu(t){return Os(t,vs.store)}function Lu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Mu=function(t,e){this.progress=t,this.En=e},Fu=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.An(t,e,r)}))},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t}))},t.prototype.Rn=function(t,e,n){var r=ea();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)})),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next((function(e){return n.vn(t,e)}))},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var i=n.Rn(t,e,r),o=ta();return i.forEach((function(t,e){e||(e=new bi(t,io.min())),o=o.insert(t,e)})),o}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Qr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):Qi(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new Qr(e)).next((function(t){var e=ra();return t instanceof mi&&(e=e.insert(t.key,t)),e}))},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=ra();return this.Gt.getCollectionParents(t,i).next((function(a){return Is.forEach(a,(function(a){var s=function(t,e){return new Vi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.Sn(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Dn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=Po(u,r.get(c),o.localWriteTime);r=l instanceof mi?r.insert(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){eo(e,n)||(r=r.remove(t))})),r}))},t.prototype.Dn=function(t,e,n){for(var r=sa(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Mo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof mi&&(c=c.insert(t,e))})),c}))},t}(),ju=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=sa(),i=sa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Uu=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(io.min())?this.On(t,e):this.Fn.bn(t,r).next((function(o){var a=i.kn(e,o);return(Wi(e)||zi(e))&&i.Mn(e.limitType,a,r,n)?i.On(t,e):(Tr()<=u.in.DEBUG&&Er("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),to(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.kn=function(t,e){var n=new $o(no(t));return e.forEach((function(e,r){r instanceof mi&&eo(t,r)&&(n=n.add(r))})),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return Tr()<=u.in.DEBUG&&Er("QueryEngine","Using full collection scan to execute query:",to(e)),this.Fn.getDocumentsMatchingQuery(t,e,io.min())},t}(),qu=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Qo(Or),this.qn=new Iu((function(t){return Ti(t)}),Ei),this.Un=io.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new Fu(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Bn)}))},t}();function Vu(t,e,n,r){return new qu(t,e,n,r)}function Bu(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o;return br(this,(function(a){switch(a.label){case 0:return n=Dr(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Tn.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Fu(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=sa(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.bn(t,a).next((function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}}))}))}function Ku(t,e){var n=Dr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Is.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=e,a=n.docVersions.get(t);Nr(null!==a),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)}))})),a.next((function(){return t.Tn.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Tn.performConsistencyCheck(t)})).next((function(){return n.Kn.bn(t,r)}))}))}function Wu(t){var e=Dr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ge.getLastRemoteSnapshotVersion(t)}))}function zu(t,e){var n=Dr(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Nr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.Ge.updateTargetData(t,c))}}}));var s=ta();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Gu(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(io.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next((function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Is.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Kn.vn(t,s)}))})).then((function(t){return n.Bn=i,t}))}function Gu(t,e,n,r,i){var o=sa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ta();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a instanceof bi&&a.version.isEqual(io.min())?(e.removeEntry(n,u),o=o.insert(n,a)):null==s||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Er("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Hu(t,e){var n=Dr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)}))}function Qu(t,e){var n=Dr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Ge.getTargetData(t,e).next((function(i){return i?(r=i,Is.resolve(r)):n.Ge.allocateTargetId(t).next((function(i){return r=new Ms(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t}))}function Yu(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o,a;return br(this,(function(s){switch(s.label){case 0:r=Dr(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ks(a=s.sent()))throw a;return Er("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}}))}))}function Xu(t,e,n){var r=Dr(t),i=io.min(),o=sa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Dr(t),i=r.qn.get(n);return void 0!==i?Is.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,Xi(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:io.min(),n?o:sa())})).next((function(t){return{documents:t,jn:o}}))}))}function $u(t,e){var n=Dr(t),r=Dr(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.yt(t,e).next((function(t){return t?t.target:null}))}))}function Ju(t){var e=Dr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Dr(t),i=ta(),o=qs(n),a=ku(e),s=IDBKeyRange.lowerBound(o,!0);return a.qt({index:cs.readTimeIndex,range:s},(function(t,e){var n=js(r.D,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{En:i,readTime:Vs(o)}}))}(e.Qn,t,e.Un)})).then((function(t){var n=t.En,r=t.readTime;return e.Un=r,n}))}function Zu(t){return mr(this,void 0,void 0,(function(){var e;return br(this,(function(n){return[2,(e=Dr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ku(t),n=io.min();return e.qt({index:cs.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Vs(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Un=t}))]}))}))}function tc(t,e,n,r){return mr(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,p;return br(this,(function(d){switch(d.label){case 0:for(i=Dr(t),o=sa(),a=ta(),s=oa(),u=0,c=n;u<c.length;u++)l=c[u],h=e.Gn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.zn(l)),s=s.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Qu(i,function(t){return Xi(Ki(zr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Gu(t,f,a,io.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.Ge.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.Ge.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Kn.vn(t,e)}))}))}))]}}))}))}function ec(t,e,n){return void 0===n&&(n=sa()),mr(this,void 0,void 0,(function(){var r,i;return br(this,(function(o){switch(o.label){case 0:return[4,Qu(t,Xi(Hs(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Dr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Sa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var a=r.withResumeToken(Yr.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(a.targetId,a),i.Ge.updateTargetData(t,a).next((function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.Ge.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.He.saveNamedQuery(t,e)}))}))]}}))}))}var nc=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Is.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Sa(n.createTime)}),Is.resolve()},t.prototype.getNamedQuery=function(t,e){return Is.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:Hs(t.bundledQuery),readTime:Sa(t.readTime)}}(e)),Is.resolve()},t}(),rc=function(){function t(){this.Xn=new $o(ic.Zn),this.ts=new $o(ic.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ic(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.ss(new ic(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.os=function(t){var e=this,n=new Qr(new zr([])),r=new ic(n,t),i=new ic(n,t+1),o=[];return this.ts.forEachInRange([r,i],(function(t){e.ss(t),o.push(t.key)})),o},t.prototype.cs=function(){var t=this;this.Xn.forEach((function(e){return t.ss(e)}))},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new Qr(new zr([])),n=new ic(e,t),r=new ic(e,t+1),i=sa();return this.ts.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new ic(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ic=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return Qr.comparator(t.key,e.key)||Or(t.hs,e.hs)},t.es=function(t,e){return Or(t.hs,e.hs)||Qr.comparator(t.key,e.key)},t}(),oc=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new $o(ic.Zn)}return t.prototype.checkEmpty=function(t){return Is.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++,this.Tn.length>0&&this.Tn[this.Tn.length-1];var o=new xs(i,e,n,r);this.Tn.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.fs=this.fs.add(new ic(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return Is.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Is.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.ws(n),i=r<0?0:r;return Is.resolve(this.Tn.length>i?this.Tn[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Is.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return Is.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ic(e,0),i=new ic(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],(function(t){var e=n.ds(t.hs);o.push(e)})),Is.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new $o(Or);return e.forEach((function(t){var e=new ic(t,0),i=new ic(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],(function(t){r=r.add(t.hs)}))})),Is.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Qr.isDocumentKey(i)||(i=i.child(""));var o=new ic(new Qr(i),0),a=new $o(Or);return this.fs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.hs)),!0)}),o),Is.resolve(this._s(a))},t.prototype._s=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.ds(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Nr(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return Is.forEach(e.mutations,(function(i){var o=new ic(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.fs=r}))},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new ic(e,0),r=this.fs.firstAfterOrEqual(n);return Is.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this.Tn.length,Is.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),ac=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new Qo(Qr.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:a,readTime:n}),this.size+=a-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Is.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=ea();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),Is.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ra(),i=new Qr(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof mi&&eo(e,c)&&(r=r.insert(c.key,c))}return Is.resolve(r)},t.prototype.ps=function(t,e){return Is.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new sc(this)},t.prototype.getSize=function(t){return Is.resolve(this.size)},t}(),sc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return yr(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)})),Is.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(Tu),uc=function(){function t(t){this.persistence=t,this.Es=new Iu((function(t){return Ti(t)}),Ei),this.lastRemoteSnapshotVersion=io.min(),this.highestTargetId=0,this.Ts=0,this.Is=new rc,this.targetCount=0,this.As=lu.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach((function(t,n){return e(n)})),Is.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Is.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Is.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),Is.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),Is.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new lu(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,Is.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),Is.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,Is.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.Es.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Is.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Is.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return Is.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),Is.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Is.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),Is.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return Is.resolve(n)},t.prototype.containsKey=function(t,e){return Is.resolve(this.Is.containsKey(e))},t}(),cc=function(){function t(t,e){var n=this;this.Rs={},this.Me=new wr(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new uc(this),this.Gt=new $s,this.ze=function(t,e){return new ac(t,(function(t){return n.referenceDelegate.bs(t)}))}(this.Gt),this.D=new Fs(e),this.He=new nc(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new oc(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Er("MemoryPersistence","Starting transaction:",t);var i=new lc(this.Me.next());return this.referenceDelegate.vs(),n(i).next((function(t){return r.referenceDelegate.Ps(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Vs=function(t,e){return Is.or(Object.values(this.Rs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),lc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return yr(e,t),e}(_s),hc=function(){function t(t){this.persistence=t,this.Ss=new rc,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Ar()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),Is.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),Is.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),Is.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach((function(t){return n.xs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.xs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Is.forEach(this.xs,(function(r){var i=Qr.fromPath(r);return e.Ns(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Ds=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next((function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())}))},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return Is.or([function(){return Is.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),fc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function pc(t,e){return"firestore_clients_"+t+"_"+e}function dc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function vc(t,e){return"firestore_targets_"+t+"_"+e}fc.UNAUTHENTICATED=new fc(null),fc.GOOGLE_CREDENTIALS=new fc("google-credentials-uid"),fc.FIRST_PARTY=new fc("first-party-uid");var gc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Kr(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Sr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Kr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Sr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ca(),a=0;i&&a<r.activeTargetIds.length;++a)i=Vr(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Sr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),bc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Sr("SharedClientState","Failed to parse online state: "+e),null)},t}(),_c=function(){function t(){this.activeTargetIds=ca()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),wc=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Qo(Or),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=pc(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new _c),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return mr(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return br(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(pc(this.persistenceKey,r)))&&(o=mc.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(a=this.storage.getItem(this.zs))&&(s=this.Ys(a))&&this.Xs(s),u=0,c=this.Us;u<c.length;u++)l=c[u],this.Bs(l);return this.Us=[],this.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(vc(this.persistenceKey,t));if(n){var r=yc.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(vc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.ei(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Er("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Er("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Er("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Er("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable((function(){return mr(e,void 0,void 0,(function(){var t,e,r,i,o,a;return br(this,(function(s){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(a=function(t){var e=wr.o;if(null!=t)try{var n=JSON.parse(t);Nr("number"==typeof n),e=n}catch(t){Sr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==wr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new gc(this.currentUser,t,e,n),i=dc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=dc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){var e={clientId:this.Ms,onlineState:t};this.storage.setItem(this.zs,JSON.stringify(e))},t.prototype.si=function(t,e,n){var r=vc(this.persistenceKey,t),i=new yc(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return mc.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gc.$s(new fc(i),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return yc.$s(r,e)},t.prototype.Ys=function(t){return bc.$s(t)},t.prototype.hi=function(t){return mr(this,void 0,void 0,(function(){return br(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Er("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.mi(a,s).then((function(){n.qs=r}))},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=ca();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Ic=function(){function t(){this.yi=new _c,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new _c,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Tc=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),Ec=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Er("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Er("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Sc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Cc=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),kc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return yr(e,t),e.prototype.qi=function(t,e,n,r){return new Promise((function(i,o){var a=new vr;a.listenOnce(lr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case cr.NO_ERROR:var e=a.getResponseJson();Er("Connection","XHR received:",JSON.stringify(e)),i(e);break;case cr.TIMEOUT:Er("Connection",'RPC "'+t+'" timed out'),o(new Kr(Br.DEADLINE_EXCEEDED,"Request time out"));break;case cr.HTTP_ERROR:var n=a.getStatus();if(Er("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Br).indexOf(e)>=0?e:Br.UNKNOWN}(r.status);o(new Kr(s,r.message))}else o(new Kr(Br.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Kr(Br.UNAVAILABLE,"Connection failed."));break;default:Ar()}}finally{Er("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ir,i=oe(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),(0,c.uI)()||(0,c.b$)()||(0,c.d)()||(0,c.w1)()||(0,c.Mn)()||(0,c.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Er("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,l=!1,h=new Cc({vi:function(t){l?Er("Connection","Not sending because WebChannel is closed:",t):(u||(Er("Connection","Opening WebChannel transport."),s.open(),u=!0),Er("Connection","WebChannel sending:",t),s.send(t))},Pi:function(){return s.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(s,dr.EventType.OPEN,(function(){l||Er("Connection","WebChannel transport opened.")})),f(s,dr.EventType.CLOSE,(function(){l||(l=!0,Er("Connection","WebChannel transport closed"),h.$i())})),f(s,dr.EventType.ERROR,(function(t){l||(l=!0,Cr("Connection","WebChannel transport errored:",t),h.$i(new Kr(Br.UNAVAILABLE,"The operation could not be completed")))})),f(s,dr.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Nr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Er("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Vo[t];if(void 0!==e)return Ho(e)}(o),u=i.message;void 0===a&&(a=Br.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),l=!0,h.$i(new Kr(a,u)),s.close()}else Er("Connection","WebChannel received:",n),h.Fi(n)}})),f(i,hr.STAT_EVENT,(function(t){t.stat===fr?Er("Connection","Detected buffering proxy"):t.stat===pr&&Er("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Ni()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Oi=e+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Er("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then((function(t){return Er("RestConnection","Received: ",t),t}),(function(e){throw Cr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){var n=Sc[t];return this.Oi+"/v1/"+e+":"+n},t}());function Ac(){return"undefined"!=typeof window?window:null}function Nc(){return"undefined"!=typeof document?document:null}function Dc(t){return new wa(t,!0)}var Pc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Er("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,(function(){return e.Hi=Date.now(),t()})),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Rc=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Pc(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return mr(this,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,(function(){return t.dr()})))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return mr(this,void 0,void 0,(function(){return br(this,(function(t){return this.ar()?[2,this.close(0)]:[2]}))}))},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return mr(this,void 0,void 0,(function(){return br(this,(function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===Br.RESOURCE_EXHAUSTED?(Sr(e.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===Br.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then((function(e){t.sr===n&&t.gr(e)}),(function(n){e((function(){var e=new Kr(Br.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)}))}))},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi((function(){n((function(){return e.state=2,e.listener.Vi()}))})),this.stream.Di((function(t){n((function(){return e.pr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi((function(){return mr(t,void 0,void 0,(function(){return br(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.pr=function(t){return Er("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget((function(){return e.sr===t?n():(Er("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Oc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,a}return yr(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ar()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Nr(void 0===e||"string"==typeof e),Yr.fromBase64String(e||"")):(Nr(void 0===e||e instanceof Uint8Array),Yr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Br.UNKNOWN:Ho(t.code);return new Kr(e,t.message||"")}(s);n=new da(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Na(t,r.document.name),o=Sa(r.document.updateTime);var s=new ao({mapValue:{fields:r.document.fields}}),u=(a=new mi(i,o,s,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new fa(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Na(t,r.document),o=r.readTime?Sa(r.readTime):io.min(),s=new bi(i,o),a=r.removedTargetIds||[],n=new fa([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Na(t,r.document),o=r.removedTargetIds||[],n=new fa([],o,i,null);else{if(!("filter"in e))return Ar();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new zo(r),o=l.targetId,n=new pa(o,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return io.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?io.min():e.readTime?Sa(e.readTime):io.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Ra(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Si(r)?{documents:ja(t,r)}:{query:Ua(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ta(t,e.resumeToken):e.snapshotVersion.compareTo(io.min())>0&&(n.readTime=Ia(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ar()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.D,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Ra(this.D),e.removeTarget=t,this.wr(e)},e}(Rc),xc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,a.Rr=!1,a}return yr(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Nr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Nr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Sa(t.updateTime):Sa(e);return n.isEqual(io.min())&&(n=Sa(e)),new Co(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Sa(t.commitTime);return this.listener.Pr(n,e)}return Nr(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Ra(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ma(e.D,t)}))};this.wr(n)},e}(Rc),Lc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return yr(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Kr(Br.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Mi(t,e,n,i)})).catch((function(t){throw t.code===Br.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Ui(t,e,n,i)})).catch((function(t){throw t.code===Br.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Dr=!1},e}((function(){})),Mc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()})))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Sr(e),this.Fr=!1):Er("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),Fc=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi((function(t){n.enqueueAndForget((function(){return mr(o,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return Gc(this)?(Er("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return mr(this,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return(e=Dr(t)).Qr.add(4),[4,Uc(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,jc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.jr=new Mc(n,r)};function jc(t){return mr(this,void 0,void 0,(function(){var e,n;return br(this,(function(r){switch(r.label){case 0:if(!Gc(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Uc(t){return mr(this,void 0,void 0,(function(){var e,n;return br(this,(function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function qc(t,e){var n=Dr(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),zc(n)?Wc(n):sl(n).ar()&&Bc(n,e))}function Vc(t,e){var n=Dr(t),r=sl(n);n.Ur.delete(e),r.ar()&&Kc(n,e),0===n.Ur.size&&(r.ar()?r.lr():Gc(n)&&n.jr.set("Unknown"))}function Bc(t,e){t.Gr.H(e.targetId),sl(t).Ir(e)}function Kc(t,e){t.Gr.H(e),sl(t).Ar(e)}function Wc(t){t.Gr=new ga({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),sl(t).start(),t.jr.Or()}function zc(t){return Gc(t)&&!sl(t).cr()&&t.Ur.size>0}function Gc(t){return 0===Dr(t).Qr.size}function Hc(t){t.Gr=void 0}function Qc(t){return mr(this,void 0,void 0,(function(){return br(this,(function(e){return t.Ur.forEach((function(e,n){Bc(t,e)})),[2]}))}))}function Yc(t,e){return mr(this,void 0,void 0,(function(){return br(this,(function(n){return Hc(t),zc(t)?(t.jr.Lr(e),Wc(t)):t.jr.set("Unknown"),[2]}))}))}function Xc(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o;return br(this,(function(a){switch(a.label){case 0:if(t.jr.set("Online"),!(e instanceof da&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o;return br(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Ur.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Er("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,$c(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof fa?t.Gr.st(e):e instanceof pa?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(io.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Wu(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(Yr.EMPTY_BYTE_STRING,n.snapshotVersion)),Kc(t,e);var r=new Ms(n.target,e,1,n.sequenceNumber);Bc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Er("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,$c(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function $c(t,e,n){return mr(this,void 0,void 0,(function(){var r=this;return br(this,(function(i){switch(i.label){case 0:if(!ks(e))throw e;return t.Qr.add(1),[4,Uc(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return Wu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return mr(r,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return Er("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,jc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Jc(t,e){return e().catch((function(n){return $c(t,n,e)}))}function Zc(t){return mr(this,void 0,void 0,(function(){var e,n,r,i,o;return br(this,(function(a){switch(a.label){case 0:e=Dr(t),n=ul(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Gc(t)&&t.qr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Hu(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=ul(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,$c(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return tl(e)&&el(e),[2]}}))}))}function tl(t){return Gc(t)&&!ul(t).cr()&&t.qr.length>0}function el(t){ul(t).start()}function nl(t){return mr(this,void 0,void 0,(function(){return br(this,(function(e){return ul(t).Sr(),[2]}))}))}function rl(t){return mr(this,void 0,void 0,(function(){var e,n,r,i;return br(this,(function(o){for(e=ul(t),n=0,r=t.qr;n<r.length;n++)i=r[n],e.vr(i.mutations);return[2]}))}))}function il(t,e,n){return mr(this,void 0,void 0,(function(){var r,i;return br(this,(function(o){switch(o.label){case 0:return r=t.qr.shift(),i=Ls.from(r,e,n),[4,Jc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Zc(t)];case 2:return o.sent(),[2]}}))}))}function ol(t,e){return mr(this,void 0,void 0,(function(){return br(this,(function(n){switch(n.label){case 0:return e&&ul(t).br?[4,function(t,e){return mr(this,void 0,void 0,(function(){var n,r;return br(this,(function(i){switch(i.label){case 0:return Go(r=e.code)&&r!==Br.ABORTED?(n=t.qr.shift(),ul(t).hr(),[4,Jc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Zc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return tl(t)&&el(t),[2]}}))}))}function al(t,e){return mr(this,void 0,void 0,(function(){var n;return br(this,(function(r){switch(r.label){case 0:return n=Dr(t),e?(n.Qr.delete(2),[4,jc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Uc(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function sl(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Dr(t);return r.Cr(),new Oc(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Qc.bind(null,t),Di:Yc.bind(null,t),Tr:Xc.bind(null,t)}),t.Kr.push((function(n){return mr(e,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return n?(t.zr.hr(),zc(t)?Wc(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),Hc(t),e.label=3;case 3:return[2]}}))}))}))),t.zr}function ul(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Dr(t);return r.Cr(),new xc(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:nl.bind(null,t),Di:ol.bind(null,t),Vr:rl.bind(null,t),Pr:il.bind(null,t)}),t.Kr.push((function(n){return mr(e,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Zc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Er("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Hr}var cl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kr(Br.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ll(t,e){if(Sr("AsyncQueue",e+": "+t),ks(t))return new Kr(Br.UNAVAILABLE,e+": "+t);throw t}var hl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Qr.comparator(e.key,n.key)}:function(t,e){return Qr.comparator(t.key,e.key)},this.keyedMap=ra(),this.sortedSet=new Qo(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),fl=function(){function t(){this.Jr=new Qo(Qr.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Ar():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),pl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,hl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ji(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),dl=function(){this.Xr=void 0,this.listeners=[]},vl=function(){this.queries=new Iu((function(t){return Zi(t)}),Ji),this.onlineState="Unknown",this.Zr=new Set};function gl(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return br(this,(function(c){switch(c.label){case 0:if(n=Dr(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new dl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Xr=c.sent(),[3,4];case 3:return s=c.sent(),u=ll(s,"Initialization of query '"+to(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&_l(n),[2]}}))}))}function yl(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o,a;return br(this,(function(s){return n=Dr(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function ml(t,e){for(var n=Dr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].no(a)&&(r=!0);u.Xr=a}}r&&_l(n)}function bl(t,e,n){var r=Dr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function _l(t){t.Zr.forEach((function(t){t.next()}))}var wl=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new pl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.uo&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){if(t.docChanges.length>0)return!0;var e=this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=pl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),Il=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),Tl=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Na(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?La(this.D,t.document,!1):new bi(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return Sa(t)},t}(),El=function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=Sl(t)}return t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new Tl(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.Gn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||sa()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return mr(this,void 0,void 0,(function(){var t,e,n,r,i;return br(this,(function(o){switch(o.label){case 0:return[4,tc(this.localStore,new Tl(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,ec(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Mu(Object.assign({},this.progress),t))]}}))}))},t}();function Sl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Cl=function(t){this.key=t},kl=function(t){this.key=t},Al=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=sa(),this.mutatedKeys=sa(),this.po=no(t),this.Eo=new hl(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new fl,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Wi(this.query)&&i.size===this.query.limit?i.last():null,c=zi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=e instanceof mi?e:null;h&&(h=eo(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Wi(this.query)||zi(this.query))for(;a.size>this.query.limit;){var l=Wi(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:a,Ao:r,Mn:s,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ar()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)})),this.bo(n);var a=e?this.vo():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==o.length||u?{snapshot:new pl(this.query,t.Eo,i,o,t.mutatedKeys,0===s,u,!1),Po:a}:{Po:a}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new fl,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._o=e._o.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e._o=e._o.delete(t)})),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=sa(),this.Eo.forEach((function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))}));var n=[];return e.forEach((function(e){t.yo.has(e)||n.push(new kl(e))})),this.yo.forEach((function(t){e.has(t)||n.push(new Cl(t))})),n},t.prototype.So=function(t){this._o=t.jn,this.yo=sa();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return pl.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Nl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Dl=function(t){this.key=t,this.Co=!1},Pl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new Iu((function(t){return Zi(t)}),Ji),this.$o=new Map,this.Fo=new Set,this.Oo=new Qo(Qr.comparator),this.ko=new Map,this.Mo=new rc,this.Lo={},this.Bo=new Map,this.qo=lu.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Rl(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o,a,s;return br(this,(function(u){switch(u.label){case 0:return n=sh(t),(o=n.No.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Do(),[3,4]):[3,1];case 1:return[4,Qu(n.localStore,Xi(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Ol(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&qc(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Ol(t,e,n,r){return mr(this,void 0,void 0,(function(){var i,o,a,s,u,c;return br(this,(function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return mr(this,void 0,void 0,(function(){var i,o,a;return br(this,(function(s){switch(s.label){case 0:return(i=e.view.Io(n)).Mn?[4,Xu(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view.Io(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Gl(t,e.targetId,a.Po),a.snapshot)]}}))}))}(t,e,n,r)},[4,Xu(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Al(e,i.jn),a=o.Io(i.documents),s=ha.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Gl(t,n,u.Po),c=new Nl(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}}))}))}function xl(t,e){return mr(this,void 0,void 0,(function(){var n,r,i;return br(this,(function(o){switch(o.label){case 0:return n=Dr(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter((function(t){return!Ji(t,e)}))),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Yu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Vc(n.remoteStore,r.targetId),Wl(n,r.targetId)})).catch(vu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Wl(n,r.targetId),[4,Yu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ll(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o,a;return br(this,(function(s){switch(s.label){case 0:r=uh(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Dr(t),i=ti.now(),o=e.reduce((function(t,e){return t.add(e.key)}),sa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Kn.bn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Ro(c,n.get(c.key));null!=l&&a.push(new Mo(c.key,l,uo(l.proto.mapValue),ko.exists(!0)))}return r.Tn.addMutationBatch(t,i,a,e)}))})).then((function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new Qo(Or)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Yl(r,i.changes)];case 3:return s.sent(),[4,Zc(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=ll(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Ml(t,e){return mr(this,void 0,void 0,(function(){var n,r;return br(this,(function(i){switch(i.label){case 0:n=Dr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.ko.get(e);r&&(Nr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Nr(r.Co):t.removedDocuments.size>0&&(Nr(r.Co),r.Co=!1))})),[4,Yl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,vu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Fl(t,e,n){var r=Dr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach((function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Dr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)})),r&&_l(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jl(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o,a,s,u;return br(this,(function(c){switch(c.label){case 0:return(r=Dr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(a=(a=new Qo(Qr.comparator)).insert(o,new bi(o,io.min())),s=sa().add(o),u=new la(io.min(),new Map,new $o(Or),a,s),[4,Ml(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),Ql(r),[3,4];case 2:return[4,Yu(r.localStore,e,!1).then((function(){return Wl(r,e,n)})).catch(vu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Ul(t,e){return mr(this,void 0,void 0,(function(){var n,r,i;return br(this,(function(o){switch(o.label){case 0:n=Dr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ku(n.localStore,e)];case 2:return i=o.sent(),Kl(n,r,null),Bl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Yl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,vu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ql(t,e,n){return mr(this,void 0,void 0,(function(){var r,i;return br(this,(function(o){switch(o.label){case 0:r=Dr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Dr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Tn.lookupMutationBatch(t,e).next((function(e){return Nr(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)})).next((function(){return n.Tn.performConsistencyCheck(t)})).next((function(){return n.Kn.bn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Kl(r,e,n),Bl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Yl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,vu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Vl(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o,a;return br(this,(function(s){switch(s.label){case 0:Gc((n=Dr(t)).remoteStore)||Er("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Dr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=s.sent(),a=ll(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Bl(t,e){(t.Bo.get(e)||[]).forEach((function(t){t.resolve()})),t.Bo.delete(e)}function Kl(t,e,n){var r=Dr(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Wl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach((function(e){t.Mo.containsKey(e)||zl(t,e)}))}function zl(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(Vc(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),Ql(t))}function Gl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Cl?(t.Mo.addReference(o.key,e),Hl(t,o)):o instanceof kl?(Er("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||zl(t,o.key)):Ar()}}function Hl(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Er("SyncEngine","New document in limbo: "+n),t.Fo.add(r),Ql(t))}function Ql(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new Qr(zr.fromString(e)),r=t.qo.next();t.ko.set(r,new Dl(n)),t.Oo=t.Oo.insert(n,r),qc(t.remoteStore,new Ms(Xi(Ki(n.path)),r,2,wr.o))}}function Yl(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o,a;return br(this,(function(s){switch(s.label){case 0:return r=Dr(t),i=[],o=[],a=[],r.No.isEmpty()?[3,3]:(r.No.forEach((function(t,s){a.push(r.Qo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ju.Nn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.xo.Tr(i),[4,function(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return br(this,(function(h){switch(h.label){case 0:n=Dr(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Is.forEach(e,(function(e){return Is.forEach(e.Cn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Is.forEach(e.xn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!ks(r=h.sent()))throw r;return Er("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Bn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Bn=n.Bn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Xl(t,e){return mr(this,void 0,void 0,(function(){var n,r;return br(this,(function(i){switch(i.label){case 0:return(n=Dr(t)).currentUser.isEqual(e)?[3,3]:(Er("SyncEngine","User change. New user:",e.toKey()),[4,Bu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach((function(t){t.forEach((function(t){t.reject(new Kr(Br.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Yl(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function $l(t,e){var n=Dr(t),r=n.ko.get(e);if(r&&r.Co)return sa().add(r.key);var i=sa(),o=n.$o.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.No.get(u);i=i.unionWith(c.view.To)}return i}function Jl(t,e){return mr(this,void 0,void 0,(function(){var n,r,i;return br(this,(function(o){switch(o.label){case 0:return[4,Xu((n=Dr(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&Gl(n,e.targetId,i.Po),i)]}}))}))}function Zl(t){return mr(this,void 0,void 0,(function(){var e;return br(this,(function(n){return[2,Ju((e=Dr(t)).localStore).then((function(t){return Yl(e,t)}))]}))}))}function th(t,e,n,r){return mr(this,void 0,void 0,(function(){var i,o;return br(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Dr(t),r=Dr(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Jt(t,e).next((function(e){return e?n.Kn.bn(t,e):Is.resolve(null)}))}))}((i=Dr(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Zc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Kl(i,e,r||null),Bl(i,e),function(t,e){Dr(Dr(t).Tn).Xt(e)}(i.localStore,e)):Ar(),a.label=4;case 4:return[4,Yl(i,o)];case 5:return a.sent(),[3,7];case 6:Er("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function eh(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return br(this,(function(l){switch(l.label){case 0:return sh(n=Dr(t)),uh(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,nh(n,r.toArray())]);case 1:return i=l.sent(),n.Uo=!0,[4,al(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],qc(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(u=[],c=Promise.resolve(),n.$o.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Wl(n,e),Yu(n.localStore,e,!0)})),Vc(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,nh(n,u)];case 5:return l.sent(),function(t){var e=Dr(t);e.ko.forEach((function(t,n){Vc(e.remoteStore,n)})),e.Mo.cs(),e.ko=new Map,e.Oo=new Qo(Qr.comparator)}(n),n.Uo=!1,[4,al(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function nh(t,e,n){return mr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,p,d,v;return br(this,(function(g){switch(g.label){case 0:n=Dr(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.$o.get(s))&&0!==c.length?[4,Qu(n.localStore,Xi(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=h[l],p=n.No.get(f),[4,Jl(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,$u(n.localStore,s)];case 8:return v=g.sent(),[4,Qu(n.localStore,v)];case 9:return u=g.sent(),[4,Ol(n,rh(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}}))}))}function rh(t){return Bi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ih(t){var e=Dr(t);return Dr(Dr(e.localStore).persistence).gn()}function oh(t,e,n,r){return mr(this,void 0,void 0,(function(){var i,o,a;return br(this,(function(s){switch(s.label){case 0:return(i=Dr(t)).Uo?(Er("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ju(i.localStore)];case 3:return o=s.sent(),a=la.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Yl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Yu(i.localStore,e,!0)];case 6:return s.sent(),Wl(i,e,r),[3,8];case 7:Ar(),s.label=8;case 8:return[2]}}))}))}function ah(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return br(this,(function(p){switch(p.label){case 0:if(!(r=sh(t)).Uo)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.$o.has(a)?(Er("SyncEngine","Adding an already active target "+a),[3,5]):[4,$u(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,Qu(r.localStore,s)];case 3:return u=p.sent(),[4,Ol(r,rh(s),u.targetId,!1)];case 4:p.sent(),qc(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return br(this,(function(e){switch(e.label){case 0:return r.$o.has(t)?[4,Yu(r.localStore,t,!1).then((function(){Vc(r.remoteStore,t),Wl(r,t)})).catch(vu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function sh(t){var e=Dr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ml.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$l.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jl.bind(null,e),e.xo.Tr=ml.bind(null,e.eventManager),e.xo.Ko=bl.bind(null,e.eventManager),e}function uh(t){var e=Dr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ul.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ql.bind(null,e),e}function ch(t,e,n){var r=Dr(t);(function(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o,a,s,u;return br(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Dr(t),r=Sa(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.He.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(Sl(r)),i=new El(r,t.localStore,e.D),[4,e.Wo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.fo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,e.Wo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,Yl(t,s.En,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Dr(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.He.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return Cr("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var lh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return mr(this,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return this.D=Dc(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}}))}))},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Vu(this.persistence,new Uu,t.initialUser,this.D)},t.prototype.Go=function(t){return new cc(hc.Cs,this.D)},t.prototype.jo=function(t){return new Ic},t.prototype.terminate=function(){return mr(this,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),hh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return yr(e,t),e.prototype.initialize=function(e){return mr(this,void 0,void 0,(function(){return br(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Zu(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,uh(this.Jo.syncEngine)];case 4:return n.sent(),[4,Zc(this.Jo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ho=function(t){return Vu(this.persistence,new Uu,t.initialUser,this.D)},e.prototype.zo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new mu(e,t.asyncQueue)},e.prototype.Go=function(t){var e=Lu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?nu.withCacheSize(this.cacheSizeBytes):nu.DEFAULT;return new Ru(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ac(),Nc(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new Ic},e}(lh),fh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return yr(e,t),e.prototype.initialize=function(e){return mr(this,void 0,void 0,(function(){var n,r=this;return br(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof wc?(this.sharedClientState.syncEngine={wi:th.bind(null,n),_i:oh.bind(null,n),mi:ah.bind(null,n),gn:ih.bind(null,n),di:Zl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en((function(t){return mr(r,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return[4,eh(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jo=function(t){var e=Ac();if(!wc.At(e))throw new Kr(Br.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Lu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new wc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(hh),ph=function(){function t(){}return t.prototype.initialize=function(t,e){return mr(this,void 0,void 0,(function(){var n=this;return br(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Fl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xl.bind(null,this.syncEngine),[4,al(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new vl},t.prototype.createDatastore=function(t){var e,n=Dc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new kc(e));return function(t,e,n){return new Lc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Fl(a.syncEngine,t,0)},o=Ec.At()?new Ec:new Tc,new Fc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Pl(t,e,n,r,i,o);return a&&(s.Uo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return mr(this,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return e=Dr(t),Er("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Uc(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();function dh(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return mr(this,void 0,void 0,(function(){var r;return br(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return mr(this,void 0,void 0,(function(){return br(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var vh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),gh=function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new ws,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then((function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return mr(this,void 0,void 0,(function(){return br(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Wo=function(){return mr(this,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}}))}))},t.prototype.ec=function(){return mr(this,void 0,void 0,(function(){var t,e,n,r;return br(this,(function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new Il(JSON.parse(r),t.length+n)]}}))}))},t.prototype.rc=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.nc=function(){return mr(this,void 0,void 0,(function(){var t,e;return br(this,(function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.ic=function(t){return mr(this,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return mr(this,void 0,void 0,(function(){var t,e;return br(this,(function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),yh=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return mr(this,void 0,void 0,(function(){var e,n=this;return br(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Kr(Br.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return mr(this,void 0,void 0,(function(){var n,r,i,o,a,s;return br(this,(function(u){switch(u.label){case 0:return n=Dr(t),r=Ra(n.D)+"/documents",i={documents:e.map((function(t){return Aa(n.D,t)}))},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Nr(!!e.found),e.found.name,e.found.updateTime;var n=Na(t,e.found.name),r=Sa(e.found.updateTime),i=new ao({mapValue:{fields:e.found.fields}});return new mi(n,r,i,{})}(t,e):"missing"in e?function(t,e){Nr(!!e.missing),Nr(!!e.readTime);var n=Na(t,e.missing),r=Sa(e.readTime);return new bi(n,r)}(t,e):Ar()}(n.D,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Nr(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof bi||t instanceof mi?n.recordVersion(t):Ar()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ko(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return mr(this,void 0,void 0,(function(){var t,e=this;return br(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Qr.fromPath(n);e.mutations.push(new Wo(r,e.precondition(r)))})),[4,function(t,e){return mr(this,void 0,void 0,(function(){var n,r,i;return br(this,(function(o){switch(o.label){case 0:return n=Dr(t),r=Ra(n.D)+"/documents",i={writes:e.map((function(t){return Ma(n.D,t)}))},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof mi)e=t.version;else{if(!(t instanceof bi))throw Ar();e=io.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Kr(Br.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ko.updateTime(e):ko.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(io.min()))throw new Kr(Br.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ko.updateTime(e)}return ko.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),mh=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Pc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi((function(){return mr(t,void 0,void 0,(function(){var t,e,n=this;return br(this,(function(r){return t=new yh(this.datastore),(e=this.uc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.hc(t)}))}))})).catch((function(t){n.hc(t)})),[2]}))}))}))},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Ur(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget((function(){return e.ac(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Go(e)}return!1},t}(),bh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=fc.UNAUTHENTICATED,this.clientId=Rr.u(),this.credentialListener=function(){},this.receivedInitialUser=new ws,this.credentials.setChangeListener((function(t){Er("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return mr(this,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Kr(Br.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return mr(t,void 0,void 0,(function(){var t,n;return br(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ll(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function _h(t,e){return mr(this,void 0,void 0,(function(){var n,r,i=this;return br(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Er("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return mr(i,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return[4,Bu(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function wh(t,e){return mr(this,void 0,void 0,(function(){var n,r;return br(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ih(t)];case 1:return n=i.sent(),Er("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return mr(this,void 0,void 0,(function(){var n,r;return br(this,(function(i){switch(i.label){case 0:return(n=Dr(t)).asyncQueue.verifyOperationInProgress(),Er("RemoteStore","RemoteStore received new credentials"),r=Gc(n),n.Qr.add(3),[4,Uc(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,jc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function Ih(t){return mr(this,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Er("FirestoreClient","Using default OfflineComponentProvider"),[4,_h(t,new lh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Th(t){return mr(this,void 0,void 0,(function(){return br(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Er("FirestoreClient","Using default OnlineComponentProvider"),[4,wh(t,new ph)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Eh(t){return Ih(t).then((function(t){return t.persistence}))}function Sh(t){return Ih(t).then((function(t){return t.localStore}))}function Ch(t){return Th(t).then((function(t){return t.remoteStore}))}function kh(t){return Th(t).then((function(t){return t.syncEngine}))}function Ah(t){return mr(this,void 0,void 0,(function(){var e,n;return br(this,(function(r){switch(r.label){case 0:return[4,Th(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Rl.bind(null,e.syncEngine),n.onUnlisten=xl.bind(null,e.syncEngine),n)]}}))}))}function Nh(t,e,n){var r=this;void 0===n&&(n={});var i=new ws;return t.asyncQueue.enqueueAndForget((function(){return mr(r,void 0,void 0,(function(){var r;return br(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vh({next:function(o){e.enqueueAndForget((function(){return yl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Kr(Br.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Kr(Br.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new wl(Ki(n.path),o,{includeMetadataChanges:!0,uo:!0});return gl(t,a)},[4,Ah(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Dh(t,e,n){var r=this;void 0===n&&(n={});var i=new ws;return t.asyncQueue.enqueueAndForget((function(){return mr(r,void 0,void 0,(function(){var r;return br(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vh({next:function(n){e.enqueueAndForget((function(){return yl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Kr(Br.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new wl(n,o,{includeMetadataChanges:!0,uo:!0});return gl(t,a)},[4,Ah(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Ph=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Rh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Oh=new Map,xh=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Lh=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(fc.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mh=function(){function t(t){var e=this;this.fc=null,this.currentUser=fc.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then((function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.dc!==e?(Er("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Nr("string"==typeof n.accessToken),new xh(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Nr(null===t||"string"==typeof t),new fc(t)},t}(),Fh=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=fc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),jh=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Fh(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(fc.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Uh(t,e,n){if(!n)throw new Kr(Br.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function qh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Kr(Br.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Vh(t,e,n,r){if(!0===e&&!0===r)throw new Kr(Br.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Bh(t){if(!Qr.isDocumentKey(t))throw new Kr(Br.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Kh(t){if(Qr.isDocumentKey(t))throw new Kr(Br.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Wh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ar()}function zh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Kr(Br.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Wh(t);throw new Kr(Br.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Gh(t,e){if(e<=0)throw new Kr(Br.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Hh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Kr(Br.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Kr(Br.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Vh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Qh=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Hh({}),this._settingsFrozen=!1,t instanceof Rh?(this._databaseId=t,this._credentials=new Lh):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Kr(Br.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rh(t.options.projectId)}(t),this._credentials=new Mh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Kr(Br.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Kr(Br.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Lh;switch(t.type){case"gapi":var e=t.client;return Nr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new jh(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Kr(Br.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Oh.get(this))&&(Er("ComponentProvider","Removing Datastore"),Oh.delete(this),t.terminate()),Promise.resolve();var t},t}(),Yh=function(t){this._delegate=t},Xh=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Jh(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),$h=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Jh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ki(r))||this).firestore=e,i._path=r,i.type="collection",i}return yr(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Xh(this.firestore,null,new Qr(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}($h);function Zh(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Yh&&(t=t._delegate),Uh("collection","path",e),t instanceof Qh)return Kh(n=zr.fromString.apply(zr,_r([e],r))),new Jh(t,null,n);if(!(t instanceof Xh||t instanceof Jh))throw new Kr(Br.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kh(n=zr.fromString.apply(zr,_r([t.path],r)).child(zr.fromString(e))),new Jh(t.firestore,null,n)}function tf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Yh&&(t=t._delegate),1===arguments.length&&(e=Rr.u()),Uh("doc","path",e),t instanceof Qh)return Bh(n=zr.fromString.apply(zr,_r([e],r))),new Xh(t,null,new Qr(n));if(!(t instanceof Xh||t instanceof Jh))throw new Kr(Br.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bh(n=t._path.child(zr.fromString.apply(zr,_r([e],r)))),new Xh(t.firestore,t instanceof Jh?t._converter:null,new Qr(n))}function ef(t,e){return t instanceof Yh&&(t=t._delegate),e instanceof Yh&&(e=e._delegate),(t instanceof Xh||t instanceof Jh)&&(e instanceof Xh||e instanceof Jh)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function nf(t,e){return t instanceof Yh&&(t=t._delegate),e instanceof Yh&&(e=e._delegate),t instanceof $h&&e instanceof $h&&t.firestore===e.firestore&&Ji(t._query,e._query)&&t._converter===e._converter}var rf=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Pc(this,"async_queue_retry"),this.bc=function(){var e=Nc();e&&Er("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Nc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Nc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise((function(t){})):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.gc.push(t),e.Vc()}))},t.prototype.Vc=function(){return mr(this,void 0,void 0,(function(){var t,e=this;return br(this,(function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!ks(t=n.sent()))throw t;return Er("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi((function(){return e.Vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Pc=function(t){var e=this,n=this.yc.then((function(){return e.Ac=!0,t().catch((function(t){throw e.Ic=t,e.Ac=!1,Sr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ac=!1,t}))}));return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=cl.createAndSchedule(this,t,e,n,(function(t){return r.Sc(t)}));return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Ar()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return mr(this,void 0,void 0,(function(){var t;return br(this,(function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then((function(){e.Tc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()}))},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function of(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var af=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ws,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),sf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new rf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return yr(e,t),e.prototype._terminate=function(){return this._firestoreClient||cf(this),this._firestoreClient.terminate()},e}(Qh);function uf(t){return t._firestoreClient||cf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cf(t){var e=t._freezeSettings(),n=function(t,e,n){return new Ph(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new bh(t._credentials,t._queue,n)}function lf(t,e,n){var r=this,i=new ws;return t.asyncQueue.enqueue((function(){return mr(r,void 0,void 0,(function(){var r;return br(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,_h(t,n)];case 1:return o.sent(),[4,wh(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Br.FAILED_PRECONDITION||t.code===Br.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function hf(t){if(t._initialized||t._terminated)throw new Kr(Br.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ff=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Kr(Br.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),pf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Yr.fromBase64String(e))}catch(e){throw new Kr(Br.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Yr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),df=function(t){this._methodName=t},vf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Kr(Br.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Kr(Br.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Or(this._lat,t._lat)||Or(this._long,t._long)},t}(),gf=/^__.*__$/,yf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Mo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Lo(t,this.data,e,this.fieldTransforms)},t}(),mf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Mo(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function bf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ar()}}var _f=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return qf(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(bf(this.Fc)&&gf.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),wf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Dc(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new _f({Fc:t,methodName:e,Kc:n,path:Hr.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function If(t){var e=t._freezeSettings(),n=Dc(t._databaseId);return new wf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Mf("Data must be an object, but it was:",a,r);var s,u,c=xf(r,a);if(o.merge)s=new oo(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=Ff(e,f[h],n);if(!a.contains(p))throw new Kr(Br.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Vf(l,p)||l.push(p)}s=new oo(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new yf(new ao(c),s,u)}var Ef=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw 1===t.Fc?t.Uc(this._methodName+"() can only appear at the top level of your update data"):t.Uc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(df);function Sf(t,e,n){return new _f({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var Cf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype._toFieldTransform=function(t){return new So(t.path,new yo)},e.prototype.isEqual=function(t){return t instanceof e},e}(df),kf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return yr(e,t),e.prototype._toFieldTransform=function(t){var e=Sf(this,t,!0),n=this.jc.map((function(t){return Of(t,e)})),r=new mo(n);return new So(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(df),Af=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return yr(e,t),e.prototype._toFieldTransform=function(t){var e=Sf(this,t,!0),n=this.jc.map((function(t){return Of(t,e)})),r=new _o(n);return new So(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(df),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return yr(e,t),e.prototype._toFieldTransform=function(t){var e=new Io(t.D,ho(t.D,this.Gc));return new So(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(df);function Df(t,e,n,r){var i=t.Wc(1,e,n);Mf("Data must be an object, but it was:",i,r);var o=[],a=new so;Fr(r,(function(t,r){var s=Uf(e,t,n);r instanceof Yh&&(r=r._delegate);var u=i.Bc(s);if(r instanceof Ef)o.push(s);else{var c=Of(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new oo(o);return new mf(a.v(),s,i.fieldTransforms)}function Pf(t,e,n,r,i,o){var a=t.Wc(1,e,n),s=[Ff(e,r,n)],u=[i];if(o.length%2!=0)throw new Kr(Br.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Ff(e,o[c])),u.push(o[c+1]);for(var l=[],h=new so,f=s.length-1;f>=0;--f)if(!Vf(l,s[f])){var p=s[f],d=u[f];d instanceof Yh&&(d=d._delegate);var v=a.Bc(p);if(d instanceof Ef)l.push(p);else{var g=Of(d,v);null!=g&&(l.push(p),h.set(p,g))}}var y=new oo(l);return new mf(h.v(),y,a.fieldTransforms)}function Rf(t,e,n,r){return void 0===r&&(r=!1),Of(n,t.Wc(r?4:3,e))}function Of(t,e){if(t instanceof Yh&&(t=t._delegate),Lf(t))return Mf("Unsupported field value:",e,t),xf(t,e);if(t instanceof df)return function(t,e){if(!bf(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Of(o[i],e.qc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Yh&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ho(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ti.fromDate(t);return{timestampValue:Ia(e.D,n)}}if(t instanceof ti)return n=new ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ia(e.D,n)};if(t instanceof vf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pf)return{bytesValue:Ta(e.D,t._byteString)};if(t instanceof Xh){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ca(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Wh(t))}(t,e)}function xf(t,e){var n={};return jr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(function(t,r){var i=Of(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Lf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ti||t instanceof vf||t instanceof pf||t instanceof Xh||t instanceof df)}function Mf(t,e,n){if(!Lf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Wh(n);throw"an object"===r?e.Uc(t+" a custom object"):e.Uc(t+" "+r)}}function Ff(t,e,n){if(e instanceof Yh&&(e=e._delegate),e instanceof ff)return e._internalPath;if("string"==typeof e)return Uf(t,e);throw qf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jf=new RegExp("[~\\*/\\[\\]]");function Uf(t,e,n){if(e.search(jf)>=0)throw qf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ff.bind.apply(ff,_r([void 0],e.split(".")))))._internalPath}catch(r){throw qf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function qf(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Kr(Br.INVALID_ARGUMENT,(s+=". ")+t+u)}function Vf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Bf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Xh(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Kf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(Wf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Bf);function Wf(t,e){return"string"==typeof e?Uf(t,e):e instanceof Yh?e._delegate._internalPath:e._internalPath}var zf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Gf=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return yr(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(Wf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Bf),Hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Gf),Qf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new zf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Hf(n._firestore,n._userDataWriter,r.key,r,new zf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Kr(Br.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Hf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new zf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Hf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new zf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Yf(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Yf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ar()}}function Xf(t,e){return t instanceof Gf&&e instanceof Gf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qf&&e instanceof Qf&&t._firestore===e._firestore&&nf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function $f(t){if(zi(t)&&0===t.explicitOrderBy.length)throw new Kr(Br.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jf=function(){};function Zf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return yr(e,t),e.prototype._apply=function(t){var e=If(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Kr(Br.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){sp(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(ap(r,t,h))}s={arrayValue:{values:u}}}else s=ap(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||sp(a,o),s=Rf(n,"where",a,"in"===o||"not-in"===o);var f=Ci.create(i,o,s);return function(t,e){if(e.g()){var n=Hi(t);if(null!==n&&!n.isEqual(e.field))throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Gi(t);null!==r&&up(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Kr(Br.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Kr(Br.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new $h(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Jf),ep=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return yr(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Fi(e,n);return function(t,e){if(null===Gi(t)){var n=Hi(t);null!==n&&up(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new $h(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Vi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Jf),np=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return yr(e,t),e.prototype._apply=function(t){return new $h(t.firestore,t._converter,$i(t._query,this.Xc,this.Zc))},e}(Jf),rp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return yr(e,t),e.prototype._apply=function(t){var e=op(t,this.type,this.ta,this.ea);return new $h(t.firestore,t._converter,function(t,e){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Jf),ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return yr(e,t),e.prototype._apply=function(t){var e=op(t,this.type,this.ta,this.ea);return new $h(t.firestore,t._converter,function(t,e){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Jf);function op(t,e,n,r){if(n[0]instanceof Yh&&(n[0]=n[0]._delegate),n[0]instanceof Bf)return function(t,e,n,r,i){if(!r)throw new Kr(Br.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Yi(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(hi(e,r.key));else{var c=r.field(u.field);if(ei(c))throw new Kr(Br.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Li(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=If(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Kr(Br.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Qi(t)&&-1!==c.indexOf("/"))throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(zr.fromString(c));if(!Qr.isDocumentKey(l))throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Qr(l);s.push(hi(e,h))}else{var f=Rf(n,r,c);s.push(f)}}return new Li(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ap(t,e,n){if(n instanceof Yh&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qi(e)&&-1!==n.indexOf("/"))throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(zr.fromString(n));if(!Qr.isDocumentKey(r))throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return hi(t,new Qr(r))}if(n instanceof Xh)return hi(t,n._key);throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Wh(n)+".")}function sp(t,e){if(!Array.isArray(t)||0===t.length)throw new Kr(Br.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Kr(Br.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function up(t,e,n){if(!n.isEqual(e))throw new Kr(Br.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var cp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ii(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ar()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Fr(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new vf(Jr(t.latitude),Jr(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ni(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ri(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=$r(t);return new ti(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=zr.fromString(t);Nr($a(n));var r=new Rh(n.get(1),n.get(3)),i=new Qr(n.popFirst(5));return r.isEqual(e)||Sr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function lp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var hp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return yr(e,t),e.prototype.convertBytes=function(t){return new pf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xh(this.firestore,null,e)},e}(cp),fp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=If(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=pp(t,this._firestore),i=lp(r._converter,e,n),o=Tf(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,ko.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=pp(t,this._firestore);return e instanceof Yh&&(e=e._delegate),o="string"==typeof e||e instanceof ff?Pf(this._dataReader,"WriteBatch.update",a._key,e,n,r):Df(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,ko.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=pp(t,this._firestore);return this._mutations=this._mutations.concat(new Ko(e._key,ko.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Kr(Br.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function pp(t,e){if(t instanceof Yh&&(t=t._delegate),t.firestore!==e)throw new Kr(Br.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return yr(e,t),e.prototype.convertBytes=function(t){return new pf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xh(this.firestore,null,e)},e}(cp);function vp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=zh(t,Xh);var o=zh(t.firestore,sf),a=If(o);return e instanceof Yh&&(e=e._delegate),yp(o,[("string"==typeof e||e instanceof ff?Pf(a,"updateDoc",t._key,e,n,r):Df(a,"updateDoc",t._key,e)).toMutation(t._key,ko.exists(!0))])}function gp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Yh&&(t=t._delegate);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||of(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(of(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Xh)c=zh(t.firestore,sf),l=Ki(t._key.path),u={next:function(e){i[s]&&i[s](mp(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=zh(t,$h);c=zh(p.firestore,sf),l=p._query;var d=new dp(c);u={next:function(t){i[s]&&i[s](new Qf(c,d,p,t))},error:i[s+1],complete:i[s+2]},$f(t._query)}return function(t,e,n,r){var i=this,o=new vh(r),a=new wl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return mr(i,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return e=gl,[4,Ah(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Xo(),t.asyncQueue.enqueueAndForget((function(){return mr(i,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return e=yl,[4,Ah(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(uf(c),l,h,u)}function yp(t,e){return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget((function(){return mr(n,void 0,void 0,(function(){var n;return br(this,(function(i){switch(i.label){case 0:return n=Ll,[4,kh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(uf(t),e)}function mp(t,e,n){var r=n.docs.get(e._key),i=new dp(t);return new Gf(t,i,e._key,r,new zf(n.hasPendingWrites,n.fromCache),e._converter)}var bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return yr(e,t),e.prototype.get=function(e){var n=this,r=pp(e,this._firestore),i=new dp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Gf(n._firestore,i,r._key,t._document,new zf(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=If(t)}return t.prototype.get=function(t){var e=this,n=pp(t,this._firestore),r=new hp(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Ar();var i=t[0];if(i instanceof bi)return new Bf(e._firestore,r,n._key,null,n._converter);if(i instanceof mi)return new Bf(e._firestore,r,i.key,i,n._converter);throw Ar()}))},t.prototype.set=function(t,e,n){var r=pp(t,this._firestore),i=lp(r._converter,e,n),o=Tf(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=pp(t,this._firestore);return e instanceof Yh&&(e=e._delegate),o="string"==typeof e||e instanceof ff?Pf(this._dataReader,"Transaction.update",a._key,e,n,r):Df(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=pp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function _p(){if("undefined"==typeof Uint8Array)throw new Kr(Br.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function wp(){if("undefined"==typeof atob)throw new Kr(Br.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ip=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.fromBase64String=function(t){return wp(),new e(pf.fromBase64String(t))},e.fromUint8Array=function(t){return _p(),new e(pf.fromUint8Array(t))},e.prototype.toBase64=function(){return wp(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return _p(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Yh),Tp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){hf(t=zh(t,sf));var n=uf(t),r=t._freezeSettings(),i=new ph;return lf(n,i,new hh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){hf(t=zh(t,sf));var e=uf(t),n=t._freezeSettings(),r=new ph;return lf(e,r,new fh(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Kr(Br.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ws;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return mr(e,void 0,void 0,(function(){var e;return br(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return mr(this,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return Es.At()?(e=t+"main",[4,Es.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Lu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Rh||(i.sa=e),i}return yr(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=zh(t,Qh))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return mr(e,void 0,void 0,(function(){var e,n;return br(this,(function(r){switch(r.label){case 0:return[4,Eh(t)];case 1:return e=r.sent(),[4,Ch(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Dr(t);return e.Qr.delete(0),jc(e)}(n))]}}))}))}))}(uf(zh(this._delegate,sf)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return mr(e,void 0,void 0,(function(){var e,n;return br(this,(function(r){switch(r.label){case 0:return[4,Eh(t)];case 1:return e=r.sent(),[4,Ch(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return mr(this,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return(e=Dr(t)).Qr.add(0),[4,Uc(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(uf(zh(this._delegate,sf)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Vh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ws;return t.asyncQueue.enqueueAndForget((function(){return mr(e,void 0,void 0,(function(){var e;return br(this,(function(r){switch(r.label){case 0:return e=Vl,[4,kh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(uf(zh(this._delegate,sf)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new vh(e);return t.asyncQueue.enqueueAndForget((function(){return mr(n,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return e=function(t,e){Dr(t).Zr.add(e),e.next()},[4,Ah(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Xo(),t.asyncQueue.enqueueAndForget((function(){return mr(n,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return e=function(t,e){Dr(t).Zr.delete(e)},[4,Ah(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(uf(t=zh(t,sf)),of(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Kr(Br.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new jp(this,Zh(this._delegate,t))}catch(t){throw Dp(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Np(this,tf(this._delegate,t))}catch(t){throw Dp(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Lp(this,function(t,e){if(t=zh(t,Qh),Uh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Kr(Br.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new $h(t,null,function(t){return new Vi(zr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Dp(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget((function(){return mr(n,void 0,void 0,(function(){var n;return br(this,(function(i){switch(i.label){case 0:return[4,function(t){return Th(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new mh(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(uf(t),(function(n){return e(new bp(t,n))}))}(this._delegate,(function(n){return t(new Cp(e,n))}))},e.prototype.batch=function(){var t=this;return uf(this._delegate),new kp(new fp(this._delegate,(function(e){return yp(t._delegate,e)})))},e.prototype.loadBundle=function(t){throw new Kr(Br.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Kr(Br.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Yh),Sp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return yr(e,t),e.prototype.convertBytes=function(t){return new Ip(new pf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Np.ia(e,this.firestore,null)},e}(cp),Cp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new Sp(e),r}return yr(e,t),e.prototype.get=function(t){var e=this,n=Up(t);return this._delegate.get(n).then((function(t){return new Op(e._firestore,new Gf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},e.prototype.set=function(t,e,n){var r=Up(t);return n?(qh("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Up(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,_r([a,e,n],i)),this},e.prototype.delete=function(t){var e=Up(t);return this._delegate.delete(e),this},e}(Yh),kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.set=function(t,e,n){var r=Up(t);return n?(qh("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Up(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,_r([a,e,n],i)),this},e.prototype.delete=function(t){var e=Up(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(Yh),Ap=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return yr(e,t),e.prototype.fromFirestore=function(t,e){var n=new Hf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new xp(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Sp(t),n),i.set(n,o)),o},e}(Yh);Ap.oa=new WeakMap;var Np=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Sp(e),r}return yr(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Kr(Br.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Xh(n._delegate,r,new Qr(t)))},e.ia=function(t,n,r){return new e(n,new Xh(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new jp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new jp(this.firestore,Zh(this._delegate,t))}catch(t){throw Dp(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Yh&&(t=t._delegate),t instanceof Xh&&ef(this._delegate,t)},e.prototype.set=function(t,e){e=qh("DocumentReference.set",e);try{return function(t,e,n){t=zh(t,Xh);var r=zh(t.firestore,sf),i=lp(t._converter,e,n);return yp(r,[Tf(If(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,ko.none())])}(this._delegate,t,e)}catch(t){throw Dp(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?vp(this._delegate,t):vp.apply(void 0,_r([this._delegate,t,e],n))}catch(t){throw Dp(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return yp(zh((t=this._delegate).firestore,sf),[new Ko(t._key,ko.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pp(e),i=Rp(e,(function(e){return new Op(t.firestore,new Gf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return gp(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zh(t,Xh);var e=zh(t.firestore,sf),n=uf(e),r=new dp(e);return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget((function(){return mr(n,void 0,void 0,(function(){var n;return br(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return mr(this,void 0,void 0,(function(){var r,i;return br(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Dr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Kn.In(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof mi?n.resolve(i):i instanceof bi?n.resolve(null):n.reject(new Kr(Br.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ll(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Sh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Gf(e,r,t._key,n,new zf(n instanceof mi&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zh(t,Xh);var e=zh(t.firestore,sf);return Nh(uf(e),t._key,{source:"server"}).then((function(n){return mp(e,t,n)}))}(this._delegate):function(t){t=zh(t,Xh);var e=zh(t.firestore,sf);return Nh(uf(e),t._key).then((function(n){return mp(e,t,n)}))}(this._delegate)).then((function(t){return new Op(e.firestore,new Gf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ap.ra(this.firestore,t)):this._delegate.withConverter(null))},e}(Yh);function Dp(t,e,n){return t.message=t.message.replace(e,n),t}function Pp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!of(r))return r}return{}}function Rp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=of(t[0])?t[0]:of(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Op=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return yr(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Np(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Xf(this._delegate,t._delegate)},e}(Yh),xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Op),Lp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Sp(e),r}return yr(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Zf(this._delegate,function(t,e,n){var r=e,i=Wf("where",t);return new tp(i,r,n)}(t,n,r)))}catch(t){throw Dp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Zf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Wf("orderBy",t);return new ep(r,n)}(t,n)))}catch(t){throw Dp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Zf(this._delegate,function(t){return Gh("limit",t),new np("limit",t,"F")}(t)))}catch(t){throw Dp(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Zf(this._delegate,function(t){return Gh("limitToLast",t),new np("limitToLast",t,"L")}(t)))}catch(t){throw Dp(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rp("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Dp(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rp("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Dp(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Dp(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Dp(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return nf(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zh(t,$h);var e=zh(t.firestore,sf),n=uf(e),r=new dp(e);return function(t,e){var n=this,r=new ws;return t.asyncQueue.enqueueAndForget((function(){return mr(n,void 0,void 0,(function(){var n;return br(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return mr(this,void 0,void 0,(function(){var r,i,o,a,s;return br(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Xu(t,e,!0)];case 1:return s=u.sent(),r=new Al(e,s.jn),i=r.Io(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=ll(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Sh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Qf(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zh(t,$h);var e=zh(t.firestore,sf),n=uf(e),r=new dp(e);return Dh(n,t._query,{source:"server"}).then((function(n){return new Qf(e,r,t,n)}))}(this._delegate):function(t){t=zh(t,$h);var e=zh(t.firestore,sf),n=uf(e),r=new dp(e);return $f(t._query),Dh(n,t._query).then((function(n){return new Qf(e,r,t,n)}))}(this._delegate)).then((function(t){return new Fp(e.firestore,new Qf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pp(e),i=Rp(e,(function(e){return new Fp(t.firestore,new Qf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return gp(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ap.ra(this.firestore,t)):this._delegate.withConverter(null))},e}(Yh),Mp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return yr(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new xp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(Yh),Fp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return yr(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Lp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new xp(t._firestore,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Mp(e._firestore,t)}))},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new xp(n._firestore,r))}))},e.prototype.isEqual=function(t){return Xf(this._delegate,t._delegate)},e}(Yh),jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return yr(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Np(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Np(this.firestore,void 0===t?tf(this._delegate):tf(this._delegate,t))}catch(t){throw Dp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=zh(t.firestore,sf),r=tf(t),i=lp(t._converter,e);return yp(n,[Tf(If(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,ko.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Np(e.firestore,t)}))},e.prototype.isEqual=function(t){return ef(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ap.ra(this.firestore,t)):this._delegate.withConverter(null))},e}(Lp);function Up(t){return t instanceof Yh&&(t=t._delegate),zh(t,Xh)}var qp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(ff.bind.apply(ff,_r([void 0],e))))||this}return yr(e,t),e.documentId=function(){return new e(Hr.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof Yh&&(t=t._delegate),t instanceof ff&&this._delegate._internalPath.isEqual(t._internalPath)},e}(Yh),Vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yr(e,t),e.serverTimestamp=function(){var t=new Cf("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Ef("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kf("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Af("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Nf("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(Yh);var Bp,Kp,Wp=n(886),zp={Firestore:Ep,GeoPoint:vf,Timestamp:ti,Blob:Ip,Transaction:Cp,WriteBatch:kp,DocumentReference:Np,DocumentSnapshot:Op,Query:Lp,QueryDocumentSnapshot:xp,QuerySnapshot:Fp,CollectionReference:jp,FieldPath:qp,FieldValue:Vp,setLogLevel:function(t){var e;e=t,Ir.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Wp.wA("firestore",(function(t){return function(t,e){return new Ep(t,new sf(t,e),new Tp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},zp)))})(Bp=s.Z),Bp.registerVersion("@firebase/firestore","2.2.1"),(Kp=Ep).prototype.loadBundle=function(t){return function(t,e){var n=uf(t=zh(t,sf)),r=new af;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new gh(t,e)}(function(t,e){if(t instanceof Uint8Array)return dh(t,e);if(t instanceof ArrayBuffer)return dh(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,Dc(e));t.asyncQueue.enqueueAndForget((function(){return mr(i,void 0,void 0,(function(){var e;return br(this,(function(n){switch(n.label){case 0:return e=ch,[4,kh(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)},Kp.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return mr(n,void 0,void 0,(function(){var n;return br(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=Dr(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.He.getNamedQuery(t,e)}))},[4,Sh(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(uf(e=zh(e,sf)),n).then((function(t){return t?new $h(e,null,t.query):null}))).then((function(t){return t?new Lp(r,t):null}))};var Gp=function(t,e){return(Gp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Hp(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Qp(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create,Object.create;var Yp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xp=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Gp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),$p=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Hp(this,void 0,void 0,(function(){var t;return Qp(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Hp(this,void 0,void 0,(function(){return Qp(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Hp(this,void 0,void 0,(function(){var t,e;return Qp(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function Jp(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Zp,td,ed,nd=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Jp(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Jp(t,(function(t){return e.decode(t)})):t},t}(),rd=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new nd,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new $p(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Hp(this,void 0,void 0,(function(){var r,i;return Qp(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Hp(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,p;return Qp(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Xp("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(s),c=u.timer,l=u.promise,[4,Promise.race([id(c,this.postJSON(r,i,o)),l,id(c,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new Xp("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!Yp[s])return new Xp("internal","internal");r=Yp[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Xp(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new Xp("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new Xp("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function id(t,e){return Hp(this,void 0,void 0,(function(){var n;return Qp(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}Zp=s.Z,td=fetch.bind(self),ed={Functions:rd},Zp.INTERNAL.registerComponent(new Wp.wA("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new rd(r,i,o,n,td)}),"PUBLIC").setServiceProps(ed).setMultipleInstances(!0)),s.Z.registerVersion("@firebase/functions","0.6.4");var od=function(){return(od=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ad(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function sd(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function ud(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create,Object.create;var cd,ld=n(676),hd="w:0.4.22",fd=((cd={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',cd["not-registered"]="Firebase Installation is not registered.",cd["installation-not-found"]="Firebase Installation not found.",cd["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',cd["app-offline"]="Could not process request. Application offline.",cd["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",cd),pd=new c.LL("installations","Installations",fd);function dd(t){return t instanceof c.ZR&&t.code.includes("request-failed")}function vd(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function gd(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function yd(t,e){return ad(this,void 0,void 0,(function(){var n,r;return sd(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,pd.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function md(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function bd(t,e){var n=e.refreshToken,r=md(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function _d(t){return ad(this,void 0,void 0,(function(){var e;return sd(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function wd(t,e){var n=e.fid;return ad(this,void 0,void 0,(function(){var e,r,i,o,a,s;return sd(this,(function(u){switch(u.label){case 0:return e=vd(t),r=md(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:hd},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,_d((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(s=u.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:gd(s.authToken)}];case 3:return[4,yd("Create Installation",a)];case 4:throw u.sent()}}))}))}function Id(t){return new Promise((function(e){setTimeout(e,t)}))}var Td=/^[cdef][\w-]{21}$/;function Ed(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Td.test(e)?e:""}catch(t){return""}}function Sd(t){return t.appName+"!"+t.appId}var Cd=new Map;function kd(t,e){var n=Sd(t);Ad(n,e),function(t,e){var n=Dd();n&&n.postMessage({key:t,fid:e}),Pd()}(n,e)}function Ad(t,e){var n,r,i=Cd.get(t);if(i)try{for(var o=ud(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Nd=null;function Dd(){return!Nd&&"BroadcastChannel"in self&&((Nd=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Ad(t.data.key,t.data.fid)}),Nd}function Pd(){0===Cd.size&&Nd&&(Nd.close(),Nd=null)}var Rd="firebase-installations-store",Od=null;function xd(){return Od||(Od=(0,ld.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Rd)}}))),Od}function Ld(t,e){return ad(this,void 0,void 0,(function(){var n,r,i,o,a;return sd(this,(function(s){switch(s.label){case 0:return n=Sd(t),[4,xd()];case 1:return r=s.sent(),i=r.transaction(Rd,"readwrite"),[4,(o=i.objectStore(Rd)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||kd(t,e.fid),[2,e]}}))}))}function Md(t){return ad(this,void 0,void 0,(function(){var e,n,r;return sd(this,(function(i){switch(i.label){case 0:return e=Sd(t),[4,xd()];case 1:return n=i.sent(),[4,(r=n.transaction(Rd,"readwrite")).objectStore(Rd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Fd(t,e){return ad(this,void 0,void 0,(function(){var n,r,i,o,a,s;return sd(this,(function(u){switch(u.label){case 0:return n=Sd(t),[4,xd()];case 1:return r=u.sent(),i=r.transaction(Rd,"readwrite"),[4,(o=i.objectStore(Rd)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||kd(t,s.fid),[2,s]}}))}))}function jd(t){return ad(this,void 0,void 0,(function(){var e,n,r;return sd(this,(function(i){switch(i.label){case 0:return[4,Fd(t,(function(n){var r=function(t){return Vd(t||{fid:Ed(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(pd.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return ad(this,void 0,void 0,(function(){var n,r;return sd(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,wd(t,e)];case 1:return n=i.sent(),[2,Ld(t,n)];case 2:return dd(r=i.sent())&&409===r.customData.serverCode?[4,Md(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Ld(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ud(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Ud(t){return ad(this,void 0,void 0,(function(){var e,n,r,i;return sd(this,(function(o){switch(o.label){case 0:return[4,qd(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Id(100)];case 3:return o.sent(),[4,qd(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,jd(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function qd(t){return Fd(t,(function(t){if(!t)throw pd.create("installation-not-found");return Vd(t)}))}function Vd(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Bd(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return ad(this,void 0,void 0,(function(){var t,i,o,a,s,u;return sd(this,(function(c){switch(c.label){case 0:return t=function(t,e){var n=e.fid;return vd(t)+"/"+n+"/authTokens:generate"}(n,e),i=bd(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:hd}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,_d((function(){return fetch(t,s)}))];case 1:return(u=c.sent()).ok?[4,u.json()]:[3,3];case 2:return[2,gd(c.sent())];case 3:return[4,yd("Generate Auth Token",u)];case 4:throw c.sent()}}))}))}function Kd(t,e){return void 0===e&&(e=!1),ad(this,void 0,void 0,(function(){var n,r,i;return sd(this,(function(o){switch(o.label){case 0:return[4,Fd(t.appConfig,(function(r){if(!zd(r))throw pd.create("not-registered");var i,o=r.authToken;if(!e&&(2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i)))return r;if(1===o.requestStatus)return n=function(t,e){return ad(this,void 0,void 0,(function(){var n,r;return sd(this,(function(i){switch(i.label){case 0:return[4,Wd(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Id(100)];case 3:return i.sent(),[4,Wd(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Kd(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw pd.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return od(od({},t),{authToken:e})}(r);return n=function(t,e){return ad(this,void 0,void 0,(function(){var n,r,i;return sd(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Bd(t,e)];case 1:return n=o.sent(),i=od(od({},e),{authToken:n}),[4,Ld(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!dd(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Md(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=od(od({},e),{authToken:{requestStatus:0}}),[4,Ld(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,a),a}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Wd(t){return Fd(t,(function(t){if(!zd(t))throw pd.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?od(od({},t),{authToken:{requestStatus:0}}):t}))}function zd(t){return void 0!==t&&2===t.registrationStatus}function Gd(t){return ad(this,void 0,void 0,(function(){var e;return sd(this,(function(n){switch(n.label){case 0:return[4,jd(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Hd(t,e){return ad(this,void 0,void 0,(function(){var n,r,i,o;return sd(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return vd(t)+"/"+n}(t,e),r=bd(t,e),i={method:"DELETE",headers:r},[4,_d((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,yd("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Qd(t){return pd.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Wp.wA("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Qd("App Configuration");if(!t.name)throw Qd("App Name");try{for(var r=ud(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Qd(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return ad(this,void 0,void 0,(function(){var e,n,r;return sd(this,(function(i){switch(i.label){case 0:return[4,jd(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Kd(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),ad(this,void 0,void 0,(function(){return sd(this,(function(n){switch(n.label){case 0:return[4,Gd(t.appConfig)];case 1:return n.sent(),[4,Kd(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return ad(this,void 0,void 0,(function(){var e,n;return sd(this,(function(r){switch(r.label){case 0:return[4,Fd(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw pd.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw pd.create("app-offline");case 3:return[4,Hd(e,n)];case 4:return r.sent(),[4,Md(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Dd();var n=Sd(t),r=Cd.get(n);r||(r=new Set,Cd.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Sd(t),r=Cd.get(n);r&&(r.delete(e),0===r.size&&Cd.delete(n),Pd())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.22")}(s.Z);var Yd,Xd=function(){return(Xd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function $d(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Jd(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Zd(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create,Object.create;var tv,ev=((Yd={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Yd["only-available-in-window"]="This method is available in a Window context.",Yd["only-available-in-sw"]="This method is available in a service worker context.",Yd["permission-default"]="The notification permission was not granted and dismissed instead.",Yd["permission-blocked"]="The notification permission was not granted and blocked instead.",Yd["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Yd["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Yd["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Yd["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Yd["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Yd["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Yd["token-update-no-token"]="FCM returned no token when updating the user to push.",Yd["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Yd["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Yd["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Yd["invalid-vapid-key"]="The public VAPID key must be a string.",Yd["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Yd),nv=new c.LL("messaging","Messaging",ev),rv="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function iv(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ov(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(tv||(tv={}));var av="fcm_token_details_db",sv="fcm_token_object_Store";function uv(t){return $d(this,void 0,void 0,(function(){var e,n=this;return Jd(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(av))return[2,null];r.label=2;case 2:return e=null,[4,(0,ld.openDb)(av,5,(function(r){return $d(n,void 0,void 0,(function(){var n,i,o,a;return Jd(this,(function(s){switch(s.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(sv)?[4,(n=r.transaction.objectStore(sv)).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:iv(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:iv(o.auth),p256dh:iv(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:iv(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,(0,ld.deleteDb)(av)];case 4:return r.sent(),[4,(0,ld.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,ld.deleteDb)("undefined")];case 6:return r.sent(),[2,cv(e)?e:null]}}))}))}function cv(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var lv="firebase-messaging-store",hv=null;function fv(){return hv||(hv=(0,ld.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(lv)}}))),hv}function pv(t){return $d(this,void 0,void 0,(function(){var e,n,r;return Jd(this,(function(i){switch(i.label){case 0:return e=gv(t),[4,fv()];case 1:return[4,i.sent().transaction(lv).objectStore(lv).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,uv(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,dv(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function dv(t,e){return $d(this,void 0,void 0,(function(){var n,r,i;return Jd(this,(function(o){switch(o.label){case 0:return n=gv(t),[4,fv()];case 1:return r=o.sent(),[4,(i=r.transaction(lv,"readwrite")).objectStore(lv).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function vv(t){return $d(this,void 0,void 0,(function(){var e,n,r;return Jd(this,(function(i){switch(i.label){case 0:return e=gv(t),[4,fv()];case 1:return n=i.sent(),[4,(r=n.transaction(lv,"readwrite")).objectStore(lv).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function gv(t){return t.appConfig.appId}function yv(t,e){return $d(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Jd(this,(function(u){switch(u.label){case 0:return[4,wv(t)];case 1:n=u.sent(),r=Iv(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(_v(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),nv.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,nv.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw nv.create("token-subscribe-no-token");return[2,o.token]}}))}))}function mv(t,e){return $d(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Jd(this,(function(u){switch(u.label){case 0:return[4,wv(t)];case 1:n=u.sent(),r=Iv(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(_v(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),nv.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,nv.create("token-update-failed",{errorInfo:s});if(!o.token)throw nv.create("token-update-no-token");return[2,o.token]}}))}))}function bv(t,e){return $d(this,void 0,void 0,(function(){var n,r,i,o,a;return Jd(this,(function(s){switch(s.label){case 0:return[4,wv(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(_v(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,nv.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),nv.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function _v(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function wv(t){var e=t.appConfig,n=t.installations;return $d(this,void 0,void 0,(function(){var t;return Jd(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Iv(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==rv&&(o.web.applicationPubKey=i),o}function Tv(t,e,n){return $d(this,void 0,void 0,(function(){var r,i,o,a;return Jd(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw nv.create("permission-blocked");return[4,kv(e,n)];case 1:return r=s.sent(),[4,pv(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:iv(r.getKey("auth")),p256dh:iv(r.getKey("p256dh"))},i?[3,3]:[2,Cv(t,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,bv(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,Cv(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Sv({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,p}))}))}function Ev(t,e){return $d(this,void 0,void 0,(function(){var n,r;return Jd(this,(function(i){switch(i.label){case 0:return[4,pv(t)];case 1:return(n=i.sent())?[4,bv(t,n.token)]:[3,4];case 2:return i.sent(),[4,vv(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Sv(t,e,n){return $d(this,void 0,void 0,(function(){var r,i,o;return Jd(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,mv(e,t)];case 1:return r=a.sent(),i=Xd(Xd({},t),{token:r,createTime:Date.now()}),[4,dv(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Ev(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function Cv(t,e){return $d(this,void 0,void 0,(function(){var n,r;return Jd(this,(function(i){switch(i.label){case 0:return[4,yv(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,dv(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function kv(t,e){return $d(this,void 0,void 0,(function(){var n;return Jd(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ov(e)})]}}))}))}function Av(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function Nv(t){return new Promise((function(e){setTimeout(e,t)}))}var Dv=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw nv.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return $d(this,void 0,void 0,(function(){var n;return Jd(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,pv(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:rv,r.label=2;case 2:return[2,Tv(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Ev(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw nv.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw nv.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw nv.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw nv.create("only-available-in-window")},t.prototype.onMessage=function(){throw nv.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw nv.create("only-available-in-window")},t.prototype.onPush=function(t){return $d(this,void 0,void 0,(function(){var e,n,r,i;return Jd(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,xv()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Ov(n,e)]:(r=!1,e.notification?[4,Lv(Pv(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Nv(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return $d(this,void 0,void 0,(function(){var r;return Jd(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Ev(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,pv(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Ev(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Tv(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:rv)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return $d(this,void 0,void 0,(function(){var r,i,o,a,s;return Jd(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(Av(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,Rv(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,Nv(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=tv.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function Pv(t){var e,n=Xd({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Rv(t){return $d(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Jd(this,(function(u){switch(u.label){case 0:return[4,xv()];case 1:e=u.sent();try{for(n=Zd(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function Ov(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=tv.PUSH_RECEIVED;try{for(var i=Zd(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function xv(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Lv(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Mv=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return $d(this,void 0,void 0,(function(){var e,n;return Jd(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===tv.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Av(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return $d(this,void 0,void 0,(function(){return Jd(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw nv.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Tv(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return $d(this,void 0,void 0,(function(){return Jd(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=rv),[2]}))}))},t.prototype.updateSwReg=function(t){return $d(this,void 0,void 0,(function(){return Jd(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw nv.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return $d(this,void 0,void 0,(function(){var t,e;return Jd(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),nv.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return $d(this,void 0,void 0,(function(){return Jd(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Ev(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return $d(this,void 0,void 0,(function(){var t;return Jd(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?nv.create("permission-blocked"):nv.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw nv.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw nv.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw nv.create("invalid-sw-registration");if(this.swRegistration)throw nv.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw nv.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw nv.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return $d(this,void 0,void 0,(function(){var n;return Jd(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case tv.NOTIFICATION_CLICKED:return"notification_open";case tv.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function Fv(t){return nv.create("missing-app-config-values",{valueName:t})}var jv={isSupported:Uv};function Uv(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}s.Z.INTERNAL.registerComponent(new Wp.wA("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Fv("App Configuration Object");if(!t.name)throw Fv("App Name");var r=t.options;try{for(var i=Zd(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw Fv(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Uv())throw nv.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Dv(n):new Mv(n)}),"PUBLIC").setServiceProps(jv));var qv=function(t,e){return(qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},Vv=function(){return(Vv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Bv(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Kv(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Wv(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var zv="firebasestorage.googleapis.com",Gv=function(t){function e(n,r){var i=t.call(this,Hv(n),"Firebase Storage: "+r+" ("+Hv(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}qv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._codeEquals=function(t){return Hv(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(c.ZR);function Hv(t){return"storage/"+t}function Qv(){return new Gv("unknown","An unknown error occurred, please check the error payload for server response.")}function Yv(){return new Gv("canceled","User canceled the upload/download.")}function Xv(){return new Gv("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $v(t){return new Gv("invalid-argument",t)}function Jv(){return new Gv("app-deleted","The Firebase app was deleted.")}function Zv(t){return new Gv("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tg(t,e){return new Gv("invalid-format","String does not match format '"+t+"': "+e)}function eg(t){throw new Gv("internal-error","Internal error: "+t)}var ng={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},rg=function(t,e){this.data=t,this.contentType=e||null};function ig(t,e){switch(t){case ng.RAW:return new rg(og(e));case ng.BASE64:case ng.BASE64URL:return new rg(ag(t,e));case ng.DATA_URL:return new rg((n=new ug(e)).base64?ag(ng.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw tg(ng.DATA_URL,"Malformed data URL.")}return og(e)}(n.rest),new ug(e).contentType)}var n;throw Qv()}function og(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ag(t,e){switch(t){case ng.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw tg(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case ng.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw tg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw tg(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var sg,ug=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw tg(ng.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},cg={STATE_CHANGED:"state_changed"},lg={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hg(t){switch(t){case"running":case"pausing":case"canceling":return lg.RUNNING;case"paused":return lg.PAUSED;case"success":return lg.SUCCESS;case"canceled":return lg.CANCELED;case"error":default:return lg.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(sg||(sg={}));var fg=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=sg.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=sg.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=sg.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw eg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw eg("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw eg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw eg("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),pg=function(){function t(){}return t.prototype.createXhrIo=function(){return new fg},t}(),dg=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new Gv("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=zv.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){var h=l[c.indices.bucket],f=l[c.indices.path];f||(f=""),n=new t(h,f),c.postModify(n);break}}if(null==n)throw function(t){return new Gv("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}(),vg=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function gg(t){return"string"==typeof t||t instanceof String}function yg(t){return mg()&&t instanceof Blob}function mg(){return"undefined"!=typeof Blob}function bg(t,e,n,r){if(r<e)throw $v("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw $v("Invalid value for '"+t+"'. Expected "+n+" or less.")}function _g(t){return"https://"+zv+"/v0"+t}function wg(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Ig=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=Qv()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?Jv():Yv()):o(r=new Gv("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Tg(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Tg(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===sg.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Tg(a,n))}else{var s=n.getErrorCode()===sg.ABORT;e(!1,new Tg(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Wv([null,t],e));else{var r;u()||a?l.call.apply(l,Wv([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout((function(){a=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Tg=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Eg(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Sg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Eg();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(mg())return new Blob(t);throw new Gv("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Cg=function(){function t(t,e){var n=0,r="";yg(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(yg(this.data_)){var r=(i=this.data_,o=e,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(mg()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Sg.apply(null,r))}var i=e.map((function(t){return gg(t)?ig(ng.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function kg(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Ag(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Ng(t,e){return e}var Dg=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Ng},Pg=null;function Rg(){if(Pg)return Pg;var t=[];t.push(new Dg("bucket")),t.push(new Dg("generation")),t.push(new Dg("metageneration")),t.push(new Dg("name","fullPath",!0));var e=new Dg("name");e.xform=function(t,e){return function(t){return!gg(t)||t.length<2?t:Ag(t)}(e)},t.push(e);var n=new Dg("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Dg("timeCreated")),t.push(new Dg("updated")),t.push(new Dg("md5Hash",null,!0)),t.push(new Dg("cacheControl",null,!0)),t.push(new Dg("contentDisposition",null,!0)),t.push(new Dg("contentEncoding",null,!0)),t.push(new Dg("contentLanguage",null,!0)),t.push(new Dg("contentType",null,!0)),t.push(new Dg("metadata","customMetadata",!0)),Pg=t}function Og(t,e,n){var r=kg(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new dg(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}function xg(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Lg=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Mg(t){if(!t)throw Qv()}function Fg(t,e){return function(n,r){var i=Og(t,r,e);return Mg(null!==i),i}}function jg(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new Gv("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Gv("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Gv("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Ug(t){var e=jg(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Gv("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function qg(t,e,n){var r=_g(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Lg(r,"GET",Fg(t,n),i);return o.errorHandler=Ug(e),o}function Vg(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=_g(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,u=new Lg(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=kg(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new dg(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t._makeStorageReference(new dg(e,l.name)),r.items.push(s)}return r}(t,e,r)}(t,e,r);return Mg(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=jg(e),u}function Bg(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Kg=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Wg(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Mg(!1)}return Mg(!!n&&-1!==(e||["active"]).indexOf(n)),n}var zg=262144;var Gg=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Hg(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Qg=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Rg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Bg(e,r,i),s={name:a.fullPath},u=_g(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=xg(a,n),h=t.maxUploadRetryTime,f=new Lg(u,"POST",(function(t){var e;Wg(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Mg(!1)}return Mg(gg(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=jg(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Lg(n,"POST",(function(t){var e=Wg(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Mg(!1)}n||Mg(!1);var i=Number(n);return Mg(!isNaN(i)),new Kg(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=jg(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=zg*this._chunkMultiplier,n=new Kg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new Kg(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Gv("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,f);if(null===d)throw Xv();var v=e.maxUploadRetryTime,g=new Lg(n,"POST",(function(t,n){var i,a=Wg(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?Fg(e,o)(t,n):null,new Kg(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=jg(t),g}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var a=t._ref.storage._makeRequest(o,i);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){zg*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=qg(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Bg(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+xg(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Cg.getBlob(c,r,l);if(null===h)throw Xv();var f={name:u.fullPath},p=_g(o),d=t.maxUploadRetryTime,v=new Lg(p,"POST",Fg(t,n),d);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=jg(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Yv(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=hg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Gg(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(hg(this._state)){case lg.SUCCESS:Hg(this._resolve.bind(null,this.snapshot))();break;case lg.CANCELED:case lg.ERROR:Hg(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(hg(this._state)){case lg.RUNNING:case lg.PAUSED:t.next&&Hg(t.next.bind(t,this.snapshot))();break;case lg.SUCCESS:t.complete&&Hg(t.complete.bind(t))();break;case lg.CANCELED:case lg.ERROR:t.error&&Hg(t.error.bind(t,this._error))();break;default:t.error&&Hg(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Yg=function(){function t(t,e){this._service=t,this._location=e instanceof dg?e:dg.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new dg(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Ag(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new dg(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Zv(t)},t}();function Xg(t){var e={prefixes:[],items:[]};return $g(t,e).then((function(){return e}))}function $g(t,e,n){return Bv(this,void 0,void 0,(function(){var r,i,o;return Kv(this,(function(a){switch(a.label){case 0:return[4,Jg(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,$g(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Jg(t,e){return Bv(this,void 0,void 0,(function(){var n,r,i;return Kv(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&bg("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=Vg(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function Zg(t){return Bv(this,void 0,void 0,(function(){var e,n;return Kv(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=_g(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Lg(r,"GET",function(t,e){return function(n,r){var i=Og(t,r,e);return Mg(null!==i),function(t,e){var n=kg(e);if(null===n)return null;if(!gg(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return _g("/b/"+i(n)+"/o/"+i(r))+wg({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=Ug(e),o}(t.storage,t._location,Rg()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Gv("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function ty(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new dg(t._location.bucket,n);return new Yg(t.storage,r)}function ey(t){return/^[A-Za-z]+:\/\//.test(t)}function ny(t,e){if(t instanceof iy){var n=t;if(null==n._bucket)throw new Gv("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Yg(n,n._bucket);return null!=e?ny(r,e):r}if(void 0!==e){if(e.includes(".."))throw $v('`path` param cannot contain ".."');return ty(t,e)}return t}function ry(t,e){if(e&&ey(e)){if(t instanceof iy)return new Yg(t,e);throw $v("To use ref(service, url), the first argument must be a Storage instance.")}return ny(t,e)}var iy=function(){function t(t,e,n,r,i){var o,a;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?dg.makeFromBucketSpec(r):null==(a=null==(o=this.app.options)?void 0:o.storageBucket)?null:dg.makeFromBucketSpec(a)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){bg("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){bg("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Bv(this,void 0,void 0,(function(){var t,e;return Kv(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Yg(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new vg(Jv());var r=function(t,e,n,r,i){var o=wg(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(s,i),new Ig(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}();function oy(t,e){return ry(t,e)}var ay=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),sy=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new ay(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new ay(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new ay(t,i,i._ref))}:{next:e.next?function(t){return e.next(new ay(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),uy=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new cy(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new cy(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),cy=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return ty(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new sy(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Qg(t,new Cg(e),n)}(t,e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=ng.RAW),this._throwIfRoot("putString");var r=ig(e,t),i=Vv({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new sy(new Qg(this._delegate,new Cg(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Xg(t)}(this._delegate).then((function(e){return new uy(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return Jg(t,e)}(this._delegate,t||void 0).then((function(t){return new uy(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return function(t){return Bv(this,void 0,void 0,(function(){var e,n;return Kv(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=qg(t.storage,t._location,Rg()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t)}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Bv(this,void 0,void 0,(function(){var n,r;return Kv(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=_g(e.fullServerUrl()),o=xg(n,r),a=t.maxOperationRetryTime,s=new Lg(i,"PATCH",Fg(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Ug(e),s}(t.storage,t._location,e,Rg()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(t,e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Zg(t)}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return Bv(this,void 0,void 0,(function(){var e,n;return Kv(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=_g(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new Lg(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Ug(e),i}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t)}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Zv(t)},t}(),ly=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(ey(t))throw $v("ref() expected a child path but got a URL, use refFromURL instead.");return new cy(oy(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!ey(t))throw $v("refFromURL() expected a full URL but got a child path, use ref() instead.");try{dg.makeFromUrl(t)}catch(t){throw $v("refFromUrl() expected a valid full URL but got an invalid one.")}return new cy(oy(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function hy(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new ly(r,new iy(r,i,new pg,n,s.Z.SDK_VERSION))}!function(t){var e={TaskState:lg,TaskEvent:cg,StringFormat:ng,Storage:iy,Reference:cy};t.INTERNAL.registerComponent(new Wp.wA("storage",hy,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.5")}(s.Z);var fy=function(){return(fy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function py(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var dy,vy,gy,yy="0.4.8",my=yy,by="FB-PERF-TRACE-MEASURE",_y="_wt_",wy="_fcp",Iy="_fid",Ty="@firebase/performance/config",Ey="@firebase/performance/configexpire",Sy="Performance",Cy=((dy={})["trace started"]="Trace {$traceName} was started before.",dy["trace stopped"]="Trace {$traceName} is not running.",dy["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",dy["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",dy["no window"]="Window is not available.",dy["no app id"]="App id is not available.",dy["no project id"]="Project id is not available.",dy["no api key"]="Api key is not available.",dy["invalid cc log"]="Attempted to queue invalid cc event",dy["FB not default"]="Performance can only start when Firebase app instance is the default one.",dy["RC response not ok"]="RC response is not ok",dy["invalid attribute name"]="Attribute name {$attributeName} is invalid.",dy["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",dy["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",dy["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",dy),ky=new c.LL("performance",Sy,Cy),Ay=new u.Yd(Sy);Ay.logLevel=u.in.INFO;var Ny,Dy=function(){function t(t){if(this.window=t,!t)throw ky.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,c.hl)()||(Ay.info("IndexedDB is not supported by current browswer"),!1):(Ay.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===vy&&(vy=new t(gy)),vy},t}();function Py(t,e){var n=t.length-e.length;if(n<0||n>1)throw ky.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Ry,Oy,xy=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Py("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Py("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw ky.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw ky.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw ky.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Ny&&(Ny=new t),Ny},t}();function Ly(){return Ry}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(Oy||(Oy={}));var My=["firebase_","google_","ga_"],Fy=new RegExp("^[a-zA-Z]\\w*$");function jy(){var t=Dy.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Uy(){switch(Dy.getInstance().document.visibilityState){case"visible":return Oy.VISIBLE;case"hidden":return Oy.HIDDEN;default:return Oy.UNKNOWN}}function qy(){var t=Dy.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var Vy="Could not fetch config, will use default configs";function By(t){if(!t)return t;var e=xy.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=true,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Ky(e.tracesSamplingRate),e.logNetworkAfterSampling=Ky(e.networkRequestsSamplingRate),t}function Ky(t){return Math.random()<=t}var Wy,zy=1;function Gy(){return zy=2,Wy=Wy||function(){var t=Dy.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=xy.getInstance().installationsService.getId()).then((function(t){Ry=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=Dy.getInstance().localStorage;if(t){var e=t.getItem(Ey);if(e&&Number(e)>Date.now()){var n=t.getItem(Ty);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(By(e),Promise.resolve()):function(t){return(e=xy.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+xy.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+xy.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:xy.getInstance().getAppId(),app_version:my,sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw ky.create("RC response not ok")}))})).catch((function(){Ay.info(Vy)}));var e}(t).then(By).then((function(t){return function(t){var e=Dy.getInstance().localStorage;t&&e&&(e.setItem(Ty,JSON.stringify(t)),e.setItem(Ey,String(Date.now()+60*xy.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return Hy()}),(function(){return Hy()}))}function Hy(){zy=3}var Qy,Yy=1e4,Xy=3,$y=[],Jy=!1;function Zy(t){setTimeout((function(){var t,e;if(0!==Xy)return $y.length?(e=(t=$y.splice(0,1e3)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=xy.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||Ay.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=Yy;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&($y=py(py([],e),$y),Ay.info("Retry transport request later.")),Xy=3,Zy(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:xy.getInstance().logSource,log_event:e},t).catch((function(){$y=py(py([],t),$y),Xy--,Ay.info("Tries left: "+Xy+"."),Zy(Yy)}))):Zy(Yy)}),t)}function tm(t){if(!t.eventTime||!t.message)throw ky.create("invalid cc log");$y=py(py([],$y),[t])}function em(t,e){Qy||(Qy=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];tm({message:t.apply(void 0,e),eventTime:Date.now()})}}(im)),Qy(t,e)}function nm(t){var e=xy.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Dy.getInstance().requiredApisAvailable()&&(t.isAuto&&Uy()!==Oy.VISIBLE||(3===zy?rm(t):Gy().then((function(){return rm(t)}),(function(){return rm(t)}))))}function rm(t){if(Ly()){var e=xy.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return em(t,1)}),0)}}function im(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:om(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:om(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function om(){return{google_app_id:xy.getInstance().getAppId(),app_instance_id:Ly(),web_app_info:{sdk_version:my,page_url:Dy.getInstance().getUrl(),service_worker_status:jy(),visibility_state:Uy(),effective_connection_type:qy()},application_process_state:0}}var am=["_fp",wy,Iy],sm=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Dy.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw ky.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw ky.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),nm(this)},t.prototype.record=function(t,e,n){if(t<=0)throw ky.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw ky.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=fy({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}nm(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith(_y)&&am.indexOf(i)>-1)&&i.startsWith("_"))throw ky.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&Ay.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||My.some((function(t){return n.startsWith(t)}))||!n.match(Fy)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw ky.create("invalid attribute name",{attributeName:t});if(!i)throw ky.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return fy({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=Dy.getInstance().getUrl();if(i){var o=new t(_y+i,!0),a=Math.floor(1e3*Dy.getInstance().getTimeOrigin());if(o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(wy,Math.floor(1e3*u.startTime)),r&&o.putMetric(Iy,Math.floor(1e3*r))}nm(o)}},t.createUserTimingTrace=function(e){nm(new t(e,!1,e))},t}();function um(t){var e=t;if(e&&void 0!==e.responseStart){var n=Dy.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=xy.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return em(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function cm(){Ly()&&(setTimeout((function(){return function(){var t=Dy.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){sm.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),sm.createOobTrace(e,n,t))}))}else sm.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=Dy.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)um(n[e]);t.setupObserver("resource",um)}()}),0),setTimeout((function(){return function(){for(var t=Dy.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)lm(n[e]);t.setupObserver("measure",lm)}()}),0))}function lm(t){var e=t.name;e.substring(0,by.length)!==by&&sm.createUserTimingTrace(e)}var hm=function(){function t(t){this.app=t,Dy.getInstance().requiredApisAvailable()&&(0,c.eu)().then((function(t){t&&(Jy||(Zy(5500),Jy=!0),Gy().then(cm,cm))})).catch((function(t){Ay.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new sm(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return xy.getInstance().instrumentationEnabled},set:function(t){xy.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return xy.getInstance().dataCollectionEnabled},set:function(t){xy.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Wp.wA("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw ky.create("FB not default");if("undefined"==typeof window)throw ky.create("no window");return function(t){gy=t}(window),xy.getInstance().firebaseAppInstance=t,xy.getInstance().installationsService=e,new hm(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance",yy)}(s.Z);var fm=function(){return(fm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function pm(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function dm(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create,Object.create;var vm,gm,ym="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(vm||(vm={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(gm||(gm={}));var mm,bm=new u.Yd("@firebase/analytics");function _m(t,e,n,r,i,o){return pm(this,void 0,void 0,(function(){var a,s,u,c;return dm(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),bm.error(c),[3,8];case 8:return t(vm.CONFIG,i,o),[2]}}))}))}function wm(t,e,n,r,i){return pm(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f;return dm(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(h=l[c],"break"!==u(h));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(vm.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),bm.error(f),[3,5];case 5:return[2]}}))}))}var Im=((mm={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",mm["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",mm["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",mm["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",mm["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",mm["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",mm["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",mm["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',mm["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',mm),Tm=new c.LL("analytics","Analytics",Im),Em=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Sm(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Cm(t){var e;return pm(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return dm(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:Sm(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Tm.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function km(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Em),pm(this,void 0,void 0,(function(){var e,a,s,u,l,h,f;return dm(this,(function(p){switch(p.label){case 0:e=t.appId,a=t.measurementId,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Am(n,i)];case 2:return p.sent(),[3,4];case 3:if(s=p.sent(),a)return bm.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return p.trys.push([4,6,,7]),[4,Cm(t)];case 5:return u=p.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof c.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l=p.sent())){if(r.deleteThrottleMetadata(e),a)return bm.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:a}];throw l}return h=503===Number(l.customData.httpStatus)?(0,c.$s)(o,r.intervalMillis,30):(0,c.$s)(o,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,f),bm.debug("Calling attemptFetch again in "+h+" millis"),[2,km(t,f,n,r)];case 7:return[2]}}))}))}function Am(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Tm.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Nm=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();var Dm,Pm,Rm={},Om=[],xm={},Lm="dataLayer",Mm="gtag",Fm=!1;function jm(t){if(Fm)throw Tm.create("already-initialized");t.dataLayerName&&(Lm=t.dataLayerName),t.gtagName&&(Mm=t.gtagName)}function Um(t,e){!function(){var t=[];if((0,c.ru)()&&t.push("This is a browser extension environment."),(0,c.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Tm.create("invalid-analytics-context",{errorInfo:e});bm.warn(n.message)}}();var n=t.options.appId;if(!n)throw Tm.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Tm.create("no-api-key");bm.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Rm[n])throw Tm.create("already-exists",{id:n});if(!Fm){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Lm);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return pm(this,void 0,void 0,(function(){var s;return dm(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==vm.EVENT?[3,2]:[4,wm(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==vm.CONFIG?[3,4]:[4,_m(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(vm.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),bm.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(Rm,Om,xm,Lm,Mm),i=r.wrappedGtag,o=r.gtagCore;Pm=i,Dm=o,Fm=!0}return Rm[n]=function(t,e,n,r,i,o){return pm(this,void 0,void 0,(function(){var a,s,u,l,h,f,p;return dm(this,(function(d){switch(d.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=Em),pm(this,void 0,void 0,(function(){var n,r,i,o,a,s,u=this;return dm(this,(function(c){if(n=t.options,r=n.appId,i=n.apiKey,o=n.measurementId,!r)throw Tm.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw Tm.create("no-api-key")}return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new Nm,setTimeout((function(){return pm(u,void 0,void 0,(function(){return dm(this,(function(t){return s.abort(),[2]}))}))}),6e4),[2,km({appId:r,apiKey:i,measurementId:o},a,s,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&bm.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return bm.error(t)})),e.push(a),s=function(){return pm(this,void 0,void 0,(function(){var t;return dm(this,(function(e){switch(e.label){case 0:return(0,c.hl)()?[3,1]:(bm.warn(Tm.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,c.eu)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),bm.warn(Tm.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),l=u[0],h=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(ym))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=ym+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,l.measurementId),i("js",new Date),(p={}).origin="firebase",p.update=!0,f=p,null!=h&&(f.firebase_id=h),i(vm.CONFIG,l.measurementId,f),[2,l.measurementId]}}))}))}(t,Om,xm,e,Dm,Lm),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return pm(this,void 0,void 0,(function(){var o,a;return dm(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(vm.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=fm(fm({},r),{send_to:o}),t(vm.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(Pm,Rm[n],t,e,r).catch((function(t){return bm.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return pm(this,void 0,void 0,(function(){var i;return dm(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(vm.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(vm.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(Pm,Rm[n],t,e).catch((function(t){return bm.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return pm(this,void 0,void 0,(function(){var i;return dm(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(vm.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(vm.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(Pm,Rm[n],t,e).catch((function(t){return bm.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return pm(this,void 0,void 0,(function(){var i,o,a,s,u;return dm(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(vm.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(vm.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Pm,Rm[n],t,e).catch((function(t){return bm.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return pm(this,void 0,void 0,(function(){var n;return dm(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Rm[n],t).catch((function(t){return bm.error(t)}))},INTERNAL:{delete:function(){return delete Rm[n],Promise.resolve()}}}}var qm="analytics";function Vm(){return pm(this,void 0,void 0,(function(){return dm(this,(function(t){switch(t.label){case 0:if((0,c.ru)())return[2,!1];if(!(0,c.zI)())return[2,!1];if(!(0,c.hl)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,c.eu)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new Wp.wA(qm,(function(t){return Um(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:jm,EventName:gm,isSupported:Vm})),t.INTERNAL.registerComponent(new Wp.wA("analytics-internal",(function(t){try{return{logEvent:t.getProvider(qm).getImmediate().logEvent}}catch(t){throw Tm.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.6")}(s.Z);var Bm=function(){return(Bm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Km(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Wm(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create,Object.create;var zm,Gm=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Km(this,void 0,void 0,(function(){var e,n,r,i,o;return Wm(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),Hm=((zm={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",zm["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",zm["registration-api-key"]="Undefined API key. Check Firebase app initialization.",zm["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",zm["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",zm["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",zm["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",zm["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",zm["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",zm["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',zm["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',zm["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",zm["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",zm),Qm=new c.LL("remoteconfig","Remote Config",Hm),Ym=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Km(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,p,d,v,g,y,m,b;return Wm(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),Qm.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),Qm.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=m.entries,y=m.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==d&&200!==d)throw Qm.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}var w}))}))},t}(),Xm=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),$m=["1","true","t","yes","y","on"],Jm=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&$m.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),Zm=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=u.in.DEBUG;break;case"silent":this._logger.logLevel=u.in.SILENT;break;default:this._logger.logLevel=u.in.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Km(this,void 0,void 0,(function(){var t,e,n;return Wm(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Km(this,void 0,void 0,(function(){var t,e,n,r=this;return Wm(this,(function(i){switch(i.label){case 0:t=new Xm,setTimeout((function(){return Km(r,void 0,void 0,(function(){return Wm(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof c.ZR&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return Km(this,void 0,void 0,(function(){return Wm(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Bm(Bm({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Jm("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Jm("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Jm("static"))},t}();function tb(t,e){var n=t.target.error||void 0;return Qm.create(e,{originalErrorMessage:n&&n.message})}var eb="app_namespace_store",nb=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(tb(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(eb,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Km(this,void 0,void 0,(function(){var e,n=this;return Wm(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([eb],"readonly").objectStore(eb),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(tb(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(Qm.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Km(this,void 0,void 0,(function(){var n,r=this;return Wm(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([eb],"readwrite").objectStore(eb),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(tb(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(Qm.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return Km(this,void 0,void 0,(function(){var e,n=this;return Wm(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([eb],"readwrite").objectStore(eb),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(tb(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i(Qm.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),rb=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Km(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Wm(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function ib(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Qm.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var ob,ab=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Km(this,void 0,void 0,(function(){var e;return Wm(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Km(this,void 0,void 0,(function(){var e,i,o;return Wm(this,(function(a){switch(a.label){case 0:return[4,ib(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof c.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,c.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),sb="@firebase/remote-config";function ub(){s.Z.messaging().onMessage((t=>{console.log("Message received. ",t),navigator.serviceWorker.getRegistration().then((function(e){!function(t,e){const n=e.data.title,r={body:e.data.body,icon:e.data.icon};t.showNotification(n,r)}(e,t)}))}))}(ob=s.Z).INTERNAL.registerComponent(new Wp.wA("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Qm.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,c=o.appId;if(!a)throw Qm.create("registration-project-id");if(!s)throw Qm.create("registration-api-key");if(!c)throw Qm.create("registration-app-id");n=n||"firebase";var l=new nb(c,r.name,n),h=new rb(l),f=new u.Yd(sb);f.logLevel=u.in.ERROR;var p=new Ym(i,ob.SDK_VERSION,n,a,s,c),d=new ab(p,l),v=new Gm(d,l,h,f),g=new Zm(r,v,h,l,f);return g.ensureInitialized(),g}),"PUBLIC").setMultipleInstances(!0)),ob.registerVersion(sb,"0.1.33"),s.Z.registerVersion("firebase","8.3.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),s.Z.registerVersion("firebase","8.3.1");const cb="AuthKey YXNkaGl3YW1zY2lhdXNuamxxamR3b3ducWlsamRrd3FlcWU=",lb="https://api.ravenapp.dev/v1/apps/ead40fc4-34a2-4e7c-abaf-337c00eef79a",hb=`${lb}/users/%s`,fb=`${lb}/users/%s/devices`;function pb(){var n,i;(function(t){if("serviceWorker"in navigator){if(new URL(window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const e="firebase-messaging-sw.js";o?(function(t,e){fetch(t).then((n=>{const r=n.headers.get("content-type");404===n.status?(console.log(n.status,r),navigator.serviceWorker.ready.then((t=>{t.unregister().then((()=>{window.location.reload()}))}))):a(t,e)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):a(e,t)}))}})(),n=t,s.Z.initializeApp(n),ub(),(i=localStorage.getItem(e))&&fetch(hb.format(i),{headers:{Authorization:cb}}).then((t=>t.json())).then((t=>{console.log("Success fetching user:",t),localStorage.setItem(r,JSON.stringify(t))})).catch((t=>{console.error("Error:",t)}))}function db(t){if(t&&t!==localStorage.getItem(i)){var n=localStorage.getItem(r);if(n&&(n=JSON.parse(n)),n&&n.devices)for(var o in n.devices)if(o.fcm_token===t)return localStorage.setItem(i,t),void localStorage.setItem("raven_device_id",o.device_sid);!function(t,e){t&&e&&fetch(fb.format(t),{method:"POST",headers:{Authorization:cb,"Content-Type":"application/json"},body:JSON.stringify({platform:"web",fcm_token:e})}).then((t=>t.json())).then((t=>{console.log("Success setting user device:",t),localStorage.setItem(i,e),localStorage.setItem(DEVICE_ID,t.device_sid);var n=localStorage.getItem(r);if(n&&(n=JSON.parse(n)),n&&n.devices){let e=[...n.devices];e.push(t),n=Object.assign(n,e),localStorage.setItem(r,JSON.stringify(n))}})).catch((t=>{console.error("Error:",t)}))}(localStorage.getItem(e),t)}}String.prototype.format=function(){return[...arguments].reduce(((t,e)=>t.replace(/%s/,e)),this)},document.body.appendChild(function(){pb();var t=document.createElement("button");t.innerHTML="Get Token";var e=document.getElementsByTagName("body")[0];return e.appendChild(t),t.addEventListener("click",(function(){var t;Notification.requestPermission().then((e=>{"granted"===e?(console.log("Notification permission granted."),localStorage.getItem(i)||function(t,e){s.Z.messaging().getToken({vapidKey:"BFCiRVNjsqqXlwqBwv-NMrPWCoI50cvFTfzh8dMp1Q6YLwesjLKwSnQJEL1O2l3VjXoY17FmA-50nj3izde5lp4"}).then((t=>{t?(console.log("Token ",t),e(t),ub()):console.log("No registration token available. Request permission to generate one.")})).catch((t=>{console.log("An error occurred while retrieving token. ",t)}))}(0,db)):(console.log("Unable to get permission to notify."),t("Unable to get permission to notify."))}))})),e}())})()})();